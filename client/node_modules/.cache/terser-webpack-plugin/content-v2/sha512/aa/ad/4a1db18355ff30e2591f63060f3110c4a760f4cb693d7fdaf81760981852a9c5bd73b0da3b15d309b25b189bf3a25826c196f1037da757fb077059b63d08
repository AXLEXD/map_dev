{"map":"{\"version\":3,\"sources\":[\"/Users/alex/Programming/web_development/map_dev_server/client/src/App.js\",\"/Users/alex/Programming/web_development/map_dev_server/client/src/reportWebVitals.js\",\"/Users/alex/Programming/web_development/map_dev_server/client/src/index.js\"],\"names\":[\"DRAWTOOL\",\"MOVETOOL\",\"blocks\",\"blockid\",\"blockname\",\"imagesrc\",\"plotLineLow\",\"x0\",\"y0\",\"x1\",\"y1\",\"drawFunc\",\"dx\",\"dy\",\"yi\",\"D\",\"y\",\"x\",\"plotLineHigh\",\"xi\",\"Vector2D\",\"_classCallCheck\",\"this\",\"_createClass\",\"key\",\"value\",\"othervector\",\"number\",\"Map\",\"data\",\"dataview\",\"numchunks\",\"canvas\",\"offset\",\"scale\",\"chunkpixels\",\"startpoint\",\"Math\",\"floor\",\"_canvas$getBoundingCl\",\"getBoundingClientRect\",\"width\",\"height\",\"ceil\",\"dimn\",\"start\",\"lines\",\"coords\",\"map_grid\",\"i\",\"j\",\"coordsobj\",\"push\",\"Promise\",\"resolve\",\"reject\",\"fetch\",\"method\",\"headers\",\"Accept\",\"Content-Type\",\"body\",\"JSON\",\"stringify\",\"then\",\"arrayBuffer\",\"chunkbuffer\",\"Uint32Array\",\"currentcell\",\"k\",\"l\",\"index\",\"colorhex\",\"AppWrapper\",\"_React$Component\",\"props\",\"_this\",\"_possibleConstructorReturn\",\"_getPrototypeOf\",\"call\",\"state\",\"tool_mode\",\"debug_mode\",\"show_stats\",\"color_selected\",\"update\",\"time\",\"tot_time\",\"num_updates\",\"draw\",\"cursorx\",\"cursory\",\"offsetx\",\"offsety\",\"chunkx\",\"chunky\",\"cxstart\",\"cystart\",\"cxend\",\"cyend\",\"getColorSelected\",\"getDebugMode\",\"getToolMode\",\"changeToolMode\",\"change_to\",\"setState\",\"changeColor\",\"out_num\",\"parseInt\",\"substring\",\"console\",\"log\",\"isSelected\",\"changeUpdateTime\",\"new_time\",\"changeDrawTime\",\"changeCursorLoc\",\"vector\",\"changeOffsetLoc\",\"changeChunkLoc\",\"_inherits\",\"document\",\"style\",\"overflow\",\"filename\",\"x2\",\"y2\",\"response\",\"get\",\"split\",\"blob\",\"pngblob\",\"url\",\"window\",\"URL\",\"createObjectURL\",\"link\",\"createElement\",\"href\",\"setAttribute\",\"appendChild\",\"click\",\"parentNode\",\"removeChild\",\"_this2\",\"React\",\"className\",\"MapCanvas\",\"toolmode\",\"Palette\",\"position\",\"right\",\"round\",\"onClick\",\"checked\",\"type\",\"onChange\",\"defaultValue\",\"e\",\"target\",\"fileDownload\",\"Component\",\"_React$Component2\",\"_this3\",\"drawLines\",\"lastdraw\",\"tempscale\",\"cellpos\",\"canvasRef\",\"createRef\",\"mapoffset\",\"celloffset\",\"cursorcurrent\",\"lmousedown\",\"rmousedown\",\"current\",\"setTimeout\",\"updateCanvas\",\"event\",\"rect\",\"clientX\",\"left\",\"clientY\",\"top\",\"end\",\"transform\",\"setTo\",\"_this4\",\"Date\",\"now\",\"resizeCanvas\",\"_canvas$getBoundingCl2\",\"ctx\",\"getContext\",\"clearRect\",\"fillStyle\",\"fillRect\",\"mapoffset_x\",\"mapoffset_y\",\"doFill\",\"chunkbufferoffset\",\"beginPath\",\"lineWidth\",\"moveTo\",\"lineTo\",\"c\",\"CHUNKSIZE\",\"toString\",\"padStart\",\"stroke\",\"_this5\",\"_this$map_grid$getVal\",\"getValues\",\"multipliedby\",\"linestosend\",\"setMatrix\",\"drawMap\",\"_canvas$getBoundingCl3\",\"_window$devicePixelRa\",\"devicePixelRatio\",\"ratio\",\"context\",\"currentpos\",\"_this$map_grid$getChu\",\"getChunkPosOffset\",\"dataindex\",\"getDataIndex\",\"byteLength\",\"addCell\",\"newcursorcurrent\",\"getCursorPosition\",\"moveMap\",\"newcurrentcell\",\"getCurrentCell\",\"isEqualTo\",\"drawLine\",\"p1\",\"p2\",\"_this6\",\"abs\",\"plotLine\",\"drawCellAtMouse\",\"_this7\",\"ref\",\"cursor\",\"getCursor\",\"onContextMenu\",\"preventDefault\",\"onMouseDown\",\"button\",\"_this7$map_grid$getCh\",\"onMouseUp\",\"onMouseMove\",\"moveCursor\",\"onMouseLeave\",\"onWheel\",\"newscale\",\"deltaY\",\"oldscale\",\"_React$Component3\",\"_this8\",\"handleChange\",\"_this9\",\"map\",\"backgroundColor\",\"concat\",\"App\",\"reportWebVitals\",\"onPerfEntry\",\"Function\",\"__webpack_require__\",\"bind\",\"_ref\",\"getCLS\",\"getFID\",\"getFCP\",\"getLCP\",\"getTTFB\",\"ReactDOM\",\"createRoot\",\"getElementById\",\"render\",\"StrictMode\"],\"mappings\":\"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\",\"sourcesContent\":[\"import './App.css';\\nimport React, { createRef } from 'react';\\n\\n\\nconst CHUNKSIZE = 16;\\n\\nconst LOWESTSCALE = 3;\\n\\nconst DRAWTOOL = 0;\\nconst EYEDROPTOOL = 1;\\nconst MOVETOOL = 2;\\n  \\nconst blocks = [\\n    {\\n        blockid: '0',\\n        blockname: '1',\\n        imagesrc: '#ffffff'\\n    },\\n    {\\n        blockid: '1',\\n        blockname: '2',\\n        imagesrc: '#d1e7dc'\\n    },\\n    {\\n        blockid: '2',\\n        blockname: '3',\\n        imagesrc: '#c4d4e1'\\n    },\\n    {\\n        blockid: '3',\\n        blockname: '4',\\n        imagesrc: '#bcb5d3'\\n    },\\n    {\\n        blockid: '4',\\n        blockname: '5',\\n        imagesrc: '#f5dbe2'\\n    },\\n    {\\n        blockid: '5',\\n        blockname: '6',\\n        imagesrc: '#eeb6c9'\\n    },\\n    {\\n        blockid: '6',\\n        blockname: '7',\\n        imagesrc: '#c49abf'\\n    },\\n    {\\n        blockid: '7',\\n        blockname: '8',\\n        imagesrc: '#bada55'\\n    },\\n    {\\n        blockid: '8',\\n        blockname: '9',\\n        imagesrc: '#ffd700'\\n    },\\n    {\\n        blockid: '9',\\n        blockname: '10',\\n        imagesrc: '#f47b79'\\n    },\\n    {\\n        blockid: 'a',\\n        blockname: '11',\\n        imagesrc: '#c6e2d4'\\n    },\\n    {\\n        blockid: 'b',\\n        blockname: '12',\\n        imagesrc: '#b6d3c2'\\n    },\\n    {\\n        blockid: 'c',\\n        blockname: '13',\\n        imagesrc: '#e0b1cb'\\n    },\\n    {\\n        blockid: 'd',\\n        blockname: '14',\\n        imagesrc: '#d0a7b7'\\n    },\\n    {\\n        blockid: 'e',\\n        blockname: '15',\\n        imagesrc: '#f3d1d3'\\n    },\\n    {\\n        blockid: 'f',\\n        blockname: '16',\\n        imagesrc: '#e9b8c8'\\n    }\\n];\\n\\n  \\n\\nfunction plotLineLow(x0, y0, x1, y1, drawFunc) {\\n    let dx = x1 - x0;\\n    let dy = y1 - y0;\\n    let yi = 1;\\n    if (dy < 0) {\\n        yi = -1;\\n        dy = -dy;\\n    }\\n    let D = (2 * dy) - dx;\\n    let y = y0;\\n\\n    for (let x = x0;x<x1+1;x++) {\\n        drawFunc(x, y);\\n        if (D > 0) {\\n            y = y + yi;\\n            D = D + (2 * (dy - dx));\\n        } else {\\n            D = D + 2*dy;\\n        }\\n    }\\n}\\nfunction plotLineHigh(x0, y0, x1, y1, drawFunc) {\\n    let dx = x1 - x0;\\n    let dy = y1 - y0;\\n    let xi = 1;\\n    if (dx < 0) {\\n        xi = -1;\\n        dx = -dx;\\n    }\\n    let D = (2 * dx) - dy;\\n    let x = x0;\\n\\n    for (let y = y0;y<y1+1;y++) {\\n        drawFunc(x, y);\\n        if (D > 0) {\\n            x = x + xi;\\n            D = D + (2 * (dx - dy));\\n        } else {\\n            D = D + 2*dx;\\n        }\\n    }\\n}\\n\\nfunction plotLine(p1, p2, offset, drawFunc) {\\n    \\n    let x0 = p1.x+offset.x;\\n    let y0 = p1.y+offset.y;\\n    \\n    let x1 = p2.x+offset.x;\\n    let y1 = p2.y+offset.y;\\n\\n    if (x0===x1 && y0===y1) drawFunc(x0,y0);\\n\\n\\n    if (Math.abs(y1 - y0) < Math.abs(x1 - x0)) {\\n        if (x0 > x1) plotLineLow(x1, y1, x0, y0, drawFunc);\\n        else plotLineLow(x0, y0, x1, y1, drawFunc);\\n    }\\n    else {\\n        if (y0 > y1) plotLineHigh(x1, y1, x0, y0, drawFunc);\\n        else plotLineHigh(x0, y0, x1, y1, drawFunc);\\n    }\\n}\\n\\n\\nclass Vector2D {\\n    constructor(x,y) {\\n        this.x = x;\\n        this.y = y;\\n    }\\n\\n    transform(x,y) {\\n        this.x += x;\\n        this.y += y;\\n    }\\n\\n    setTo(x,y) {\\n        this.x = x;\\n        this.y = y;\\n    }\\n\\n    isEqualTo(othervector) {\\n        return (this.x===othervector.x && this.y===othervector.y);\\n    }\\n    notEqualTo(othervector) {\\n        return (this.x!==othervector.x || this.y!==othervector.y);\\n    }\\n\\n    positive() {\\n        return (this.x >= 0 && this.y >=0);\\n    }\\n\\n    multipliedby(number) {\\n        return new Vector2D(this.x*number,this.y*number);\\n    }\\n    transformedby(x,y) {\\n        return new Vector2D(this.x+x,this.y+y);\\n    }\\n}\\n\\n\\nclass Map {\\n    constructor() {\\n        // this.canvasdimensions = new Vector2D(w,h); // establishing at start means no resizing canvas element\\n        this.data = null;\\n        this.dataview = null;\\n        this.numchunks = null;\\n    }\\n\\n    getValues(canvas, offset, scale) {\\n        let chunkpixels = CHUNKSIZE*scale;\\n\\n        let numchunks = new Vector2D(0,0);\\n        let startpoint = new Vector2D(0,0);\\n\\n        startpoint.x = (offset.x === 0) ? 0 : Math.floor((-1*offset.x)/chunkpixels);\\n        startpoint.y = (offset.y === 0) ? 0 : Math.floor((-1*offset.y)/chunkpixels);\\n\\n        const { width, height } = canvas.getBoundingClientRect();\\n\\n        numchunks.x = Math.ceil(width/chunkpixels)+1; // bit cheaty - should probs optimise\\n        numchunks.y = Math.ceil(height/chunkpixels)+1;\\n\\n        return {startpoint, numchunks};\\n    }\\n\\n    setMatrix(dimn, start, lines) {\\n\\n        let coords = [];\\n        let map_grid = this;\\n\\n        for (let i=0;i<dimn.x;i++) {\\n            for (let j=0;j<dimn.y;j++) {\\n                let coordsobj = { x: start.x+i, y: start.y+j };\\n                coords.push(coordsobj);    \\n            }\\n        }\\n        return new Promise(function(resolve, reject) {\\n            fetch('/getchunks',{\\n                method: 'POST',\\n                headers: {'Accept': 'application/octet-stream', 'Content-Type': 'application/json'},\\n                body: JSON.stringify({coords:coords, lines:lines})\\n            }).then((data)=>{\\n                return data.arrayBuffer();\\n            }).then((chunkbuffer) => {\\n                // console.log([...new Uint8Array(chunkbuffer)].map(x => x.toString(16).padStart(2, '0')));\\n                map_grid.data = chunkbuffer;\\n                map_grid.dataview = new Uint32Array(map_grid.data);\\n                map_grid.numchunks = dimn;\\n                resolve();\\n            });\\n        });\\n    }\\n\\n    getChunkPosOffset(currentcell, startpoint) {\\n        const i = Math.floor((currentcell.x/CHUNKSIZE))-startpoint.x;\\n        const k = currentcell.x - (i+startpoint.x)*CHUNKSIZE;\\n\\n        const j = Math.floor((currentcell.y/CHUNKSIZE))-startpoint.y;\\n        const l = currentcell.y - (j+startpoint.y)*CHUNKSIZE;\\n\\n\\n        return {i, j, k, l};\\n    }\\n\\n    addCell(index,colorhex) {\\n        this.dataview[index] = colorhex;\\n        // console.log(data[index], colorhex);\\n    }\\n    getDataIndex(i,j,k,l) {\\n        return i*(this.numchunks.y)*(CHUNKSIZE*CHUNKSIZE)+j*(CHUNKSIZE*CHUNKSIZE)+k*CHUNKSIZE+l;\\n    }\\n}\\n\\n\\nclass AppWrapper extends React.Component {\\n    constructor(props) {\\n        super(props);\\n        this.state = {\\n            tool_mode: MOVETOOL,\\n            debug_mode: false,\\n            show_stats: true,\\n            color_selected: 1672153, \\n            update: {\\n                time: 0,\\n                tot_time: 0,\\n                num_updates: 1\\n            },\\n            draw: {\\n                time: 0,\\n                tot_time: 0,\\n                num_updates: 1\\n            },\\n            cursorx: 0,\\n            cursory: 0,\\n            offsetx: 0,\\n            offsety: 0,\\n            chunkx: 0,\\n            chunky: 0,\\n\\n            cxstart:0,\\n            cystart:0,\\n            cxend:0,\\n            cyend:0\\n        };\\n\\n        this.getColorSelected = () => {return this.state.color_selected};\\n        this.getDebugMode = () => {return this.state.debug_mode};\\n        this.getToolMode = () => {return this.state.tool_mode};\\n\\n        this.changeToolMode = (change_to) => {\\n            this.setState({tool_mode: change_to});\\n        }\\n\\n        this.changeColor = (blockid) => {\\n            if (typeof blockid === 'string') {\\n                let out_num = parseInt(blockid.substring(1), 16);\\n                console.log(blockid.substring(1));\\n                console.log(out_num);\\n                this.setState({color_selected: out_num});\\n            }\\n            else if (typeof blockid === 'number') {\\n                this.setState({color_selected: blockid});\\n            }\\n            this.changeToolMode(DRAWTOOL);\\n        };\\n        this.isSelected = (blockid) => {\\n            if (typeof blockid === 'string') {\\n                let out_num = parseInt(blockid.substring(1), 16);\\n                return (out_num===this.state.color_selected);\\n            }\\n            else if (typeof blockid === 'number') {\\n                return (blockid===this.state.color_selected)\\n            }\\n        };\\n\\n        this.changeUpdateTime = (new_time) => {\\n            this.setState({update:{\\n                time: new_time, \\n                tot_time: this.state.update.tot_time+new_time, \\n                num_updates: this.state.update.num_updates+1\\n            }});\\n        }\\n        this.changeDrawTime = (new_time) => {\\n            this.setState({draw:{\\n                time: new_time, \\n                tot_time: this.state.draw.tot_time+new_time, \\n                num_updates: this.state.draw.num_updates+1\\n            }});\\n        }\\n        this.changeCursorLoc = (vector) => {\\n            this.setState({cursorx: vector.x,cursory: vector.y});\\n        }\\n        this.changeOffsetLoc = (vector) => {\\n            this.setState({offsetx: vector.x,offsety: vector.y});\\n        }\\n        this.changeChunkLoc = (x,y) => {\\n            this.setState({chunkx: x,chunky: y});\\n        }\\n    }\\n\\n    componentDidMount() {\\n        document.body.style.overflow = \\\"hidden\\\"; // stops user from scrolling the page\\n    }\\n\\n    fileDownload() {\\n        let filename;\\n        let coordsobj = {x1:this.state.cxstart,y1:this.state.cystart,x2:this.state.cxend,y2:this.state.cyend};\\n        if (coordsobj.x1===coordsobj.x2 || coordsobj.y1===coordsobj.y2) return;\\n\\n        fetch('/getimage',{\\n            method: 'POST',\\n            headers: {'Accept': 'application/octet-stream', 'Content-Type': 'application/json'},\\n            body: JSON.stringify(coordsobj)\\n        }).then((response) => {\\n            filename =  response.headers.get('Content-Disposition').split('filename=')[1];\\n            return response.blob()\\n        })\\n        .then((pngblob) => {\\n            const url = window.URL.createObjectURL(pngblob);\\n            const link = document.createElement('a');\\n            link.href = url;\\n            link.setAttribute('download',filename);\\n            document.body.appendChild(link);\\n            link.click();\\n            link.parentNode.removeChild(link);\\n        });\\n    }\\n\\n    render() {\\n        return (\\n            <div className='App-wrapper'>\\n                <MapCanvas \\n                    toolmode={this.state.tool_mode}\\n                    getToolMode={this.getToolMode}\\n                    changeToolMode={this.changeToolMode}\\n                    getDebugMode={this.getDebugMode}\\n                    changeUpdateTime={this.changeUpdateTime}\\n                    changeDrawTime={this.changeDrawTime}\\n                    getColorSelected={this.getColorSelected}\\n                    changeCursorLoc={this.changeCursorLoc}\\n                    changeOffsetLoc={this.changeOffsetLoc}\\n                    changeChunkLoc={this.changeChunkLoc}\\n                    changeColor={this.changeColor}\\n                />\\n                <Palette isSelected={this.isSelected} changeColor={this.changeColor}/>\\n                <div className='drawer primary'>\\n                    {(this.state.show_stats)?(<div style={{position: `absolute`,right:`0.8vw`}}>\\n                        ({this.state.update.time}ms, avg: {Math.round(this.state.update.tot_time/this.state.update.num_updates)}ms, {this.state.update.num_updates} updates)\\n                        <br/>({this.state.draw.time}ms, avg: {Math.round(this.state.draw.tot_time/this.state.draw.num_updates)}ms, {this.state.draw.num_updates} draws)\\n                        <br/>Cursor: ({this.state.cursorx},{this.state.cursory})\\n                        <br/>Offset: ({this.state.offsetx},{this.state.offsety})\\n                        <br/>Chunk: ({this.state.chunkx},{this.state.chunky})\\n                    </div>):null}\\n\\n                    <div\\n                        className={`toolbutton` + (this.getToolMode()===DRAWTOOL ? \\\"selected\\\" : \\\"\\\")+ ` blockbutton` + (this.getToolMode()===DRAWTOOL ? \\\"selected\\\" : \\\"\\\")}\\n                        onClick={() => {this.changeToolMode(DRAWTOOL)}}\\n                    >draw</div>\\n                    <div\\n                        className={`toolbutton` + (this.getToolMode()===EYEDROPTOOL ? \\\"selected\\\" : \\\"\\\")+ ` blockbutton` + (this.getToolMode()===EYEDROPTOOL ? \\\"selected\\\" : \\\"\\\")}\\n                        onClick={() => {this.changeToolMode(EYEDROPTOOL)}}\\n                    >eyedrop</div>\\n                    <div\\n                        className={`toolbutton` + (this.getToolMode()===MOVETOOL ? \\\"selected\\\" : \\\"\\\")+ ` blockbutton` + (this.getToolMode()===MOVETOOL ? \\\"selected\\\" : \\\"\\\")}\\n                        onClick={() => {this.changeToolMode(MOVETOOL)}}\\n                    >move</div>\\n                    \\n\\n                    <input checked={this.state.debug_mode} type={\\\"checkbox\\\"} onChange={()=>{this.setState({debug_mode:!this.state.debug_mode})}}></input> Debug Mode&ensp;\\n                    <input checked={this.state.show_stats} type={\\\"checkbox\\\"} onChange={()=>{this.setState({show_stats:!this.state.show_stats})}}></input> Stats\\n                    <div\\n                        className={`download-wrapper`}\\n                        // onClick={() => this.fileDownload()}\\n                    >\\n                        <input defaultValue={\\\"0\\\"} type={\\\"number\\\"} style={{width:\\\"35px\\\"}} onChange={(e)=>this.setState({cxstart:parseInt(e.target.value)})}></input>\\n                        <input defaultValue={\\\"0\\\"} type={\\\"number\\\"} style={{width:\\\"35px\\\"}} onChange={(e)=>this.setState({cystart:parseInt(e.target.value)})}></input>\\n                        <input defaultValue={\\\"0\\\"} type={\\\"number\\\"} style={{width:\\\"35px\\\"}} onChange={(e)=>this.setState({cxend:parseInt(e.target.value)})}></input>\\n                        <input defaultValue={\\\"0\\\"} type={\\\"number\\\"} style={{width:\\\"35px\\\"}} onChange={(e)=>this.setState({cyend:parseInt(e.target.value)})}></input>\\n                        <div className={`download-button`} onClick={() => this.fileDownload()}>downolads</div>\\n                    </div>\\n                </div>\\n            </div>\\n        )\\n    }\\n}\\n\\nclass MapCanvas extends React.Component {\\n    constructor(props) {\\n        super(props);\\n\\n        this.drawLines = [];\\n\\n        this.lastdraw = 0;\\n\\n        this.scale = 16;\\n        this.tempscale = this.scale;\\n\\n        this.cellpos = {i:0,j:0,k:0,l:0};\\n\\n        this.map_grid = null;\\n        this.canvasRef = createRef();\\n    \\n        this.mapoffset = new Vector2D(0,0);\\n        this.celloffset = new Vector2D(0,0);\\n        this.currentcell = new Vector2D(0,0);\\n        this.startpoint = new Vector2D(0,0);\\n\\n        this.cursorcurrent = new Vector2D(0,0);\\n        this.lmousedown = false;\\n        this.rmousedown = false;\\n\\n        this.canvas = null;\\n    }\\n\\n    //Called after element's initialisation\\n    componentDidMount() { \\n        this.canvas = this.canvasRef.current;\\n        this.map_grid = new Map();\\n        setTimeout(this.updateCanvas(), 1000);\\n    }\\n\\n    getCursorPosition(event, canvas) {\\n        const rect = canvas.getBoundingClientRect();\\n        const x = event.clientX - rect.left;\\n        const y = event.clientY - rect.top;\\n        const pos = new Vector2D(x,y);\\n        return pos;\\n    }\\n\\n    getCurrentCell() {\\n        let x = Math.floor((this.cursorcurrent.x-this.mapoffset.x*this.scale)/(this.scale));\\n        let y = Math.floor((this.cursorcurrent.y-this.mapoffset.y*this.scale)/(this.scale));\\n        const pos = new Vector2D(x,y);\\n        return pos;\\n    }\\n\\n    moveMap(start, end) {\\n        let x = (end.x-start.x)/this.scale;\\n        let y = (end.y-start.y)/this.scale;\\n        this.mapoffset.transform(x,y);\\n        this.celloffset.setTo(Math.floor(this.mapoffset.x),Math.floor(this.mapoffset.y));\\n        this.props.changeOffsetLoc(this.celloffset);\\n    }\\n\\n    drawMap (canvas, startpoint) {\\n        let start =  Date.now();\\n\\n        // if (start < (this.lastdraw + 1000/60)) return; // Only drawing every 1/60th of a second\\n        this.lastdraw = start;\\n\\n        this.resizeCanvas(canvas);\\n        const { width, height } = canvas.getBoundingClientRect();\\n        const ctx = canvas.getContext('2d');\\n        ctx.clearRect(0, 0, width, height)\\n        ctx.fillStyle = \\\"#ffffff\\\";\\n        ctx.fillRect(0, 0, width, height);\\n\\n        // finding location in terms of iterators of current cell\\n        // let {cell_i, cell_j, cell_k, cell_l} = this.map_grid.getChunkPosOffset(this.currentcell, startpoint);\\n\\n        let blockid;\\n        let x;\\n        let y;\\n\\n        let mapoffset_x = Math.floor(this.mapoffset.x*this.scale);\\n        let mapoffset_y = Math.floor(this.mapoffset.y*this.scale);\\n        // let mapoffset_x = this.mapoffset.x;\\n        // let mapoffset_y = this.mapoffset.y;\\n\\n        let doFill = (i,j,k,l) => {\\n\\n            x = (((i+startpoint.x)*CHUNKSIZE+k))*(this.scale)+mapoffset_x;\\n            y = (((j+startpoint.y)*CHUNKSIZE+l))*(this.scale)+mapoffset_y;\\n            if (x%1!==0||y%1!==0||this.scale%1!==0) console.log(\\\"ALERT:\\\", x, y, this.scale);\\n            ctx.fillRect(x, y, this.scale, this.scale);\\n            // console.log(x,y,cellapparentsize);\\n        }\\n        if (this.map_grid.data === null) return;\\n        // for map\\n\\n\\n        let chunkbufferoffset = 0;\\n\\n        if (this.props.getDebugMode()) ctx.beginPath();\\n        for (let i=0;i<this.map_grid.numchunks.x;i++) {\\n            for (let j=0;j<this.map_grid.numchunks.y;j++) {\\n                // for each chunk\\n                if (this.props.getDebugMode()) {\\n                    x = (((i+startpoint.x)*CHUNKSIZE))*(this.scale)+mapoffset_x;\\n                    y = (((j+startpoint.y)*CHUNKSIZE))*(this.scale)+mapoffset_y;\\n\\n                    ctx.fillStyle = \\\"#000000\\\";\\n                    ctx.lineWidth = 0.01*Math.floor(this.scale);\\n                    ctx.moveTo(x, 0);\\n                    ctx.lineTo(x, height);\\n                    // ctx.stroke();\\n                    ctx.moveTo(0, y);\\n                    ctx.lineTo(width, y);\\n                }\\n                for (let c=0;c<(CHUNKSIZE*CHUNKSIZE);c++) {\\n                    let k = Math.floor(c/CHUNKSIZE);\\n                    let l = c-(k*CHUNKSIZE);\\n                    \\n                    blockid = this.map_grid.dataview[chunkbufferoffset+c];\\n\\n                    if (blockid!==16777215){\\n                        // ctx.fillStyle = blockid.toString(16);\\n                        ctx.fillStyle = \\\"#\\\" + (blockid & 0x00FFFFFF).toString(16).padStart(6, '0');\\n                        // if (c===0) console.log((blockid & 0x00FFFFFF).toString(16).padStart(6, '0'))\\n                        doFill(i,j,k,l,blockid);\\n                    }\\n                }\\n                chunkbufferoffset += (CHUNKSIZE*CHUNKSIZE);\\n            }\\n        }\\n        if (this.props.getDebugMode()) ctx.stroke();\\n\\n        if (this.props.toolmode===DRAWTOOL) {\\n            ctx.fillStyle = \\\"#\\\"+(this.props.getColorSelected() & 0x00FFFFFF).toString(16).padStart(6, '0')+\\\"ff\\\";\\n            doFill(this.cellpos.i,this.cellpos.j,this.cellpos.k,this.cellpos.l);\\n        }\\n        this.props.changeDrawTime(Date.now()-start);\\n    }\\n\\n    updateCanvas() {\\n        let start = Date.now(); // time testing\\n\\n        let {startpoint, numchunks} = this.map_grid.getValues(this.canvas, this.mapoffset.multipliedby(this.scale), this.scale);\\n        let linestosend = this.drawLines;\\n        this.drawLines = [];\\n        this.map_grid.setMatrix(numchunks, startpoint, linestosend)\\n        .then(()=>{\\n            this.drawMap(this.canvas, startpoint);\\n            this.startpoint = startpoint;\\n            this.props.changeUpdateTime(Date.now()-start);\\n        });\\n\\n        setTimeout(()=>{this.updateCanvas()}, 1000);\\n    }\\n\\n    // stolen code lmao\\n    resizeCanvas(canvas) {\\n        const { width, height } = canvas.getBoundingClientRect();\\n        \\n        if (canvas.width !== width || canvas.height !== height) {\\n          const { devicePixelRatio:ratio=1 } = window;\\n          const context = canvas.getContext('2d');\\n          canvas.width = (1*width*ratio);\\n          canvas.height = (1*height*ratio);\\n          context.scale(ratio, ratio);\\n          return true;\\n        }\\n    \\n        return false\\n    }\\n\\n    drawCellAtMouse(x,y) {\\n        const currentpos = new Vector2D(x-this.celloffset.x,y-this.celloffset.y);\\n\\n        let {i, j, k, l} = this.map_grid.getChunkPosOffset(currentpos, this.startpoint);\\n        let dataindex = this.map_grid.getDataIndex(i,j,k,l);\\n        if (dataindex < this.map_grid.data.byteLength/4) this.map_grid.addCell(dataindex, this.props.getColorSelected());\\n    }\\n\\n    moveCursor(event) {\\n        let update = false;\\n        let newcursorcurrent = this.getCursorPosition(event, this.canvas);\\n        if (this.rmousedown) {\\n            this.moveMap(this.cursorcurrent, newcursorcurrent);\\n            update = true;\\n        }\\n        this.cursorcurrent = newcursorcurrent;\\n        let newcurrentcell = this.getCurrentCell();\\n        // Drawing line and updating stats\\n        if (!this.currentcell.isEqualTo(newcurrentcell)) {\\n            if (this.lmousedown) this.drawLine(this.currentcell,newcurrentcell);\\n            this.currentcell = newcurrentcell;\\n            this.cellpos = this.map_grid.getChunkPosOffset(this.currentcell, this.startpoint);\\n            this.props.changeCursorLoc(this.currentcell);\\n            this.props.changeChunkLoc(this.cellpos.i+this.startpoint.x,this.cellpos.j+this.startpoint.y);\\n            update = true;\\n        }\\n        return update;\\n    }\\n\\n    drawLine(p1,p2) {\\n        plotLine(p1, p2, this.celloffset, (x,y)=>this.drawCellAtMouse(x,y));\\n        this.drawLines.push({p1:p1,p2:p2,offset:this.celloffset,blockid:this.props.getColorSelected()});\\n    }\\n\\n    render() {\\n        let getCursor = ()=>{\\n            switch (this.props.toolmode) {\\n                case EYEDROPTOOL:\\n                    return \\\"crosshair\\\";\\n                case MOVETOOL:\\n                    return \\\"move\\\";\\n                default:\\n                    return \\\"default\\\";\\n            }\\n        }\\n        return (\\n            <canvas \\n                ref={this.canvasRef}\\n                className='map-canvas primary'\\n                style={{cursor:getCursor()}}\\n                onContextMenu={(e) => {\\n                    e.preventDefault();\\n                }}\\n                onMouseDown={(e) => {\\n                    e.preventDefault();\\n                    if (e.button === 0) {\\n                        switch (this.props.toolmode) {\\n                            case EYEDROPTOOL:\\n                                console.log(\\\"eyedroptool used\\\");\\n                                let {i,j,k,l} = this.map_grid.getChunkPosOffset(this.currentcell, this.startpoint);\\n                                let dataindex = this.map_grid.getDataIndex(i,j,k,l);\\n                                this.props.changeColor(this.map_grid.dataview[dataindex]);\\n                                // this.props.changeToolMode(DRAWTOOL);\\n                                break;\\n                            case MOVETOOL:\\n                                this.rmousedown=true;\\n                                break;\\n                            default:\\n                                this.lmousedown=true;\\n                                this.drawLine(this.currentcell,this.currentcell);\\n                                this.drawMap(this.canvas, this.startpoint);\\n                                break;\\n                        }\\n                    }\\n                    else if (e.button === 2) {\\n                        this.rmousedown=true;\\n                    }\\n                }}\\n                onMouseUp={(e) => {\\n                    this.lmousedown=false;\\n                    this.rmousedown=false;\\n                    this.drawMap(this.canvas, this.startpoint);\\n                }}\\n                onMouseMove={(e) => {\\n                    if (this.moveCursor(e)) this.drawMap(this.canvas, this.startpoint);\\n                }}\\n                onMouseLeave={(e) => {\\n                    this.moveCursor(e);\\n                    this.lmousedown=false;\\n                    this.rmousedown=false;\\n                    this.drawMap(this.canvas, this.startpoint);\\n                }}\\n                onWheel={(e) => {\\n                    let newscale = this.tempscale - Math.floor(e.deltaY)/1000;\\n                    // console.log(this.scale, this.tempscale);\\n                    if (newscale>LOWESTSCALE) this.tempscale = newscale;\\n                    else this.tempscale = LOWESTSCALE;\\n                    let oldscale = this.scale;\\n                    this.scale = Math.floor(this.tempscale);\\n                    \\n                    if (oldscale!==this.scale) this.drawMap(this.canvas, this.startpoint);\\n                }}\\n            ></canvas>\\n        )\\n    }\\n}\\n\\n// needs to be fixed up - maybe add useEffect()\\nclass Palette extends React.Component {\\n    constructor(props) {\\n        super(props);\\n\\n        this.handleChange = (e) => {\\n            this.props.changeColor(e.target.value);\\n        }\\n    }\\n\\n    render() {\\n        return (\\n            <div className='palette primary'>\\n                {\\n                    blocks.map(button => (\\n                        <div \\n                            key={button.blockid} \\n                            style={{backgroundColor: `${button.imagesrc}`}} \\n                            className={`blockbutton` + (this.props.isSelected(button.imagesrc) ? \\\"selected\\\" : \\\"\\\")}\\n                            onClick={() => {this.props.changeColor(button.imagesrc)}}\\n                            //onClick={() => {console.log(button.blockid)}}\\n                            ></div>\\n                    ))\\n                }\\n                <input type={\\\"color\\\"} onChange={this.handleChange}></input>\\n                {/* <input type={\\\"submit\\\"} value={\\\"Apply\\\"}></input> */}\\n        </div>\\n        )\\n    }\\n\\n}\\n\\n\\n\\n\\nfunction App() {\\n  return (\\n    <AppWrapper/>\\n  );\\n}\\n\\nexport default App;\\n\",\"const reportWebVitals = onPerfEntry => {\\n  if (onPerfEntry && onPerfEntry instanceof Function) {\\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\\n      getCLS(onPerfEntry);\\n      getFID(onPerfEntry);\\n      getFCP(onPerfEntry);\\n      getLCP(onPerfEntry);\\n      getTTFB(onPerfEntry);\\n    });\\n  }\\n};\\n\\nexport default reportWebVitals;\\n\",\"import React from 'react';\\nimport ReactDOM from 'react-dom/client';\\nimport './index.css';\\nimport App from './App';\\nimport reportWebVitals from './reportWebVitals';\\n\\nconst root = ReactDOM.createRoot(document.getElementById('root'));\\nroot.render(\\n  <React.StrictMode>\\n    <App />\\n  </React.StrictMode>\\n);\\n\\n// If you want to start measuring performance in your app, pass a function\\n// to log results (for example: reportWebVitals(console.log))\\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\\nreportWebVitals();\\n\"]}","code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{17:function(e,t,a){},18:function(e,t,a){},19:function(e,t,a){\"use strict\";a.r(t);var n=a(0),o=a.n(n),s=a(7),i=a.n(s),r=(a(17),a(4)),c=a(3),l=a(5),u=a(1),h=a(2),d=(a(18),0),f=2,m=[{blockid:\"0\",blockname:\"1\",imagesrc:\"#ffffff\"},{blockid:\"1\",blockname:\"2\",imagesrc:\"#d1e7dc\"},{blockid:\"2\",blockname:\"3\",imagesrc:\"#c4d4e1\"},{blockid:\"3\",blockname:\"4\",imagesrc:\"#bcb5d3\"},{blockid:\"4\",blockname:\"5\",imagesrc:\"#f5dbe2\"},{blockid:\"5\",blockname:\"6\",imagesrc:\"#eeb6c9\"},{blockid:\"6\",blockname:\"7\",imagesrc:\"#c49abf\"},{blockid:\"7\",blockname:\"8\",imagesrc:\"#bada55\"},{blockid:\"8\",blockname:\"9\",imagesrc:\"#ffd700\"},{blockid:\"9\",blockname:\"10\",imagesrc:\"#f47b79\"},{blockid:\"a\",blockname:\"11\",imagesrc:\"#c6e2d4\"},{blockid:\"b\",blockname:\"12\",imagesrc:\"#b6d3c2\"},{blockid:\"c\",blockname:\"13\",imagesrc:\"#e0b1cb\"},{blockid:\"d\",blockname:\"14\",imagesrc:\"#d0a7b7\"},{blockid:\"e\",blockname:\"15\",imagesrc:\"#f3d1d3\"},{blockid:\"f\",blockname:\"16\",imagesrc:\"#e9b8c8\"}];function p(e,t,a,n,o){var s=a-e,i=n-t,r=1;i<0&&(r=-1,i=-i);for(var c=2*i-s,l=t,u=e;u<a+1;u++)o(u,l),c>0?(l+=r,c+=2*(i-s)):c+=2*i}function g(e,t,a,n,o){var s=a-e,i=n-t,r=1;s<0&&(r=-1,s=-s);for(var c=2*s-i,l=e,u=t;u<n+1;u++)o(l,u),c>0?(l+=r,c+=2*(s-i)):c+=2*s}var v=function(){function e(t,a){Object(u.a)(this,e),this.x=t,this.y=a}return Object(h.a)(e,[{key:\"transform\",value:function(e,t){this.x+=e,this.y+=t}},{key:\"setTo\",value:function(e,t){this.x=e,this.y=t}},{key:\"isEqualTo\",value:function(e){return this.x===e.x&&this.y===e.y}},{key:\"notEqualTo\",value:function(e){return this.x!==e.x||this.y!==e.y}},{key:\"positive\",value:function(){return this.x>=0&&this.y>=0}},{key:\"multipliedby\",value:function(t){return new e(this.x*t,this.y*t)}},{key:\"transformedby\",value:function(t,a){return new e(this.x+t,this.y+a)}}]),e}(),b=function(){function e(){Object(u.a)(this,e),this.data=null,this.dataview=null,this.numchunks=null}return Object(h.a)(e,[{key:\"getValues\",value:function(e,t,a){var n=16*a,o=new v(0,0),s=new v(0,0);s.x=0===t.x?0:Math.floor(-1*t.x/n),s.y=0===t.y?0:Math.floor(-1*t.y/n);var i=e.getBoundingClientRect(),r=i.width,c=i.height;return o.x=Math.ceil(r/n)+1,o.y=Math.ceil(c/n)+1,{startpoint:s,numchunks:o}}},{key:\"setMatrix\",value:function(e,t,a){for(var n=[],o=this,s=0;s<e.x;s++)for(var i=0;i<e.y;i++){var r={x:t.x+s,y:t.y+i};n.push(r)}return new Promise(function(t,s){fetch(\"/getchunks\",{method:\"POST\",headers:{Accept:\"application/octet-stream\",\"Content-Type\":\"application/json\"},body:JSON.stringify({coords:n,lines:a})}).then(function(e){return e.arrayBuffer()}).then(function(a){o.data=a,o.dataview=new Uint32Array(o.data),o.numchunks=e,t()})})}},{key:\"getChunkPosOffset\",value:function(e,t){var a=Math.floor(e.x/16)-t.x,n=e.x-16*(a+t.x),o=Math.floor(e.y/16)-t.y;return{i:a,j:o,k:n,l:e.y-16*(o+t.y)}}},{key:\"addCell\",value:function(e,t){this.dataview[e]=t}},{key:\"getDataIndex\",value:function(e,t,a,n){return e*this.numchunks.y*256+256*t+16*a+n}}]),e}(),y=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(r.a)(this,Object(c.a)(t).call(this,e))).state={tool_mode:f,debug_mode:!1,show_stats:!0,color_selected:1672153,update:{time:0,tot_time:0,num_updates:1},draw:{time:0,tot_time:0,num_updates:1},cursorx:0,cursory:0,offsetx:0,offsety:0,chunkx:0,chunky:0,cxstart:0,cystart:0,cxend:0,cyend:0},a.getColorSelected=function(){return a.state.color_selected},a.getDebugMode=function(){return a.state.debug_mode},a.getToolMode=function(){return a.state.tool_mode},a.changeToolMode=function(e){a.setState({tool_mode:e})},a.changeColor=function(e){if(\"string\"===typeof e){var t=parseInt(e.substring(1),16);console.log(e.substring(1)),console.log(t),a.setState({color_selected:t})}else\"number\"===typeof e&&a.setState({color_selected:e});a.changeToolMode(d)},a.isSelected=function(e){return\"string\"===typeof e?parseInt(e.substring(1),16)===a.state.color_selected:\"number\"===typeof e?e===a.state.color_selected:void 0},a.changeUpdateTime=function(e){a.setState({update:{time:e,tot_time:a.state.update.tot_time+e,num_updates:a.state.update.num_updates+1}})},a.changeDrawTime=function(e){a.setState({draw:{time:e,tot_time:a.state.draw.tot_time+e,num_updates:a.state.draw.num_updates+1}})},a.changeCursorLoc=function(e){a.setState({cursorx:e.x,cursory:e.y})},a.changeOffsetLoc=function(e){a.setState({offsetx:e.x,offsety:e.y})},a.changeChunkLoc=function(e,t){a.setState({chunkx:e,chunky:t})},a}return Object(l.a)(t,e),Object(h.a)(t,[{key:\"componentDidMount\",value:function(){document.body.style.overflow=\"hidden\"}},{key:\"fileDownload\",value:function(){var e,t={x1:this.state.cxstart,y1:this.state.cystart,x2:this.state.cxend,y2:this.state.cyend};t.x1!==t.x2&&t.y1!==t.y2&&fetch(\"/getimage\",{method:\"POST\",headers:{Accept:\"application/octet-stream\",\"Content-Type\":\"application/json\"},body:JSON.stringify(t)}).then(function(t){return e=t.headers.get(\"Content-Disposition\").split(\"filename=\")[1],t.blob()}).then(function(t){var a=window.URL.createObjectURL(t),n=document.createElement(\"a\");n.href=a,n.setAttribute(\"download\",e),document.body.appendChild(n),n.click(),n.parentNode.removeChild(n)})}},{key:\"render\",value:function(){var e=this;return o.a.createElement(\"div\",{className:\"App-wrapper\"},o.a.createElement(k,{toolmode:this.state.tool_mode,getToolMode:this.getToolMode,changeToolMode:this.changeToolMode,getDebugMode:this.getDebugMode,changeUpdateTime:this.changeUpdateTime,changeDrawTime:this.changeDrawTime,getColorSelected:this.getColorSelected,changeCursorLoc:this.changeCursorLoc,changeOffsetLoc:this.changeOffsetLoc,changeChunkLoc:this.changeChunkLoc,changeColor:this.changeColor}),o.a.createElement(w,{isSelected:this.isSelected,changeColor:this.changeColor}),o.a.createElement(\"div\",{className:\"drawer primary\"},this.state.show_stats?o.a.createElement(\"div\",{style:{position:\"absolute\",right:\"0.8vw\"}},\"(\",this.state.update.time,\"ms, avg: \",Math.round(this.state.update.tot_time/this.state.update.num_updates),\"ms, \",this.state.update.num_updates,\" updates)\",o.a.createElement(\"br\",null),\"(\",this.state.draw.time,\"ms, avg: \",Math.round(this.state.draw.tot_time/this.state.draw.num_updates),\"ms, \",this.state.draw.num_updates,\" draws)\",o.a.createElement(\"br\",null),\"Cursor: (\",this.state.cursorx,\",\",this.state.cursory,\")\",o.a.createElement(\"br\",null),\"Offset: (\",this.state.offsetx,\",\",this.state.offsety,\")\",o.a.createElement(\"br\",null),\"Chunk: (\",this.state.chunkx,\",\",this.state.chunky,\")\"):null,o.a.createElement(\"div\",{className:\"toolbutton\"+(this.getToolMode()===d?\"selected\":\"\")+\" blockbutton\"+(this.getToolMode()===d?\"selected\":\"\"),onClick:function(){e.changeToolMode(d)}},\"draw\"),o.a.createElement(\"div\",{className:\"toolbutton\"+(1===this.getToolMode()?\"selected\":\"\")+\" blockbutton\"+(1===this.getToolMode()?\"selected\":\"\"),onClick:function(){e.changeToolMode(1)}},\"eyedrop\"),o.a.createElement(\"div\",{className:\"toolbutton\"+(this.getToolMode()===f?\"selected\":\"\")+\" blockbutton\"+(this.getToolMode()===f?\"selected\":\"\"),onClick:function(){e.changeToolMode(f)}},\"move\"),o.a.createElement(\"input\",{checked:this.state.debug_mode,type:\"checkbox\",onChange:function(){e.setState({debug_mode:!e.state.debug_mode})}}),\" Debug Mode\\u2002\",o.a.createElement(\"input\",{checked:this.state.show_stats,type:\"checkbox\",onChange:function(){e.setState({show_stats:!e.state.show_stats})}}),\" Stats\",o.a.createElement(\"div\",{className:\"download-wrapper\"},o.a.createElement(\"input\",{defaultValue:\"0\",type:\"number\",style:{width:\"35px\"},onChange:function(t){return e.setState({cxstart:parseInt(t.target.value)})}}),o.a.createElement(\"input\",{defaultValue:\"0\",type:\"number\",style:{width:\"35px\"},onChange:function(t){return e.setState({cystart:parseInt(t.target.value)})}}),o.a.createElement(\"input\",{defaultValue:\"0\",type:\"number\",style:{width:\"35px\"},onChange:function(t){return e.setState({cxend:parseInt(t.target.value)})}}),o.a.createElement(\"input\",{defaultValue:\"0\",type:\"number\",style:{width:\"35px\"},onChange:function(t){return e.setState({cyend:parseInt(t.target.value)})}}),o.a.createElement(\"div\",{className:\"download-button\",onClick:function(){return e.fileDownload()}},\"downolads\"))))}}]),t}(o.a.Component),k=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(r.a)(this,Object(c.a)(t).call(this,e))).drawLines=[],a.lastdraw=0,a.scale=16,a.tempscale=a.scale,a.cellpos={i:0,j:0,k:0,l:0},a.map_grid=null,a.canvasRef=Object(n.createRef)(),a.mapoffset=new v(0,0),a.celloffset=new v(0,0),a.currentcell=new v(0,0),a.startpoint=new v(0,0),a.cursorcurrent=new v(0,0),a.lmousedown=!1,a.rmousedown=!1,a.canvas=null,a}return Object(l.a)(t,e),Object(h.a)(t,[{key:\"componentDidMount\",value:function(){this.canvas=this.canvasRef.current,this.map_grid=new b,setTimeout(this.updateCanvas(),1e3)}},{key:\"getCursorPosition\",value:function(e,t){var a=t.getBoundingClientRect(),n=e.clientX-a.left,o=e.clientY-a.top;return new v(n,o)}},{key:\"getCurrentCell\",value:function(){var e=Math.floor((this.cursorcurrent.x-this.mapoffset.x*this.scale)/this.scale),t=Math.floor((this.cursorcurrent.y-this.mapoffset.y*this.scale)/this.scale);return new v(e,t)}},{key:\"moveMap\",value:function(e,t){var a=(t.x-e.x)/this.scale,n=(t.y-e.y)/this.scale;this.mapoffset.transform(a,n),this.celloffset.setTo(Math.floor(this.mapoffset.x),Math.floor(this.mapoffset.y)),this.props.changeOffsetLoc(this.celloffset)}},{key:\"drawMap\",value:function(e,t){var a=this,n=Date.now();this.lastdraw=n,this.resizeCanvas(e);var o,s,i,r=e.getBoundingClientRect(),c=r.width,l=r.height,u=e.getContext(\"2d\");u.clearRect(0,0,c,l),u.fillStyle=\"#ffffff\",u.fillRect(0,0,c,l);var h=Math.floor(this.mapoffset.x*this.scale),f=Math.floor(this.mapoffset.y*this.scale),m=function(e,n,o,r){s=(16*(e+t.x)+o)*a.scale+h,i=(16*(n+t.y)+r)*a.scale+f,s%1===0&&i%1===0&&a.scale%1===0||console.log(\"ALERT:\",s,i,a.scale),u.fillRect(s,i,a.scale,a.scale)};if(null!==this.map_grid.data){var p=0;this.props.getDebugMode()&&u.beginPath();for(var g=0;g<this.map_grid.numchunks.x;g++)for(var v=0;v<this.map_grid.numchunks.y;v++){this.props.getDebugMode()&&(s=16*(g+t.x)*this.scale+h,i=16*(v+t.y)*this.scale+f,u.fillStyle=\"#000000\",u.lineWidth=.01*Math.floor(this.scale),u.moveTo(s,0),u.lineTo(s,l),u.moveTo(0,i),u.lineTo(c,i));for(var b=0;b<256;b++){var y=Math.floor(b/16),k=b-16*y;16777215!==(o=this.map_grid.dataview[p+b])&&(u.fillStyle=\"#\"+(16777215&o).toString(16).padStart(6,\"0\"),m(g,v,y,k))}p+=256}this.props.getDebugMode()&&u.stroke(),this.props.toolmode===d&&(u.fillStyle=\"#\"+(16777215&this.props.getColorSelected()).toString(16).padStart(6,\"0\")+\"ff\",m(this.cellpos.i,this.cellpos.j,this.cellpos.k,this.cellpos.l)),this.props.changeDrawTime(Date.now()-n)}}},{key:\"updateCanvas\",value:function(){var e=this,t=Date.now(),a=this.map_grid.getValues(this.canvas,this.mapoffset.multipliedby(this.scale),this.scale),n=a.startpoint,o=a.numchunks,s=this.drawLines;this.drawLines=[],this.map_grid.setMatrix(o,n,s).then(function(){e.drawMap(e.canvas,n),e.startpoint=n,e.props.changeUpdateTime(Date.now()-t)}),setTimeout(function(){e.updateCanvas()},1e3)}},{key:\"resizeCanvas\",value:function(e){var t=e.getBoundingClientRect(),a=t.width,n=t.height;if(e.width!==a||e.height!==n){var o=window.devicePixelRatio,s=void 0===o?1:o,i=e.getContext(\"2d\");return e.width=1*a*s,e.height=1*n*s,i.scale(s,s),!0}return!1}},{key:\"drawCellAtMouse\",value:function(e,t){var a=new v(e-this.celloffset.x,t-this.celloffset.y),n=this.map_grid.getChunkPosOffset(a,this.startpoint),o=n.i,s=n.j,i=n.k,r=n.l,c=this.map_grid.getDataIndex(o,s,i,r);c<this.map_grid.data.byteLength/4&&this.map_grid.addCell(c,this.props.getColorSelected())}},{key:\"moveCursor\",value:function(e){var t=!1,a=this.getCursorPosition(e,this.canvas);this.rmousedown&&(this.moveMap(this.cursorcurrent,a),t=!0),this.cursorcurrent=a;var n=this.getCurrentCell();return this.currentcell.isEqualTo(n)||(this.lmousedown&&this.drawLine(this.currentcell,n),this.currentcell=n,this.cellpos=this.map_grid.getChunkPosOffset(this.currentcell,this.startpoint),this.props.changeCursorLoc(this.currentcell),this.props.changeChunkLoc(this.cellpos.i+this.startpoint.x,this.cellpos.j+this.startpoint.y),t=!0),t}},{key:\"drawLine\",value:function(e,t){var a=this;!function(e,t,a,n){var o=e.x+a.x,s=e.y+a.y,i=t.x+a.x,r=t.y+a.y;o===i&&s===r&&n(o,s),Math.abs(r-s)<Math.abs(i-o)?o>i?p(i,r,o,s,n):p(o,s,i,r,n):s>r?g(i,r,o,s,n):g(o,s,i,r,n)}(e,t,this.celloffset,function(e,t){return a.drawCellAtMouse(e,t)}),this.drawLines.push({p1:e,p2:t,offset:this.celloffset,blockid:this.props.getColorSelected()})}},{key:\"render\",value:function(){var e=this;return o.a.createElement(\"canvas\",{ref:this.canvasRef,className:\"map-canvas primary\",style:{cursor:function(){switch(e.props.toolmode){case 1:return\"crosshair\";case f:return\"move\";default:return\"default\"}}()},onContextMenu:function(e){e.preventDefault()},onMouseDown:function(t){if(t.preventDefault(),0===t.button)switch(e.props.toolmode){case 1:console.log(\"eyedroptool used\");var a=e.map_grid.getChunkPosOffset(e.currentcell,e.startpoint),n=a.i,o=a.j,s=a.k,i=a.l,r=e.map_grid.getDataIndex(n,o,s,i);e.props.changeColor(e.map_grid.dataview[r]);break;case f:e.rmousedown=!0;break;default:e.lmousedown=!0,e.drawLine(e.currentcell,e.currentcell),e.drawMap(e.canvas,e.startpoint)}else 2===t.button&&(e.rmousedown=!0)},onMouseUp:function(t){e.lmousedown=!1,e.rmousedown=!1,e.drawMap(e.canvas,e.startpoint)},onMouseMove:function(t){e.moveCursor(t)&&e.drawMap(e.canvas,e.startpoint)},onMouseLeave:function(t){e.moveCursor(t),e.lmousedown=!1,e.rmousedown=!1,e.drawMap(e.canvas,e.startpoint)},onWheel:function(t){var a=e.tempscale-Math.floor(t.deltaY)/1e3;e.tempscale=a>3?a:3;var n=e.scale;e.scale=Math.floor(e.tempscale),n!==e.scale&&e.drawMap(e.canvas,e.startpoint)}})}}]),t}(o.a.Component),w=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(r.a)(this,Object(c.a)(t).call(this,e))).handleChange=function(e){a.props.changeColor(e.target.value)},a}return Object(l.a)(t,e),Object(h.a)(t,[{key:\"render\",value:function(){var e=this;return o.a.createElement(\"div\",{className:\"palette primary\"},m.map(function(t){return o.a.createElement(\"div\",{key:t.blockid,style:{backgroundColor:\"\".concat(t.imagesrc)},className:\"blockbutton\"+(e.props.isSelected(t.imagesrc)?\"selected\":\"\"),onClick:function(){e.props.changeColor(t.imagesrc)}})}),o.a.createElement(\"input\",{type:\"color\",onChange:this.handleChange}))}}]),t}(o.a.Component);var C=function(){return o.a.createElement(y,null)},x=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,20)).then(function(t){var a=t.getCLS,n=t.getFID,o=t.getFCP,s=t.getLCP,i=t.getTTFB;a(e),n(e),o(e),s(e),i(e)})};i.a.createRoot(document.getElementById(\"root\")).render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(C,null))),x()},8:function(e,t,a){e.exports=a(19)}},[[8,1,2]]]);","extractedComments":[]}
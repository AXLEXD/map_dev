{"map":"{\"version\":3,\"sources\":[\"/Users/alex/Programming/web_development/map_dev_server/client/src/App.js\",\"/Users/alex/Programming/web_development/map_dev_server/client/src/reportWebVitals.js\",\"/Users/alex/Programming/web_development/map_dev_server/client/src/index.js\"],\"names\":[\"_regeneratorRuntime\",\"exports\",\"Op\",\"Object\",\"prototype\",\"hasOwn\",\"hasOwnProperty\",\"defineProperty\",\"obj\",\"key\",\"desc\",\"value\",\"$Symbol\",\"Symbol\",\"iteratorSymbol\",\"iterator\",\"asyncIteratorSymbol\",\"asyncIterator\",\"toStringTagSymbol\",\"toStringTag\",\"define\",\"enumerable\",\"configurable\",\"writable\",\"err\",\"wrap\",\"innerFn\",\"outerFn\",\"self\",\"tryLocsList\",\"protoGenerator\",\"Generator\",\"generator\",\"create\",\"context\",\"Context\",\"makeInvokeMethod\",\"tryCatch\",\"fn\",\"arg\",\"type\",\"call\",\"ContinueSentinel\",\"GeneratorFunction\",\"GeneratorFunctionPrototype\",\"IteratorPrototype\",\"this\",\"getProto\",\"getPrototypeOf\",\"NativeIteratorPrototype\",\"values\",\"Gp\",\"defineIteratorMethods\",\"forEach\",\"method\",\"_invoke\",\"AsyncIterator\",\"PromiseImpl\",\"previousPromise\",\"callInvokeWithMethodAndArg\",\"resolve\",\"reject\",\"invoke\",\"record\",\"result\",\"__await\",\"then\",\"unwrapped\",\"error\",\"state\",\"Error\",\"doneResult\",\"delegate\",\"delegateResult\",\"maybeInvokeDelegate\",\"sent\",\"_sent\",\"dispatchException\",\"abrupt\",\"done\",\"methodName\",\"undefined\",\"return\",\"TypeError\",\"info\",\"resultName\",\"next\",\"nextLoc\",\"pushTryEntry\",\"locs\",\"entry\",\"tryLoc\",\"catchLoc\",\"finallyLoc\",\"afterLoc\",\"tryEntries\",\"push\",\"resetTryEntry\",\"completion\",\"reset\",\"iterable\",\"iteratorMethod\",\"isNaN\",\"length\",\"i\",\"displayName\",\"isGeneratorFunction\",\"genFun\",\"ctor\",\"constructor\",\"name\",\"mark\",\"setPrototypeOf\",\"__proto__\",\"awrap\",\"async\",\"Promise\",\"iter\",\"keys\",\"val\",\"object\",\"reverse\",\"pop\",\"skipTempReset\",\"prev\",\"charAt\",\"slice\",\"stop\",\"rootRecord\",\"rval\",\"exception\",\"handle\",\"loc\",\"caught\",\"hasCatch\",\"hasFinally\",\"finallyEntry\",\"complete\",\"finish\",\"catch\",\"thrown\",\"delegateYield\",\"DRAWTOOL\",\"MOVETOOL\",\"colors\",\"plotLineLow\",\"x0\",\"y0\",\"x1\",\"y1\",\"drawFunc\",\"dx\",\"dy\",\"yi\",\"D\",\"y\",\"x\",\"plotLineHigh\",\"xi\",\"plotLine\",\"p1\",\"p2\",\"offset\",\"Math\",\"abs\",\"colorTo32Uint\",\"colorstring\",\"parseInt\",\"substring\",\"colorToString\",\"colornum\",\"toString\",\"padStart\",\"Vector2D\",\"_classCallCheck\",\"_createClass\",\"othervector\",\"number\",\"Map\",\"data\",\"dataview\",\"numchunks\",\"cellsize\",\"canvas\",\"scale\",\"chunkpixels\",\"startpoint\",\"floor\",\"_canvas$getBoundingCl\",\"getBoundingClientRect\",\"width\",\"height\",\"ceil\",\"_setMatrix\",\"_asyncToGenerator\",\"_callee\",\"dimn\",\"start\",\"lines\",\"coords\",\"map_grid\",\"j\",\"coordsobj\",\"_context\",\"fetch\",\"headers\",\"Accept\",\"Content-Type\",\"body\",\"JSON\",\"stringify\",\"arrayBuffer\",\"chunkbuffer\",\"Date\",\"now\",\"ArrayBuffer\",\"byteLength\",\"Uint32Array\",\"Uint32data\",\"k\",\"l\",\"bmp_index\",\"color\",\"getDataIndex\",\"finalcolor\",\"a\",\"b\",\"relative_index\",\"_x\",\"_x2\",\"_x3\",\"_x4\",\"apply\",\"arguments\",\"currentcell\",\"index\",\"colorhex\",\"AppWrapper\",\"_React$Component\",\"props\",\"_this\",\"_possibleConstructorReturn\",\"_getPrototypeOf\",\"tool_mode\",\"debug_mode\",\"show_stats\",\"color_selected\",\"update\",\"time\",\"tot_time\",\"num_updates\",\"draw\",\"cursorx\",\"cursory\",\"offsetx\",\"offsety\",\"chunkx\",\"chunky\",\"cxstart\",\"cystart\",\"cxend\",\"cyend\",\"getColorSelected\",\"getDebugMode\",\"getToolMode\",\"changeToolMode\",\"change_to\",\"setState\",\"changeColor\",\"out_num\",\"isSelected\",\"changeUpdateTime\",\"new_time\",\"changeDrawTime\",\"changeCursorLoc\",\"vector\",\"changeOffsetLoc\",\"changeChunkLoc\",\"_inherits\",\"document\",\"style\",\"overflow\",\"filename\",\"x2\",\"y2\",\"response\",\"get\",\"split\",\"blob\",\"pngblob\",\"url\",\"window\",\"URL\",\"createObjectURL\",\"link\",\"createElement\",\"href\",\"setAttribute\",\"appendChild\",\"click\",\"parentNode\",\"removeChild\",\"_this2\",\"React\",\"className\",\"MapCanvas\",\"toolmode\",\"Palette\",\"position\",\"right\",\"round\",\"onClick\",\"checked\",\"onChange\",\"defaultValue\",\"e\",\"target\",\"mapDownload\",\"src\",\"alt\",\"Component\",\"_React$Component2\",\"_this3\",\"drawLines\",\"lastdraw\",\"tempscale\",\"cellpos\",\"canvasRef\",\"createRef\",\"mapoffset\",\"celloffset\",\"cursorcurrent\",\"lmousedown\",\"rmousedown\",\"mousepos\",\"replacecanvas\",\"is_updating\",\"drawcache\",\"_this4\",\"current\",\"resizeCanvas\",\"addEventListener\",\"setTimeout\",\"updateCanvas\",\"event\",\"rect\",\"clientX\",\"left\",\"clientY\",\"top\",\"pos\",\"end\",\"transform\",\"setTo\",\"isupdate\",\"_this5\",\"doFill\",\"mapoffset_x\",\"mapoffset_y\",\"ctx\",\"fillRect\",\"imageData\",\"ImageData\",\"Uint8ClampedArray\",\"getContext\",\"rctx\",\"clearRect\",\"putImageData\",\"_canvas$getBoundingCl2\",\"fillStyle\",\"offset_x\",\"offset_y\",\"drawImage\",\"line\",\"console\",\"log\",\"currentpos\",\"_this5$map_grid$getCh\",\"getChunkPosOffset\",\"_this6\",\"tempupdatescale\",\"_this$map_grid$getVal\",\"getValues\",\"multipliedby\",\"linestosend\",\"setMatrix\",\"canvasscale\",\"drawMap\",\"_canvas$getBoundingCl3\",\"_window$devicePixelRa\",\"devicePixelRatio\",\"ratio\",\"scalex\",\"scaley\",\"_this$map_grid$getChu\",\"dataindex\",\"addCell\",\"newcursorcurrent\",\"getCursorPosition\",\"moveMap\",\"newcurrentcell\",\"getCurrentCell\",\"isEqualTo\",\"drawLine\",\"_this7\",\"pixels\",\"blockid\",\"thisdraw\",\"_this8\",\"ref\",\"cursor\",\"getCursor\",\"onContextMenu\",\"preventDefault\",\"onMouseDown\",\"button\",\"_this8$map_grid$getCh\",\"onMouseUp\",\"onMouseMove\",\"moveCursor\",\"onMouseLeave\",\"onWheel\",\"newscale\",\"deltaY\",\"oldtempscale\",\"scalenum\",\"_React$Component3\",\"_this9\",\"handleChange\",\"_this10\",\"map\",\"backgroundColor\",\"concat\",\"App\",\"reportWebVitals\",\"onPerfEntry\",\"Function\",\"__webpack_require__\",\"bind\",\"_ref\",\"getCLS\",\"getFID\",\"getFCP\",\"getLCP\",\"getTTFB\",\"ReactDOM\",\"createRoot\",\"getElementById\",\"render\",\"StrictMode\"],\"mappings\":\"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\",\"sourcesContent\":[\"import './App.css';\\nimport React, { createRef } from 'react';\\n\\n\\nconst UPDATEPERIOD = 1000;\\n\\nconst CHUNKSIZE = 16;\\n\\nconst LOWESTSCALE = 3;\\n\\nconst DRAWTOOL = 0;\\nconst EYEDROPTOOL = 1;\\nconst MOVETOOL = 2;\\n  \\n// const blocks = [\\n//     {\\n//         blockid: '0',\\n//         blockname: '1',\\n//         imagesrc: '#ffffff'\\n//     },\\n//     {\\n//         blockid: '1',\\n//         blockname: '2',\\n//         imagesrc: '#d1e7dc'\\n//     },\\n//     {\\n//         blockid: '2',\\n//         blockname: '3',\\n//         imagesrc: '#c4d4e1'\\n//     },\\n//     {\\n//         blockid: '3',\\n//         blockname: '4',\\n//         imagesrc: '#bcb5d3'\\n//     },\\n//     {\\n//         blockid: '4',\\n//         blockname: '5',\\n//         imagesrc: '#f5dbe2'\\n//     },\\n//     {\\n//         blockid: '5',\\n//         blockname: '6',\\n//         imagesrc: '#eeb6c9'\\n//     },\\n//     {\\n//         blockid: '6',\\n//         blockname: '7',\\n//         imagesrc: '#c49abf'\\n//     },\\n//     {\\n//         blockid: '7',\\n//         blockname: '8',\\n//         imagesrc: '#bada55'\\n//     },\\n//     {\\n//         blockid: '8',\\n//         blockname: '9',\\n//         imagesrc: '#ffd700'\\n//     },\\n//     {\\n//         blockid: '9',\\n//         blockname: '10',\\n//         imagesrc: '#f47b79'\\n//     },\\n//     {\\n//         blockid: 'a',\\n//         blockname: '11',\\n//         imagesrc: '#c6e2d4'\\n//     },\\n//     {\\n//         blockid: 'b',\\n//         blockname: '12',\\n//         imagesrc: '#b6d3c2'\\n//     },\\n//     {\\n//         blockid: 'c',\\n//         blockname: '13',\\n//         imagesrc: '#e0b1cb'\\n//     },\\n//     {\\n//         blockid: 'd',\\n//         blockname: '14',\\n//         imagesrc: '#d0a7b7'\\n//     },\\n//     {\\n//         blockid: 'e',\\n//         blockname: '15',\\n//         imagesrc: '#f3d1d3'\\n//     },\\n//     {\\n//         blockid: 'f',\\n//         blockname: '16',\\n//         imagesrc: '#e9b8c8'\\n//     }\\n// ];\\n\\nconst colors = [\\n    \\\"#000000\\\", // Black\\n    \\\"#FFFFFF\\\", // White\\n    \\\"#FF0000\\\", // Red\\n    \\\"#00FF00\\\", // Green\\n    \\\"#0000FF\\\", // Blue\\n    \\\"#FFFF00\\\", // Yellow\\n    \\\"#FF00FF\\\", // Magenta\\n    \\\"#00FFFF\\\", // Cyan\\n    \\\"#800000\\\", // Maroon\\n    \\\"#008000\\\", // Olive\\n    \\\"#000080\\\", // Navy\\n    \\\"#808000\\\", // Olive Drab\\n    \\\"#800080\\\", // Purple\\n    \\\"#008080\\\", // Teal\\n    \\\"#808080\\\", // Gray\\n    \\\"#C0C0C0\\\", // Silver\\n    \\\"#FFC0CB\\\", // Pink\\n    \\\"#FFA07A\\\", // Light Salmon\\n    \\\"#FF7F50\\\", // Coral\\n    \\\"#FF6347\\\", // Tomato\\n    \\\"#FF4500\\\", // Orange Red\\n    \\\"#FF8C00\\\", // Dark Orange\\n    \\\"#FFD700\\\", // Gold\\n    \\\"#FFFFE0\\\", // Light Yellow\\n    \\\"#EEE8AA\\\", // Pale Goldenrod\\n    \\\"#ADFF2F\\\", // Green Yellow\\n    \\\"#32CD32\\\", // Lime Green\\n    \\\"#00FA9A\\\", // Medium Spring Green\\n    \\\"#00CED1\\\", // Dark Turquoise\\n    \\\"#6A5ACD\\\", // Slate Blue\\n    \\\"#7B68EE\\\", // Medium Slate Blue\\n    \\\"#FF69B4\\\", // Hot Pink\\n    \\\"#8B4513\\\" // Saddle Brown\\n  ];\\n  \\n\\n\\nfunction plotLineLow(x0, y0, x1, y1, drawFunc) {\\n    let dx = x1 - x0;\\n    let dy = y1 - y0;\\n    let yi = 1;\\n    if (dy < 0) {\\n        yi = -1;\\n        dy = -dy;\\n    }\\n    let D = (2 * dy) - dx;\\n    let y = y0;\\n\\n    for (let x = x0;x<x1+1;x++) {\\n        drawFunc(x, y);\\n        if (D > 0) {\\n            y = y + yi;\\n            D = D + (2 * (dy - dx));\\n        } else {\\n            D = D + 2*dy;\\n        }\\n    }\\n}\\nfunction plotLineHigh(x0, y0, x1, y1, drawFunc) {\\n    let dx = x1 - x0;\\n    let dy = y1 - y0;\\n    let xi = 1;\\n    if (dx < 0) {\\n        xi = -1;\\n        dx = -dx;\\n    }\\n    let D = (2 * dx) - dy;\\n    let x = x0;\\n\\n    for (let y = y0;y<y1+1;y++) {\\n        drawFunc(x, y);\\n        if (D > 0) {\\n            x = x + xi;\\n            D = D + (2 * (dx - dy));\\n        } else {\\n            D = D + 2*dx;\\n        }\\n    }\\n}\\n\\nfunction plotLine(p1, p2, offset, drawFunc) {\\n    \\n    let x0 = p1.x+offset.x;\\n    let y0 = p1.y+offset.y;\\n    \\n    let x1 = p2.x+offset.x;\\n    let y1 = p2.y+offset.y;\\n\\n    if (x0===x1 && y0===y1) drawFunc(x0,y0);\\n\\n\\n    if (Math.abs(y1 - y0) < Math.abs(x1 - x0)) {\\n        if (x0 > x1) plotLineLow(x1, y1, x0, y0, drawFunc);\\n        else plotLineLow(x0, y0, x1, y1, drawFunc);\\n    }\\n    else {\\n        if (y0 > y1) plotLineHigh(x1, y1, x0, y0, drawFunc);\\n        else plotLineHigh(x0, y0, x1, y1, drawFunc);\\n    }\\n}\\n\\n\\nfunction colorTo32Uint(colorstring) {\\n    return parseInt(colorstring.substring(1), 16);\\n}\\nfunction colorToString(colornum) {\\n    return \\\"#\\\" + (colornum & 0x00FFFFFF).toString(16).padStart(6, '0');\\n}\\n\\nclass Vector2D {\\n    constructor(x,y) {\\n        this.x = x;\\n        this.y = y;\\n    }\\n\\n    transform(x,y) {\\n        this.x += x;\\n        this.y += y;\\n    }\\n\\n    setTo(x,y) {\\n        this.x = x;\\n        this.y = y;\\n    }\\n\\n    isEqualTo(othervector) {\\n        return (this.x===othervector.x && this.y===othervector.y);\\n    }\\n    notEqualTo(othervector) {\\n        return (this.x!==othervector.x || this.y!==othervector.y);\\n    }\\n\\n    positive() {\\n        return (this.x >= 0 && this.y >=0);\\n    }\\n\\n    multipliedby(number) {\\n        return new Vector2D(this.x*number,this.y*number);\\n    }\\n    transformedby(x,y) {\\n        return new Vector2D(this.x+x,this.y+y);\\n    }\\n}\\n\\n\\nclass Map {\\n    constructor() {\\n        // this.canvasdimensions = new Vector2D(w,h); // establishing at start means no resizing canvas element\\n        this.data = null;\\n        this.dataview = null;\\n        this.numchunks = null;\\n        this.cellsize = 2;\\n    }\\n\\n    getValues(canvas, offset, scale) {\\n        let chunkpixels = CHUNKSIZE*scale;\\n\\n        let numchunks = new Vector2D(0,0);\\n        let startpoint = new Vector2D(0,0);\\n\\n        startpoint.x = (offset.x === 0) ? 0 : Math.floor((-1*offset.x)/chunkpixels);\\n        startpoint.y = (offset.y === 0) ? 0 : Math.floor((-1*offset.y)/chunkpixels);\\n\\n        const { width, height } = canvas.getBoundingClientRect();\\n\\n        numchunks.x = Math.ceil(width/chunkpixels)+1; // bit cheaty - should probs optimise\\n        numchunks.y = Math.ceil(height/chunkpixels)+1;\\n\\n        return {startpoint, numchunks};\\n    }\\n\\n    async setMatrix(dimn, start, lines, cellsize) {\\n\\n        let coords = [];\\n        let map_grid = this;\\n\\n        for (let i=0;i<dimn.x;i++) {\\n            for (let j=0;j<dimn.y;j++) {\\n                let coordsobj = { x: start.x+i, y: start.y+j };\\n                coords.push(coordsobj);    \\n            }\\n        }\\n        return new Promise(function(resolve, reject) {\\n            fetch('/getchunks',{\\n                method: 'POST',\\n                headers: {'Accept': 'application/octet-stream', 'Content-Type': 'application/json'},\\n                body: JSON.stringify({coords:coords, lines:lines})\\n            }).then((data)=>{\\n                return data.arrayBuffer();\\n            }).then((chunkbuffer) => {\\n                \\n                map_grid.numchunks = dimn;\\n                let current = Date.now();\\n\\n                // const cellsize = 10;\\n                map_grid.data = new ArrayBuffer(chunkbuffer.byteLength*cellsize*cellsize);\\n                map_grid.dataview = new Uint32Array(map_grid.data);\\n\\n                let Uint32data = new Uint32Array(chunkbuffer);\\n                \\n                for (let i=0;i<map_grid.numchunks.x;i++) {\\n                    for (let j=0;j<map_grid.numchunks.y;j++) {\\n                        for (let k=0;k<CHUNKSIZE;k++) {\\n                            for (let l=0;l<CHUNKSIZE;l++) {\\n                                let bmp_index = i*CHUNKSIZE*cellsize + j*map_grid.numchunks.x*(CHUNKSIZE*CHUNKSIZE)*cellsize*cellsize + k*cellsize + l*map_grid.numchunks.x*CHUNKSIZE*cellsize*cellsize;\\n                                let alex_index = map_grid.getDataIndex(i,j,k,l);\\n                                let color = Uint32data[alex_index];\\n                                let finalcolor = ((color << 16)&0x00FF0000) | ((color)&0xFF00FF00) | ((color>>16)&0x000000FF);\\n\\n                                for (let a=0;a<cellsize;a++) {\\n                                    for (let b=0;b<cellsize;b++) {\\n                                        let relative_index = bmp_index + a + b*map_grid.numchunks.x*CHUNKSIZE*cellsize;\\n                                        map_grid.dataview[relative_index] = finalcolor;\\n                                    }\\n                                }\\n                            }\\n                        }\\n                    }\\n                }\\n                map_grid.cellsize = cellsize;\\n                // console.log(Date.now()-current);\\n                resolve();\\n            });\\n        });\\n    }\\n\\n    getChunkPosOffset(currentcell, startpoint) {\\n        const i = Math.floor((currentcell.x/CHUNKSIZE))-startpoint.x;\\n        const k = currentcell.x - (i+startpoint.x)*CHUNKSIZE;\\n\\n        const j = Math.floor((currentcell.y/CHUNKSIZE))-startpoint.y;\\n        const l = currentcell.y - (j+startpoint.y)*CHUNKSIZE;\\n\\n\\n        return {i, j, k, l};\\n    }\\n\\n    addCell(index,colorhex) {\\n        this.dataview[index] = colorhex;\\n        // console.log(data[index], colorhex);\\n    }\\n    getDataIndex(i,j,k,l) {\\n        return i*(this.numchunks.y)*(CHUNKSIZE*CHUNKSIZE)+j*(CHUNKSIZE*CHUNKSIZE)+k*CHUNKSIZE+l;\\n    }\\n}\\n\\n\\nclass AppWrapper extends React.Component {\\n    constructor(props) {\\n        super(props);\\n        this.state = {\\n            tool_mode: MOVETOOL,\\n            debug_mode: false,\\n            show_stats: true,\\n            color_selected: 1672153, \\n            update: {\\n                time: 0,\\n                tot_time: 0,\\n                num_updates: 1\\n            },\\n            draw: {\\n                time: 0,\\n                tot_time: 0,\\n                num_updates: 1\\n            },\\n            cursorx: 0,\\n            cursory: 0,\\n            offsetx: 0,\\n            offsety: 0,\\n            chunkx: 0,\\n            chunky: 0,\\n\\n            cxstart:0,\\n            cystart:0,\\n            cxend:0,\\n            cyend:0\\n        };\\n\\n        this.getColorSelected = () => {return this.state.color_selected};\\n        this.getDebugMode = () => {return this.state.debug_mode};\\n        this.getToolMode = () => {return this.state.tool_mode};\\n\\n        this.changeToolMode = (change_to) => {\\n            this.setState({tool_mode: change_to});\\n        }\\n\\n        this.changeColor = (color) => {\\n            if (typeof color === 'string') {\\n                let out_num = colorTo32Uint(color);\\n                this.setState({color_selected: out_num});\\n            }\\n            else if (typeof color === 'number') {\\n                this.setState({color_selected: color});\\n            }\\n            this.changeToolMode(DRAWTOOL);\\n        };\\n        this.isSelected = (color) => {\\n            if (typeof color === 'string') {\\n                let out_num = colorTo32Uint(color);\\n                return (out_num===this.state.color_selected);\\n            }\\n            else if (typeof color === 'number') {\\n                return (color===this.state.color_selected);\\n            }\\n        };\\n\\n        this.changeUpdateTime = (new_time) => {\\n            this.setState({update:{\\n                time: new_time, \\n                tot_time: this.state.update.tot_time+new_time, \\n                num_updates: this.state.update.num_updates+1\\n            }});\\n        }\\n        this.changeDrawTime = (new_time) => {\\n            this.setState({draw:{\\n                time: new_time, \\n                tot_time: this.state.draw.tot_time+new_time, \\n                num_updates: this.state.draw.num_updates+1\\n            }});\\n        }\\n        this.changeCursorLoc = (vector) => {\\n            this.setState({cursorx: vector.x,cursory: vector.y});\\n        }\\n        this.changeOffsetLoc = (vector) => {\\n            this.setState({offsetx: vector.x,offsety: vector.y});\\n        }\\n        this.changeChunkLoc = (x,y) => {\\n            this.setState({chunkx: x,chunky: y});\\n        }\\n    }\\n\\n    componentDidMount() {\\n        document.body.style.overflow = \\\"hidden\\\"; // stops user from scrolling the page\\n    }\\n\\n    mapDownload() {\\n        let filename;\\n        let coordsobj = {x1:this.state.cxstart,y1:this.state.cystart,x2:this.state.cxend,y2:this.state.cyend};\\n        if (coordsobj.x1===coordsobj.x2 || coordsobj.y1===coordsobj.y2 || coordsobj.x1>coordsobj.x2 || coordsobj.y1>coordsobj.y2) return;\\n\\n        fetch('/getimage',{\\n            method: 'POST',\\n            headers: {'Accept': 'application/octet-stream', 'Content-Type': 'application/json'},\\n            body: JSON.stringify(coordsobj)\\n        }).then((response) => {\\n            filename = response.headers.get('Content-Disposition').split('\\\"')[1];\\n            return response.blob()\\n        })\\n        .then((pngblob) => {\\n            const url = window.URL.createObjectURL(pngblob);\\n            const link = document.createElement('a');\\n            link.href = url;\\n            link.setAttribute('download',filename);\\n            document.body.appendChild(link);\\n            link.click();\\n            link.parentNode.removeChild(link);\\n        });\\n    }\\n\\n    render() {\\n        return (\\n            <div className='App-wrapper'>\\n                <MapCanvas \\n                    toolmode={this.state.tool_mode}\\n                    getToolMode={this.getToolMode}\\n                    changeToolMode={this.changeToolMode}\\n                    getDebugMode={this.getDebugMode}\\n                    changeUpdateTime={this.changeUpdateTime}\\n                    changeDrawTime={this.changeDrawTime}\\n                    getColorSelected={this.getColorSelected}\\n                    changeCursorLoc={this.changeCursorLoc}\\n                    changeOffsetLoc={this.changeOffsetLoc}\\n                    changeChunkLoc={this.changeChunkLoc}\\n                    changeColor={this.changeColor}\\n                />\\n                <Palette isSelected={this.isSelected} changeColor={this.changeColor} color={this.state.color_selected}/>\\n                <div className='drawer primary'>\\n                    {(this.state.show_stats)?(<div style={{position: `absolute`,right:`0.8vw`}}>\\n                        ({this.state.update.time}ms, avg: {Math.round(this.state.update.tot_time/this.state.update.num_updates)}ms, {this.state.update.num_updates} updates)\\n                        <br/>({this.state.draw.time}ms, avg: {Math.round(this.state.draw.tot_time/this.state.draw.num_updates)}ms, {this.state.draw.num_updates} draws)\\n                        <br/>Cursor: ({this.state.cursorx},{this.state.cursory})\\n                        <br/>Offset: ({this.state.offsetx},{this.state.offsety})\\n                        <br/>Chunk: ({this.state.chunkx},{this.state.chunky})\\n                    </div>):null}\\n\\n                    <div\\n                        className={`toolbutton` + (this.getToolMode()===DRAWTOOL ? \\\"selected\\\" : \\\"\\\")+ ` blockbutton` + (this.getToolMode()===DRAWTOOL ? \\\"selected\\\" : \\\"\\\")}\\n                        onClick={() => {this.changeToolMode(DRAWTOOL)}}\\n                    >draw</div>\\n                    <div\\n                        className={`toolbutton` + (this.getToolMode()===EYEDROPTOOL ? \\\"selected\\\" : \\\"\\\")+ ` blockbutton` + (this.getToolMode()===EYEDROPTOOL ? \\\"selected\\\" : \\\"\\\")}\\n                        onClick={() => {this.changeToolMode(EYEDROPTOOL)}}\\n                    >eyedrop</div>\\n                    <div\\n                        className={`toolbutton` + (this.getToolMode()===MOVETOOL ? \\\"selected\\\" : \\\"\\\")+ ` blockbutton` + (this.getToolMode()===MOVETOOL ? \\\"selected\\\" : \\\"\\\")}\\n                        onClick={() => {this.changeToolMode(MOVETOOL)}}\\n                    >move</div>\\n                    \\n\\n                    <input checked={this.state.debug_mode} type={\\\"checkbox\\\"} onChange={()=>{this.setState({debug_mode:!this.state.debug_mode})}}></input> Debug Mode&ensp;\\n                    <input checked={this.state.show_stats} type={\\\"checkbox\\\"} onChange={()=>{this.setState({show_stats:!this.state.show_stats})}}></input> Stats\\n                    <table\\n                        className={`download-wrapper`}\\n                        // onClick={() => this.fileDownload()}\\n                    ><tbody>\\n                        <tr>\\n                            <td>\\n                                <p>from:&nbsp;</p><input defaultValue={\\\"0\\\"} type={\\\"number\\\"} style={{width:\\\"35px\\\"}} onChange={(e)=>this.setState({cxstart:parseInt(e.target.value)})}></input>\\n                                <input defaultValue={\\\"0\\\"} type={\\\"number\\\"} style={{width:\\\"35px\\\"}} onChange={(e)=>this.setState({cystart:parseInt(e.target.value)})}></input>\\n                            </td>\\n                        </tr>\\n                        <tr>\\n                            <td>\\n                                <p>to:&nbsp;</p><input defaultValue={\\\"0\\\"} type={\\\"number\\\"} style={{width:\\\"35px\\\"}} onChange={(e)=>this.setState({cxend:parseInt(e.target.value)})}></input>\\n                                <input defaultValue={\\\"0\\\"} type={\\\"number\\\"} style={{width:\\\"35px\\\"}} onChange={(e)=>this.setState({cyend:parseInt(e.target.value)})}></input>\\n                            </td>\\n                        </tr>\\n                        <tr>\\n                            <td>\\n                                <p >Save PNG:</p>\\n                                <div className={`download-button`} onClick={() => this.mapDownload()}><img src='save.png' alt='save'/></div>\\n                            </td>\\n                        </tr>\\n                    </tbody></table>\\n                </div>\\n            </div>\\n        )\\n    }\\n}\\n\\nclass MapCanvas extends React.Component {\\n    constructor(props) {\\n        super(props);\\n\\n        this.drawLines = [];\\n\\n        this.lastdraw = 0;\\n\\n        this.scale = 4;\\n        this.tempscale = this.scale;\\n\\n        this.cellpos = {i:0,j:0,k:0,l:0};\\n\\n        this.map_grid = null;\\n        this.canvasRef = createRef();\\n    \\n        this.mapoffset = new Vector2D(0,0);\\n        this.celloffset = new Vector2D(0,0);\\n        this.currentcell = new Vector2D(0,0);\\n        this.startpoint = new Vector2D(0,0);\\n\\n        this.cursorcurrent = new Vector2D(0,0);\\n        this.lmousedown = false;\\n        this.rmousedown = false;\\n        this.mousepos = new Vector2D(0,0);\\n\\n        this.canvas = null;\\n        this.replacecanvas = null;\\n\\n        this.is_updating = false;\\n        this.drawcache = [];\\n    }\\n\\n\\n    //Called after element's initialisation\\n    componentDidMount() { \\n        this.canvas = this.canvasRef.current;\\n        this.replacecanvas = document.createElement('canvas');\\n        this.map_grid = new Map();\\n        this.resizeCanvas(this.canvas);\\n        window.addEventListener('resize', ()=>this.resizeCanvas(this.canvas));\\n        setTimeout(this.updateCanvas(), UPDATEPERIOD);\\n    }\\n\\n    getCursorPosition(event, canvas) {\\n        const rect = canvas.getBoundingClientRect();\\n        const x = event.clientX - rect.left;\\n        const y = event.clientY - rect.top;\\n        const pos = new Vector2D(x/(this.tempscale/this.scale),y/(this.tempscale/this.scale));\\n        this.mousepos = pos;\\n        return pos;\\n    }\\n\\n    getCurrentCell() {\\n        let x = Math.floor((this.cursorcurrent.x-this.mapoffset.x*this.scale)/(this.scale));\\n        let y = Math.floor((this.cursorcurrent.y-this.mapoffset.y*this.scale)/(this.scale));\\n        const pos = new Vector2D(x,y);\\n        return pos;\\n    }\\n\\n    moveMap(start, end) {\\n        let x = (end.x-start.x)/this.scale;\\n        let y = (end.y-start.y)/this.scale;\\n        this.mapoffset.transform(x,y);\\n        this.celloffset.setTo(Math.floor(this.mapoffset.x),Math.floor(this.mapoffset.y));\\n        this.props.changeOffsetLoc(this.celloffset);\\n    }\\n\\n    drawMap (canvas, startpoint, isupdate) {\\n        let start =  Date.now();\\n        if (this.map_grid.data===null || this.map_grid.numchunks===null) return;\\n        const cellsize = this.map_grid.cellsize;\\n\\n        let x,y;\\n        let doFill = (i,j,k,l) => {\\n\\n            x = (((i+startpoint.x)*CHUNKSIZE+k))*(cellsize)+mapoffset_x;\\n            y = (((j+startpoint.y)*CHUNKSIZE+l))*(cellsize)+mapoffset_y;\\n            ctx.fillRect(x, y, cellsize, cellsize);\\n            // console.log(x,y,cellapparentsize);\\n        }\\n\\n        let length = this.map_grid.numchunks.x*CHUNKSIZE*cellsize;\\n        if ((this.map_grid.data.byteLength*4)%length!==0) return;\\n        let imageData = new ImageData(new Uint8ClampedArray(this.map_grid.data), length);\\n\\n        const ctx = canvas.getContext(\\\"2d\\\");\\n\\n        const rctx = this.replacecanvas.getContext(\\\"2d\\\");\\n        rctx.clearRect(0,0,this.replacecanvas.width, this.replacecanvas.height);\\n        rctx.putImageData(imageData, 0, 0);\\n\\n        const { width, height } = canvas.getBoundingClientRect();\\n        ctx.clearRect(0, 0, width, height);\\n        ctx.fillStyle = \\\"#ffffff\\\";\\n        ctx.fillRect(0, 0, width, height);\\n\\n        let mapoffset_x = Math.floor(this.mapoffset.x*cellsize);\\n        let mapoffset_y = Math.floor(this.mapoffset.y*cellsize);\\n        let offset_x = startpoint.x*CHUNKSIZE*cellsize+mapoffset_x;\\n        let offset_y = startpoint.y*CHUNKSIZE*cellsize+mapoffset_y;\\n\\n        {\\n            ctx.drawImage(this.replacecanvas, offset_x, offset_y)\\n            // ctx.drawImage(this.replacecanvas, offset_x, offset_y);\\n\\n            // console.log(this.drawcache.length);\\n            this.drawLines.forEach((line)=>{\\n                console.log(line);\\n                plotLine(line.p1, line.p2, line.offset, (x,y)=>{\\n                    const currentpos = new Vector2D(x-line.offset.x,y-line.offset.y);\\n                    const {i, j, k, l} = this.map_grid.getChunkPosOffset(currentpos, this.startpoint);\\n                    ctx.fillStyle = colorToString(this.props.getColorSelected());\\n                    doFill(i, j, k, l);\\n                });\\n            });\\n\\n            if (this.props.toolmode===DRAWTOOL) {\\n                // doFill(this.cellpos);\\n                ctx.fillStyle = colorToString(this.props.getColorSelected())+\\\"ff\\\";\\n                doFill(this.cellpos.i, this.cellpos.j, this.cellpos.k, this.cellpos.l);\\n            }\\n        };\\n\\n        this.props.changeDrawTime(Date.now()-start);\\n    }\\n\\n    updateCanvas() {\\n        let start = Date.now(); // time testing\\n\\n        let tempupdatescale = Math.floor(this.tempscale);\\n\\n        let {startpoint, numchunks} = this.map_grid.getValues(this.canvas, this.mapoffset.multipliedby(tempupdatescale), tempupdatescale);\\n        let linestosend = this.drawLines;\\n        this.is_updating = true;\\n        this.map_grid.setMatrix(numchunks, startpoint, linestosend, tempupdatescale)\\n        .then(()=>{\\n            this.drawLines = [];\\n\\n            this.replacecanvas.width = tempupdatescale*numchunks.x*CHUNKSIZE;\\n            this.replacecanvas.height = tempupdatescale*numchunks.y*CHUNKSIZE;    \\n\\n            // this.canvas.getContext('2d').resetTransform();\\n            this.resizeCanvas(this.canvas);\\n            this.canvasscale(this.canvas, this.tempscale/tempupdatescale, this.tempscale/tempupdatescale)\\n            this.scale = Math.floor(this.tempscale);\\n\\n            this.drawMap(this.canvas, startpoint, true);\\n            this.startpoint = startpoint;\\n            this.props.changeUpdateTime(Date.now()-start);\\n            this.is_updating = false;\\n        }).then(()=>{\\n            // this.drawcache.forEach((draw) => {draw()});\\n            this.drawcache = [];\\n            \\n        });\\n\\n        setTimeout(()=>{this.updateCanvas()}, UPDATEPERIOD);\\n    }\\n\\n    // stolen code lmao\\n    resizeCanvas(canvas) {\\n        const { width, height } = canvas.getBoundingClientRect();\\n        \\n        if (canvas.width !== width || canvas.height !== height) {\\n          const { devicePixelRatio:ratio=1 } = window;\\n          const context = canvas.getContext('2d');\\n          canvas.width = (1*width*ratio);\\n          canvas.height = (1*height*ratio);\\n          context.scale(ratio, ratio);\\n        //   canvas.style.width = `${width}px`;\\n        //   canvas.style.height = `${height}px`;\\n          return true;\\n        }\\n    \\n        return false\\n    }\\n\\n    canvasscale(canvas, scalex, scaley) {\\n        // let mousepos = this.mousepos;\\n        const ctx = canvas.getContext('2d');\\n        // const transx = mousepos.x;\\n        // const transy = mousepos.y;\\n        // ctx.translate(transx, transy);\\n        ctx.scale(scalex, scaley);\\n        // ctx.translate(-transx, -transy);\\n    }\\n\\n    drawCellAtMouse(x,y) {\\n        const currentpos = new Vector2D(x-this.celloffset.x,y-this.celloffset.y);\\n\\n        let {i, j, k, l} = this.map_grid.getChunkPosOffset(currentpos, this.startpoint);\\n        let dataindex = this.map_grid.getDataIndex(i,j,k,l);\\n        if (dataindex < this.map_grid.data.byteLength/4) this.map_grid.addCell(dataindex, this.props.getColorSelected());\\n    }\\n\\n    moveCursor(event) {\\n        let update = false;\\n        let newcursorcurrent = this.getCursorPosition(event, this.canvas);\\n        if (this.rmousedown) {\\n            this.moveMap(this.cursorcurrent, newcursorcurrent);\\n            update = true;\\n        }\\n        this.cursorcurrent = newcursorcurrent;\\n        let newcurrentcell = this.getCurrentCell();\\n        // Drawing line and updating stats\\n        if (!this.currentcell.isEqualTo(newcurrentcell)) {\\n            if (this.lmousedown) this.drawLine(this.currentcell,newcurrentcell);\\n            this.currentcell = newcurrentcell;\\n            this.cellpos = this.map_grid.getChunkPosOffset(this.currentcell, this.startpoint);\\n            this.props.changeCursorLoc(this.currentcell);\\n            this.props.changeChunkLoc(this.cellpos.i+this.startpoint.x,this.cellpos.j+this.startpoint.y);\\n            update = true;\\n        }\\n        return update;\\n    }\\n\\n    drawLine(p1,p2) {\\n        // let thisdraw = ()=>{plotLine(p1, p2, this.celloffset, (x,y)=>this.drawCellAtMouse(x,y))};\\n        let thisdraw = ()=>{\\n            let pixels = [];\\n            plotLine(p1, p2, this.celloffset, (x,y)=>{pixels.push({x:x,y:y, blockid:this.props.getColorSelected()})});\\n            return pixels;\\n        };\\n        this.drawcache.push(thisdraw());\\n        // thisdraw();\\n        // if (this.is_updating) {this.drawcache.push(thisdraw)};\\n        this.drawLines.push({p1:p1,p2:p2,offset:this.celloffset,blockid:this.props.getColorSelected()});\\n    }\\n\\n    render() {\\n        let getCursor = ()=>{\\n            switch (this.props.toolmode) {\\n                case EYEDROPTOOL:\\n                    return \\\"crosshair\\\";\\n                case MOVETOOL:\\n                    return \\\"move\\\";\\n                default:\\n                    return \\\"default\\\";\\n            }\\n        }\\n        return (<div>\\n            {/* <canvas ref={this.canvasRef2} style={{visibility:\\\"hidden\\\"}}></canvas> */}\\n            <canvas \\n                ref={this.canvasRef}\\n                className='map-canvas primary'\\n                style={{cursor:getCursor()}}\\n                onContextMenu={(e) => {\\n                    e.preventDefault();\\n                }}\\n                onMouseDown={(e) => {\\n                    e.preventDefault();\\n                    if (e.button === 0) {\\n                        switch (this.props.toolmode) {\\n                            case EYEDROPTOOL:\\n                                console.log(\\\"eyedroptool used\\\");\\n                                let {i,j,k,l} = this.map_grid.getChunkPosOffset(this.currentcell, this.startpoint);\\n                                let dataindex = this.map_grid.getDataIndex(i,j,k,l);\\n                                this.props.changeColor(this.map_grid.dataview[dataindex]);\\n                                // this.props.changeToolMode(DRAWTOOL);\\n                                break;\\n                            case MOVETOOL:\\n                                this.rmousedown=true;\\n                                break;\\n                            default:\\n                                this.lmousedown=true;\\n                                this.drawLine(this.currentcell,this.currentcell);\\n                                this.drawMap(this.canvas, this.startpoint);\\n                                break;\\n                        }\\n                    }\\n                    else if (e.button === 2) {\\n                        this.rmousedown=true;\\n                    }\\n                }}\\n                onMouseUp={(e) => {\\n                    this.lmousedown=false;\\n                    this.rmousedown=false;\\n                    this.drawMap(this.canvas, this.startpoint);\\n                }}\\n                onMouseMove={(e) => {\\n                    if (this.moveCursor(e)) this.drawMap(this.canvas, this.startpoint);\\n                }}\\n                onMouseLeave={(e) => {\\n                    this.moveCursor(e);\\n                    this.lmousedown=false;\\n                    this.rmousedown=false;\\n                    this.drawMap(this.canvas, this.startpoint);\\n                }}\\n                onWheel={(e) => {\\n                    let newscale = this.tempscale - Math.floor(e.deltaY)/1000;\\n                    // console.log(this.scale, this.tempscale);\\n                    let oldtempscale = this.tempscale;\\n                    if (newscale>LOWESTSCALE) this.tempscale = newscale;\\n                    else this.tempscale = LOWESTSCALE;\\n                    let oldscale = this.scale;\\n                    console.log(this.tempscale);\\n                    const scalenum = this.tempscale/oldtempscale;\\n                    this.canvasscale(this.canvas, scalenum, scalenum);\\n                    // this.scale = Math.floor(this.tempscale);\\n                    \\n                    this.drawMap(this.canvas, this.startpoint);\\n                }}\\n            ></canvas></div>\\n        )\\n    }\\n}\\n\\n// needs to be fixed up - maybe add useEffect()\\nclass Palette extends React.Component {\\n    constructor(props) {\\n        super(props);\\n\\n        this.handleChange = (e) => {\\n            this.props.changeColor(e.target.value);\\n        }\\n    }\\n\\n    render() {\\n        return (\\n            <div className='palette primary'>\\n                {\\n                    colors.map((color,index) => (\\n                        <div \\n                            key={index} \\n                            style={{backgroundColor: `${color}`}} \\n                            className={`blockbutton` + (this.props.isSelected(color) ? \\\"selected\\\" : \\\"\\\")}\\n                            onClick={() => {this.props.changeColor(color);}}\\n                            //onClick={() => {console.log(button.blockid)}}\\n                            ></div>\\n                    ))\\n                }\\n                <input value={this.props.color} type={\\\"color\\\"} onChange={this.handleChange} ></input>\\n                {/* <input type={\\\"submit\\\"} value={\\\"Apply\\\"}></input> */}\\n        </div>\\n        )\\n    }\\n\\n}\\n\\n\\n\\n\\nfunction App() {\\n  return (\\n    <AppWrapper/>\\n  );\\n}\\n\\nexport default App;\\n\",\"const reportWebVitals = onPerfEntry => {\\n  if (onPerfEntry && onPerfEntry instanceof Function) {\\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\\n      getCLS(onPerfEntry);\\n      getFID(onPerfEntry);\\n      getFCP(onPerfEntry);\\n      getLCP(onPerfEntry);\\n      getTTFB(onPerfEntry);\\n    });\\n  }\\n};\\n\\nexport default reportWebVitals;\\n\",\"import React from 'react';\\nimport ReactDOM from 'react-dom/client';\\nimport './index.css';\\nimport App from './App';\\nimport reportWebVitals from './reportWebVitals';\\n\\nconst root = ReactDOM.createRoot(document.getElementById('root'));\\nroot.render(\\n  <React.StrictMode>\\n    <App />\\n  </React.StrictMode>\\n);\\n\\n// If you want to start measuring performance in your app, pass a function\\n// to log results (for example: reportWebVitals(console.log))\\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\\nreportWebVitals();\\n\"]}","code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{18:function(t,e,n){},19:function(t,e,n){},20:function(t,e,n){\"use strict\";n.r(e);var r=n(0),a=n.n(r),o=n(7),i=n.n(o),s=(n(18),n(4)),c=n(3),u=n(5),l=n(8),h=n(1),f=n(2);n(19);function d(){d=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,r=Object.defineProperty||function(t,e,n){t[e]=n.value},a=\"function\"==typeof Symbol?Symbol:{},o=a.iterator||\"@@iterator\",i=a.asyncIterator||\"@@asyncIterator\",s=a.toStringTag||\"@@toStringTag\";function c(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},\"\")}catch(O){c=function(t,e,n){return t[e]=n}}function u(t,e,n,a){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),s=new M(a||[]);return r(i,\"_invoke\",{value:C(t,n,s)}),i}function l(t,e,n){try{return{type:\"normal\",arg:t.call(e,n)}}catch(O){return{type:\"throw\",arg:O}}}t.wrap=u;var h={};function f(){}function p(){}function m(){}var v={};c(v,o,function(){return this});var g=Object.getPrototypeOf,y=g&&g(g(F([])));y&&y!==e&&n.call(y,o)&&(v=y);var w=m.prototype=f.prototype=Object.create(v);function x(t){[\"next\",\"throw\",\"return\"].forEach(function(e){c(t,e,function(t){return this._invoke(e,t)})})}function b(t,e){var a;r(this,\"_invoke\",{value:function(r,o){function i(){return new e(function(a,i){!function r(a,o,i,s){var c=l(t[a],t,o);if(\"throw\"!==c.type){var u=c.arg,h=u.value;return h&&\"object\"==typeof h&&n.call(h,\"__await\")?e.resolve(h.__await).then(function(t){r(\"next\",t,i,s)},function(t){r(\"throw\",t,i,s)}):e.resolve(h).then(function(t){u.value=t,i(u)},function(t){return r(\"throw\",t,i,s)})}s(c.arg)}(r,o,a,i)})}return a=a?a.then(i,i):i()}})}function C(t,e,n){var r=\"suspendedStart\";return function(a,o){if(\"executing\"===r)throw new Error(\"Generator is already running\");if(\"completed\"===r){if(\"throw\"===a)throw o;return L()}for(n.method=a,n.arg=o;;){var i=n.delegate;if(i){var s=k(i,n);if(s){if(s===h)continue;return s}}if(\"next\"===n.method)n.sent=n._sent=n.arg;else if(\"throw\"===n.method){if(\"suspendedStart\"===r)throw r=\"completed\",n.arg;n.dispatchException(n.arg)}else\"return\"===n.method&&n.abrupt(\"return\",n.arg);r=\"executing\";var c=l(t,e,n);if(\"normal\"===c.type){if(r=n.done?\"completed\":\"suspendedYield\",c.arg===h)continue;return{value:c.arg,done:n.done}}\"throw\"===c.type&&(r=\"completed\",n.method=\"throw\",n.arg=c.arg)}}}function k(t,e){var n=e.method,r=t.iterator[n];if(void 0===r)return e.delegate=null,\"throw\"===n&&t.iterator.return&&(e.method=\"return\",e.arg=void 0,k(t,e),\"throw\"===e.method)||\"return\"!==n&&(e.method=\"throw\",e.arg=new TypeError(\"The iterator does not provide a '\"+n+\"' method\")),h;var a=l(r,t.iterator,e.arg);if(\"throw\"===a.type)return e.method=\"throw\",e.arg=a.arg,e.delegate=null,h;var o=a.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,\"return\"!==e.method&&(e.method=\"next\",e.arg=void 0),e.delegate=null,h):o:(e.method=\"throw\",e.arg=new TypeError(\"iterator result is not an object\"),e.delegate=null,h)}function E(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function _(t){var e=t.completion||{};e.type=\"normal\",delete e.arg,t.completion=e}function M(t){this.tryEntries=[{tryLoc:\"root\"}],t.forEach(E,this),this.reset(!0)}function F(t){if(t){var e=t[o];if(e)return e.call(t);if(\"function\"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,a=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return a.next=a}}return{next:L}}function L(){return{value:void 0,done:!0}}return p.prototype=m,r(w,\"constructor\",{value:m,configurable:!0}),r(m,\"constructor\",{value:p,configurable:!0}),p.displayName=c(m,s,\"GeneratorFunction\"),t.isGeneratorFunction=function(t){var e=\"function\"==typeof t&&t.constructor;return!!e&&(e===p||\"GeneratorFunction\"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,m):(t.__proto__=m,c(t,s,\"GeneratorFunction\")),t.prototype=Object.create(w),t},t.awrap=function(t){return{__await:t}},x(b.prototype),c(b.prototype,i,function(){return this}),t.AsyncIterator=b,t.async=function(e,n,r,a,o){void 0===o&&(o=Promise);var i=new b(u(e,n,r,a),o);return t.isGeneratorFunction(n)?i:i.next().then(function(t){return t.done?t.value:i.next()})},x(w),c(w,s,\"Generator\"),c(w,o,function(){return this}),c(w,\"toString\",function(){return\"[object Generator]\"}),t.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},t.values=F,M.prototype={constructor:M,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method=\"next\",this.arg=void 0,this.tryEntries.forEach(_),!t)for(var e in this)\"t\"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if(\"throw\"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return i.type=\"throw\",i.arg=t,e.next=n,r&&(e.method=\"next\",e.arg=void 0),!!r}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],i=o.completion;if(\"root\"===o.tryLoc)return r(\"end\");if(o.tryLoc<=this.prev){var s=n.call(o,\"catchLoc\"),c=n.call(o,\"finallyLoc\");if(s&&c){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!c)throw new Error(\"try statement without catch or finally\");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,\"finallyLoc\")&&this.prev<a.finallyLoc){var o=a;break}}o&&(\"break\"===t||\"continue\"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=t,i.arg=e,o?(this.method=\"next\",this.next=o.finallyLoc,h):this.complete(i)},complete:function(t,e){if(\"throw\"===t.type)throw t.arg;return\"break\"===t.type||\"continue\"===t.type?this.next=t.arg:\"return\"===t.type?(this.rval=this.arg=t.arg,this.method=\"return\",this.next=\"end\"):\"normal\"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),_(n),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if(\"throw\"===r.type){var a=r.arg;_(n)}return a}}throw new Error(\"illegal catch attempt\")},delegateYield:function(t,e,n){return this.delegate={iterator:F(t),resultName:e,nextLoc:n},\"next\"===this.method&&(this.arg=void 0),h}},t}var p=0,m=2,v=[\"#000000\",\"#FFFFFF\",\"#FF0000\",\"#00FF00\",\"#0000FF\",\"#FFFF00\",\"#FF00FF\",\"#00FFFF\",\"#800000\",\"#008000\",\"#000080\",\"#808000\",\"#800080\",\"#008080\",\"#808080\",\"#C0C0C0\",\"#FFC0CB\",\"#FFA07A\",\"#FF7F50\",\"#FF6347\",\"#FF4500\",\"#FF8C00\",\"#FFD700\",\"#FFFFE0\",\"#EEE8AA\",\"#ADFF2F\",\"#32CD32\",\"#00FA9A\",\"#00CED1\",\"#6A5ACD\",\"#7B68EE\",\"#FF69B4\",\"#8B4513\"];function g(t,e,n,r,a){var o=n-t,i=r-e,s=1;i<0&&(s=-1,i=-i);for(var c=2*i-o,u=e,l=t;l<n+1;l++)a(l,u),c>0?(u+=s,c+=2*(i-o)):c+=2*i}function y(t,e,n,r,a){var o=n-t,i=r-e,s=1;o<0&&(s=-1,o=-o);for(var c=2*o-i,u=t,l=e;l<r+1;l++)a(u,l),c>0?(u+=s,c+=2*(o-i)):c+=2*o}function w(t,e,n,r){var a=t.x+n.x,o=t.y+n.y,i=e.x+n.x,s=e.y+n.y;a===i&&o===s&&r(a,o),Math.abs(s-o)<Math.abs(i-a)?a>i?g(i,s,a,o,r):g(a,o,i,s,r):o>s?y(i,s,a,o,r):y(a,o,i,s,r)}function x(t){return parseInt(t.substring(1),16)}function b(t){return\"#\"+(16777215&t).toString(16).padStart(6,\"0\")}var C=function(){function t(e,n){Object(h.a)(this,t),this.x=e,this.y=n}return Object(f.a)(t,[{key:\"transform\",value:function(t,e){this.x+=t,this.y+=e}},{key:\"setTo\",value:function(t,e){this.x=t,this.y=e}},{key:\"isEqualTo\",value:function(t){return this.x===t.x&&this.y===t.y}},{key:\"notEqualTo\",value:function(t){return this.x!==t.x||this.y!==t.y}},{key:\"positive\",value:function(){return this.x>=0&&this.y>=0}},{key:\"multipliedby\",value:function(e){return new t(this.x*e,this.y*e)}},{key:\"transformedby\",value:function(e,n){return new t(this.x+e,this.y+n)}}]),t}(),k=function(){function t(){Object(h.a)(this,t),this.data=null,this.dataview=null,this.numchunks=null,this.cellsize=2}return Object(f.a)(t,[{key:\"getValues\",value:function(t,e,n){var r=16*n,a=new C(0,0),o=new C(0,0);o.x=0===e.x?0:Math.floor(-1*e.x/r),o.y=0===e.y?0:Math.floor(-1*e.y/r);var i=t.getBoundingClientRect(),s=i.width,c=i.height;return a.x=Math.ceil(s/r)+1,a.y=Math.ceil(c/r)+1,{startpoint:o,numchunks:a}}},{key:\"setMatrix\",value:function(){var t=Object(l.a)(d().mark(function t(e,n,r,a){var o,i,s,c,u;return d().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:for(o=[],i=this,s=0;s<e.x;s++)for(c=0;c<e.y;c++)u={x:n.x+s,y:n.y+c},o.push(u);return t.abrupt(\"return\",new Promise(function(t,n){fetch(\"/getchunks\",{method:\"POST\",headers:{Accept:\"application/octet-stream\",\"Content-Type\":\"application/json\"},body:JSON.stringify({coords:o,lines:r})}).then(function(t){return t.arrayBuffer()}).then(function(n){i.numchunks=e;Date.now();i.data=new ArrayBuffer(n.byteLength*a*a),i.dataview=new Uint32Array(i.data);for(var r=new Uint32Array(n),o=0;o<i.numchunks.x;o++)for(var s=0;s<i.numchunks.y;s++)for(var c=0;c<16;c++)for(var u=0;u<16;u++)for(var l=16*o*a+s*i.numchunks.x*256*a*a+c*a+u*i.numchunks.x*16*a*a,h=r[i.getDataIndex(o,s,c,u)],f=h<<16&16711680|4278255360&h|h>>16&255,d=0;d<a;d++)for(var p=0;p<a;p++){var m=l+d+p*i.numchunks.x*16*a;i.dataview[m]=f}i.cellsize=a,t()})}));case 4:case\"end\":return t.stop()}},t,this)}));return function(e,n,r,a){return t.apply(this,arguments)}}()},{key:\"getChunkPosOffset\",value:function(t,e){var n=Math.floor(t.x/16)-e.x,r=t.x-16*(n+e.x),a=Math.floor(t.y/16)-e.y;return{i:n,j:a,k:r,l:t.y-16*(a+e.y)}}},{key:\"addCell\",value:function(t,e){this.dataview[t]=e}},{key:\"getDataIndex\",value:function(t,e,n,r){return t*this.numchunks.y*256+256*e+16*n+r}}]),t}(),E=function(t){function e(t){var n;return Object(h.a)(this,e),(n=Object(s.a)(this,Object(c.a)(e).call(this,t))).state={tool_mode:m,debug_mode:!1,show_stats:!0,color_selected:1672153,update:{time:0,tot_time:0,num_updates:1},draw:{time:0,tot_time:0,num_updates:1},cursorx:0,cursory:0,offsetx:0,offsety:0,chunkx:0,chunky:0,cxstart:0,cystart:0,cxend:0,cyend:0},n.getColorSelected=function(){return n.state.color_selected},n.getDebugMode=function(){return n.state.debug_mode},n.getToolMode=function(){return n.state.tool_mode},n.changeToolMode=function(t){n.setState({tool_mode:t})},n.changeColor=function(t){if(\"string\"===typeof t){var e=x(t);n.setState({color_selected:e})}else\"number\"===typeof t&&n.setState({color_selected:t});n.changeToolMode(p)},n.isSelected=function(t){return\"string\"===typeof t?x(t)===n.state.color_selected:\"number\"===typeof t?t===n.state.color_selected:void 0},n.changeUpdateTime=function(t){n.setState({update:{time:t,tot_time:n.state.update.tot_time+t,num_updates:n.state.update.num_updates+1}})},n.changeDrawTime=function(t){n.setState({draw:{time:t,tot_time:n.state.draw.tot_time+t,num_updates:n.state.draw.num_updates+1}})},n.changeCursorLoc=function(t){n.setState({cursorx:t.x,cursory:t.y})},n.changeOffsetLoc=function(t){n.setState({offsetx:t.x,offsety:t.y})},n.changeChunkLoc=function(t,e){n.setState({chunkx:t,chunky:e})},n}return Object(u.a)(e,t),Object(f.a)(e,[{key:\"componentDidMount\",value:function(){document.body.style.overflow=\"hidden\"}},{key:\"mapDownload\",value:function(){var t,e={x1:this.state.cxstart,y1:this.state.cystart,x2:this.state.cxend,y2:this.state.cyend};e.x1===e.x2||e.y1===e.y2||e.x1>e.x2||e.y1>e.y2||fetch(\"/getimage\",{method:\"POST\",headers:{Accept:\"application/octet-stream\",\"Content-Type\":\"application/json\"},body:JSON.stringify(e)}).then(function(e){return t=e.headers.get(\"Content-Disposition\").split('\"')[1],e.blob()}).then(function(e){var n=window.URL.createObjectURL(e),r=document.createElement(\"a\");r.href=n,r.setAttribute(\"download\",t),document.body.appendChild(r),r.click(),r.parentNode.removeChild(r)})}},{key:\"render\",value:function(){var t=this;return a.a.createElement(\"div\",{className:\"App-wrapper\"},a.a.createElement(_,{toolmode:this.state.tool_mode,getToolMode:this.getToolMode,changeToolMode:this.changeToolMode,getDebugMode:this.getDebugMode,changeUpdateTime:this.changeUpdateTime,changeDrawTime:this.changeDrawTime,getColorSelected:this.getColorSelected,changeCursorLoc:this.changeCursorLoc,changeOffsetLoc:this.changeOffsetLoc,changeChunkLoc:this.changeChunkLoc,changeColor:this.changeColor}),a.a.createElement(M,{isSelected:this.isSelected,changeColor:this.changeColor,color:this.state.color_selected}),a.a.createElement(\"div\",{className:\"drawer primary\"},this.state.show_stats?a.a.createElement(\"div\",{style:{position:\"absolute\",right:\"0.8vw\"}},\"(\",this.state.update.time,\"ms, avg: \",Math.round(this.state.update.tot_time/this.state.update.num_updates),\"ms, \",this.state.update.num_updates,\" updates)\",a.a.createElement(\"br\",null),\"(\",this.state.draw.time,\"ms, avg: \",Math.round(this.state.draw.tot_time/this.state.draw.num_updates),\"ms, \",this.state.draw.num_updates,\" draws)\",a.a.createElement(\"br\",null),\"Cursor: (\",this.state.cursorx,\",\",this.state.cursory,\")\",a.a.createElement(\"br\",null),\"Offset: (\",this.state.offsetx,\",\",this.state.offsety,\")\",a.a.createElement(\"br\",null),\"Chunk: (\",this.state.chunkx,\",\",this.state.chunky,\")\"):null,a.a.createElement(\"div\",{className:\"toolbutton\"+(this.getToolMode()===p?\"selected\":\"\")+\" blockbutton\"+(this.getToolMode()===p?\"selected\":\"\"),onClick:function(){t.changeToolMode(p)}},\"draw\"),a.a.createElement(\"div\",{className:\"toolbutton\"+(1===this.getToolMode()?\"selected\":\"\")+\" blockbutton\"+(1===this.getToolMode()?\"selected\":\"\"),onClick:function(){t.changeToolMode(1)}},\"eyedrop\"),a.a.createElement(\"div\",{className:\"toolbutton\"+(this.getToolMode()===m?\"selected\":\"\")+\" blockbutton\"+(this.getToolMode()===m?\"selected\":\"\"),onClick:function(){t.changeToolMode(m)}},\"move\"),a.a.createElement(\"input\",{checked:this.state.debug_mode,type:\"checkbox\",onChange:function(){t.setState({debug_mode:!t.state.debug_mode})}}),\" Debug Mode\\u2002\",a.a.createElement(\"input\",{checked:this.state.show_stats,type:\"checkbox\",onChange:function(){t.setState({show_stats:!t.state.show_stats})}}),\" Stats\",a.a.createElement(\"table\",{className:\"download-wrapper\"},a.a.createElement(\"tbody\",null,a.a.createElement(\"tr\",null,a.a.createElement(\"td\",null,a.a.createElement(\"p\",null,\"from:\\xa0\"),a.a.createElement(\"input\",{defaultValue:\"0\",type:\"number\",style:{width:\"35px\"},onChange:function(e){return t.setState({cxstart:parseInt(e.target.value)})}}),a.a.createElement(\"input\",{defaultValue:\"0\",type:\"number\",style:{width:\"35px\"},onChange:function(e){return t.setState({cystart:parseInt(e.target.value)})}}))),a.a.createElement(\"tr\",null,a.a.createElement(\"td\",null,a.a.createElement(\"p\",null,\"to:\\xa0\"),a.a.createElement(\"input\",{defaultValue:\"0\",type:\"number\",style:{width:\"35px\"},onChange:function(e){return t.setState({cxend:parseInt(e.target.value)})}}),a.a.createElement(\"input\",{defaultValue:\"0\",type:\"number\",style:{width:\"35px\"},onChange:function(e){return t.setState({cyend:parseInt(e.target.value)})}}))),a.a.createElement(\"tr\",null,a.a.createElement(\"td\",null,a.a.createElement(\"p\",null,\"Save PNG:\"),a.a.createElement(\"div\",{className:\"download-button\",onClick:function(){return t.mapDownload()}},a.a.createElement(\"img\",{src:\"save.png\",alt:\"save\"}))))))))}}]),e}(a.a.Component),_=function(t){function e(t){var n;return Object(h.a)(this,e),(n=Object(s.a)(this,Object(c.a)(e).call(this,t))).drawLines=[],n.lastdraw=0,n.scale=4,n.tempscale=n.scale,n.cellpos={i:0,j:0,k:0,l:0},n.map_grid=null,n.canvasRef=Object(r.createRef)(),n.mapoffset=new C(0,0),n.celloffset=new C(0,0),n.currentcell=new C(0,0),n.startpoint=new C(0,0),n.cursorcurrent=new C(0,0),n.lmousedown=!1,n.rmousedown=!1,n.mousepos=new C(0,0),n.canvas=null,n.replacecanvas=null,n.is_updating=!1,n.drawcache=[],n}return Object(u.a)(e,t),Object(f.a)(e,[{key:\"componentDidMount\",value:function(){var t=this;this.canvas=this.canvasRef.current,this.replacecanvas=document.createElement(\"canvas\"),this.map_grid=new k,this.resizeCanvas(this.canvas),window.addEventListener(\"resize\",function(){return t.resizeCanvas(t.canvas)}),setTimeout(this.updateCanvas(),1e3)}},{key:\"getCursorPosition\",value:function(t,e){var n=e.getBoundingClientRect(),r=t.clientX-n.left,a=t.clientY-n.top,o=new C(r/(this.tempscale/this.scale),a/(this.tempscale/this.scale));return this.mousepos=o,o}},{key:\"getCurrentCell\",value:function(){var t=Math.floor((this.cursorcurrent.x-this.mapoffset.x*this.scale)/this.scale),e=Math.floor((this.cursorcurrent.y-this.mapoffset.y*this.scale)/this.scale);return new C(t,e)}},{key:\"moveMap\",value:function(t,e){var n=(e.x-t.x)/this.scale,r=(e.y-t.y)/this.scale;this.mapoffset.transform(n,r),this.celloffset.setTo(Math.floor(this.mapoffset.x),Math.floor(this.mapoffset.y)),this.props.changeOffsetLoc(this.celloffset)}},{key:\"drawMap\",value:function(t,e,n){var r=this,a=Date.now();if(null!==this.map_grid.data&&null!==this.map_grid.numchunks){var o,i,s=this.map_grid.cellsize,c=function(t,n,r,a){o=(16*(t+e.x)+r)*s+g,i=(16*(n+e.y)+a)*s+y,h.fillRect(o,i,s,s)},u=16*this.map_grid.numchunks.x*s;if(4*this.map_grid.data.byteLength%u===0){var l=new ImageData(new Uint8ClampedArray(this.map_grid.data),u),h=t.getContext(\"2d\"),f=this.replacecanvas.getContext(\"2d\");f.clearRect(0,0,this.replacecanvas.width,this.replacecanvas.height),f.putImageData(l,0,0);var d=t.getBoundingClientRect(),m=d.width,v=d.height;h.clearRect(0,0,m,v),h.fillStyle=\"#ffffff\",h.fillRect(0,0,m,v);var g=Math.floor(this.mapoffset.x*s),y=Math.floor(this.mapoffset.y*s),x=16*e.x*s+g,k=16*e.y*s+y;h.drawImage(this.replacecanvas,x,k),this.drawLines.forEach(function(t){console.log(t),w(t.p1,t.p2,t.offset,function(e,n){var a=new C(e-t.offset.x,n-t.offset.y),o=r.map_grid.getChunkPosOffset(a,r.startpoint),i=o.i,s=o.j,u=o.k,l=o.l;h.fillStyle=b(r.props.getColorSelected()),c(i,s,u,l)})}),this.props.toolmode===p&&(h.fillStyle=b(this.props.getColorSelected())+\"ff\",c(this.cellpos.i,this.cellpos.j,this.cellpos.k,this.cellpos.l)),this.props.changeDrawTime(Date.now()-a)}}}},{key:\"updateCanvas\",value:function(){var t=this,e=Date.now(),n=Math.floor(this.tempscale),r=this.map_grid.getValues(this.canvas,this.mapoffset.multipliedby(n),n),a=r.startpoint,o=r.numchunks,i=this.drawLines;this.is_updating=!0,this.map_grid.setMatrix(o,a,i,n).then(function(){t.drawLines=[],t.replacecanvas.width=n*o.x*16,t.replacecanvas.height=n*o.y*16,t.resizeCanvas(t.canvas),t.canvasscale(t.canvas,t.tempscale/n,t.tempscale/n),t.scale=Math.floor(t.tempscale),t.drawMap(t.canvas,a,!0),t.startpoint=a,t.props.changeUpdateTime(Date.now()-e),t.is_updating=!1}).then(function(){t.drawcache=[]}),setTimeout(function(){t.updateCanvas()},1e3)}},{key:\"resizeCanvas\",value:function(t){var e=t.getBoundingClientRect(),n=e.width,r=e.height;if(t.width!==n||t.height!==r){var a=window.devicePixelRatio,o=void 0===a?1:a,i=t.getContext(\"2d\");return t.width=1*n*o,t.height=1*r*o,i.scale(o,o),!0}return!1}},{key:\"canvasscale\",value:function(t,e,n){t.getContext(\"2d\").scale(e,n)}},{key:\"drawCellAtMouse\",value:function(t,e){var n=new C(t-this.celloffset.x,e-this.celloffset.y),r=this.map_grid.getChunkPosOffset(n,this.startpoint),a=r.i,o=r.j,i=r.k,s=r.l,c=this.map_grid.getDataIndex(a,o,i,s);c<this.map_grid.data.byteLength/4&&this.map_grid.addCell(c,this.props.getColorSelected())}},{key:\"moveCursor\",value:function(t){var e=!1,n=this.getCursorPosition(t,this.canvas);this.rmousedown&&(this.moveMap(this.cursorcurrent,n),e=!0),this.cursorcurrent=n;var r=this.getCurrentCell();return this.currentcell.isEqualTo(r)||(this.lmousedown&&this.drawLine(this.currentcell,r),this.currentcell=r,this.cellpos=this.map_grid.getChunkPosOffset(this.currentcell,this.startpoint),this.props.changeCursorLoc(this.currentcell),this.props.changeChunkLoc(this.cellpos.i+this.startpoint.x,this.cellpos.j+this.startpoint.y),e=!0),e}},{key:\"drawLine\",value:function(t,e){var n=this;this.drawcache.push(function(){var r=[];return w(t,e,n.celloffset,function(t,e){r.push({x:t,y:e,blockid:n.props.getColorSelected()})}),r}()),this.drawLines.push({p1:t,p2:e,offset:this.celloffset,blockid:this.props.getColorSelected()})}},{key:\"render\",value:function(){var t=this;return a.a.createElement(\"div\",null,a.a.createElement(\"canvas\",{ref:this.canvasRef,className:\"map-canvas primary\",style:{cursor:function(){switch(t.props.toolmode){case 1:return\"crosshair\";case m:return\"move\";default:return\"default\"}}()},onContextMenu:function(t){t.preventDefault()},onMouseDown:function(e){if(e.preventDefault(),0===e.button)switch(t.props.toolmode){case 1:console.log(\"eyedroptool used\");var n=t.map_grid.getChunkPosOffset(t.currentcell,t.startpoint),r=n.i,a=n.j,o=n.k,i=n.l,s=t.map_grid.getDataIndex(r,a,o,i);t.props.changeColor(t.map_grid.dataview[s]);break;case m:t.rmousedown=!0;break;default:t.lmousedown=!0,t.drawLine(t.currentcell,t.currentcell),t.drawMap(t.canvas,t.startpoint)}else 2===e.button&&(t.rmousedown=!0)},onMouseUp:function(e){t.lmousedown=!1,t.rmousedown=!1,t.drawMap(t.canvas,t.startpoint)},onMouseMove:function(e){t.moveCursor(e)&&t.drawMap(t.canvas,t.startpoint)},onMouseLeave:function(e){t.moveCursor(e),t.lmousedown=!1,t.rmousedown=!1,t.drawMap(t.canvas,t.startpoint)},onWheel:function(e){var n=t.tempscale-Math.floor(e.deltaY)/1e3,r=t.tempscale;t.tempscale=n>3?n:3;t.scale;console.log(t.tempscale);var a=t.tempscale/r;t.canvasscale(t.canvas,a,a),t.drawMap(t.canvas,t.startpoint)}}))}}]),e}(a.a.Component),M=function(t){function e(t){var n;return Object(h.a)(this,e),(n=Object(s.a)(this,Object(c.a)(e).call(this,t))).handleChange=function(t){n.props.changeColor(t.target.value)},n}return Object(u.a)(e,t),Object(f.a)(e,[{key:\"render\",value:function(){var t=this;return a.a.createElement(\"div\",{className:\"palette primary\"},v.map(function(e,n){return a.a.createElement(\"div\",{key:n,style:{backgroundColor:\"\".concat(e)},className:\"blockbutton\"+(t.props.isSelected(e)?\"selected\":\"\"),onClick:function(){t.props.changeColor(e)}})}),a.a.createElement(\"input\",{value:this.props.color,type:\"color\",onChange:this.handleChange}))}}]),e}(a.a.Component);var F=function(){return a.a.createElement(E,null)},L=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,21)).then(function(e){var n=e.getCLS,r=e.getFID,a=e.getFCP,o=e.getLCP,i=e.getTTFB;n(t),r(t),a(t),o(t),i(t)})};i.a.createRoot(document.getElementById(\"root\")).render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(F,null))),L()},9:function(t,e,n){t.exports=n(20)}},[[9,1,2]]]);","extractedComments":[]}
{"map":"{\"version\":3,\"sources\":[\"/Users/alex/Programming/web_development/map_dev_server/client/src/App.js\",\"/Users/alex/Programming/web_development/map_dev_server/client/src/reportWebVitals.js\",\"/Users/alex/Programming/web_development/map_dev_server/client/src/index.js\"],\"names\":[\"EYEDROPTOOL\",\"blocks\",\"blockid\",\"blockname\",\"imagesrc\",\"plotLineLow\",\"x0\",\"y0\",\"x1\",\"y1\",\"drawFunc\",\"dx\",\"dy\",\"yi\",\"D\",\"y\",\"x\",\"plotLineHigh\",\"xi\",\"Vector2D\",\"_classCallCheck\",\"this\",\"_createClass\",\"key\",\"value\",\"othervector\",\"number\",\"Map\",\"data\",\"dataview\",\"numchunks\",\"canvas\",\"offset\",\"scale\",\"chunkpixels\",\"startpoint\",\"Math\",\"floor\",\"_canvas$getBoundingCl\",\"getBoundingClientRect\",\"width\",\"height\",\"ceil\",\"dimn\",\"start\",\"lines\",\"coords\",\"map_grid\",\"i\",\"j\",\"coordsobj\",\"push\",\"Promise\",\"resolve\",\"reject\",\"fetch\",\"method\",\"headers\",\"Accept\",\"Content-Type\",\"body\",\"JSON\",\"stringify\",\"then\",\"arrayBuffer\",\"chunkbuffer\",\"Uint32Array\",\"currentcell\",\"k\",\"l\",\"index\",\"colorhex\",\"AppWrapper\",\"_React$Component\",\"props\",\"_this\",\"_possibleConstructorReturn\",\"_getPrototypeOf\",\"call\",\"state\",\"tool_mode\",\"debug_mode\",\"show_stats\",\"color_selected\",\"update\",\"time\",\"tot_time\",\"num_updates\",\"draw\",\"cursorx\",\"cursory\",\"offsetx\",\"offsety\",\"chunkx\",\"chunky\",\"getColorSelected\",\"getDebugMode\",\"getToolMode\",\"changeToolMode\",\"change_to\",\"console\",\"log\",\"setState\",\"changeColor\",\"out_num\",\"parseInt\",\"substring\",\"isSelected\",\"changeUpdateTime\",\"new_time\",\"changeDrawTime\",\"changeCursorLoc\",\"vector\",\"changeOffsetLoc\",\"changeChunkLoc\",\"_inherits\",\"document\",\"style\",\"overflow\",\"_this2\",\"React\",\"createElement\",\"className\",\"MapCanvas\",\"toolmode\",\"Palette\",\"position\",\"right\",\"round\",\"backgroundColor\",\"onClick\",\"type\",\"onChange\",\"checked\",\"Component\",\"_React$Component2\",\"_this3\",\"drawLines\",\"tempscale\",\"cellpos\",\"canvasRef\",\"createRef\",\"mapoffset\",\"celloffset\",\"cursorcurrent\",\"lmousedown\",\"rmousedown\",\"current\",\"setTimeout\",\"updateCanvas\",\"event\",\"rect\",\"clientX\",\"left\",\"clientY\",\"top\",\"end\",\"transform\",\"setTo\",\"_this4\",\"Date\",\"now\",\"resizeCanvas\",\"_canvas$getBoundingCl2\",\"ctx\",\"getContext\",\"clearRect\",\"fillStyle\",\"fillRect\",\"mapoffset_x\",\"mapoffset_y\",\"doFill\",\"chunkbufferoffset\",\"beginPath\",\"lineWidth\",\"moveTo\",\"lineTo\",\"c\",\"CHUNKSIZE\",\"toString\",\"padStart\",\"stroke\",\"_this5\",\"_this$map_grid$getVal\",\"getValues\",\"multipliedby\",\"linestosend\",\"setMatrix\",\"drawMap\",\"_canvas$getBoundingCl3\",\"_window$devicePixelRa\",\"window\",\"devicePixelRatio\",\"ratio\",\"context\",\"currentpos\",\"_this$map_grid$getChu\",\"getChunkPosOffset\",\"dataindex\",\"getDataIndex\",\"byteLength\",\"addCell\",\"newcursorcurrent\",\"getCursorPosition\",\"moveMap\",\"newcurrentcell\",\"getCurrentCell\",\"isEqualTo\",\"drawLine\",\"p1\",\"p2\",\"_this6\",\"abs\",\"plotLine\",\"drawCellAtMouse\",\"_this7\",\"ref\",\"cursor\",\"concat\",\"onContextMenu\",\"e\",\"preventDefault\",\"onMouseDown\",\"button\",\"_this7$map_grid$getCh\",\"onMouseUp\",\"onMouseMove\",\"moveCursor\",\"onMouseLeave\",\"onWheel\",\"newscale\",\"deltaY\",\"_React$Component3\",\"_this8\",\"handleChange\",\"target\",\"_this9\",\"map\",\"App\",\"reportWebVitals\",\"onPerfEntry\",\"Function\",\"__webpack_require__\",\"bind\",\"_ref\",\"getCLS\",\"getFID\",\"getFCP\",\"getLCP\",\"getTTFB\",\"ReactDOM\",\"createRoot\",\"getElementById\",\"render\",\"StrictMode\"],\"mappings\":\"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\",\"sourcesContent\":[\"import './App.css';\\nimport React, { createRef } from 'react';\\n\\n\\nconst CHUNKSIZE = 16;\\n\\nconst DRAWTOOL = 0;\\nconst EYEDROPTOOL = 1;\\n  \\nconst blocks = [\\n    {\\n        blockid: '0',\\n        blockname: '1',\\n        imagesrc: '#ffffff'\\n    },\\n    {\\n        blockid: '1',\\n        blockname: '2',\\n        imagesrc: '#d1e7dc'\\n    },\\n    {\\n        blockid: '2',\\n        blockname: '3',\\n        imagesrc: '#c4d4e1'\\n    },\\n    {\\n        blockid: '3',\\n        blockname: '4',\\n        imagesrc: '#bcb5d3'\\n    },\\n    {\\n        blockid: '4',\\n        blockname: '5',\\n        imagesrc: '#f5dbe2'\\n    },\\n    {\\n        blockid: '5',\\n        blockname: '6',\\n        imagesrc: '#eeb6c9'\\n    },\\n    {\\n        blockid: '6',\\n        blockname: '7',\\n        imagesrc: '#c49abf'\\n    },\\n    {\\n        blockid: '7',\\n        blockname: '8',\\n        imagesrc: '#bada55'\\n    },\\n    {\\n        blockid: '8',\\n        blockname: '9',\\n        imagesrc: '#ffd700'\\n    },\\n    {\\n        blockid: '9',\\n        blockname: '10',\\n        imagesrc: '#f47b79'\\n    },\\n    {\\n        blockid: 'a',\\n        blockname: '11',\\n        imagesrc: '#c6e2d4'\\n    },\\n    {\\n        blockid: 'b',\\n        blockname: '12',\\n        imagesrc: '#b6d3c2'\\n    },\\n    {\\n        blockid: 'c',\\n        blockname: '13',\\n        imagesrc: '#e0b1cb'\\n    },\\n    {\\n        blockid: 'd',\\n        blockname: '14',\\n        imagesrc: '#d0a7b7'\\n    },\\n    {\\n        blockid: 'e',\\n        blockname: '15',\\n        imagesrc: '#f3d1d3'\\n    },\\n    {\\n        blockid: 'f',\\n        blockname: '16',\\n        imagesrc: '#e9b8c8'\\n    }\\n];\\n\\n  \\n\\nfunction plotLineLow(x0, y0, x1, y1, drawFunc) {\\n    let dx = x1 - x0;\\n    let dy = y1 - y0;\\n    let yi = 1;\\n    if (dy < 0) {\\n        yi = -1;\\n        dy = -dy;\\n    }\\n    let D = (2 * dy) - dx;\\n    let y = y0;\\n\\n    for (let x = x0;x<x1+1;x++) {\\n        drawFunc(x, y);\\n        if (D > 0) {\\n            y = y + yi;\\n            D = D + (2 * (dy - dx));\\n        } else {\\n            D = D + 2*dy;\\n        }\\n    }\\n}\\nfunction plotLineHigh(x0, y0, x1, y1, drawFunc) {\\n    let dx = x1 - x0;\\n    let dy = y1 - y0;\\n    let xi = 1;\\n    if (dx < 0) {\\n        xi = -1;\\n        dx = -dx;\\n    }\\n    let D = (2 * dx) - dy;\\n    let x = x0;\\n\\n    for (let y = y0;y<y1+1;y++) {\\n        drawFunc(x, y);\\n        if (D > 0) {\\n            x = x + xi;\\n            D = D + (2 * (dx - dy));\\n        } else {\\n            D = D + 2*dx;\\n        }\\n    }\\n}\\n\\nfunction plotLine(p1, p2, offset, drawFunc) {\\n    \\n    let x0 = p1.x+offset.x;\\n    let y0 = p1.y+offset.y;\\n    \\n    let x1 = p2.x+offset.x;\\n    let y1 = p2.y+offset.y;\\n\\n    if (x0===x1 && y0===y1) drawFunc(x0,y0);\\n\\n\\n    if (Math.abs(y1 - y0) < Math.abs(x1 - x0)) {\\n        if (x0 > x1) plotLineLow(x1, y1, x0, y0, drawFunc);\\n        else plotLineLow(x0, y0, x1, y1, drawFunc);\\n    }\\n    else {\\n        if (y0 > y1) plotLineHigh(x1, y1, x0, y0, drawFunc);\\n        else plotLineHigh(x0, y0, x1, y1, drawFunc);\\n    }\\n}\\n\\n\\nclass Vector2D {\\n    constructor(x,y) {\\n        this.x = x;\\n        this.y = y;\\n    }\\n\\n    transform(x,y) {\\n        this.x += x;\\n        this.y += y;\\n    }\\n\\n    setTo(x,y) {\\n        this.x = x;\\n        this.y = y;\\n    }\\n\\n    isEqualTo(othervector) {\\n        return (this.x===othervector.x && this.y===othervector.y);\\n    }\\n    notEqualTo(othervector) {\\n        return (this.x!==othervector.x || this.y!==othervector.y);\\n    }\\n\\n    positive() {\\n        return (this.x >= 0 && this.y >=0);\\n    }\\n\\n    multipliedby(number) {\\n        return new Vector2D(this.x*number,this.y*number);\\n    }\\n    transformedby(x,y) {\\n        return new Vector2D(this.x+x,this.y+y);\\n    }\\n}\\n\\n\\nclass Map {\\n    constructor() {\\n        // this.canvasdimensions = new Vector2D(w,h); // establishing at start means no resizing canvas element\\n        this.data = null;\\n        this.dataview = null;\\n        this.numchunks = null;\\n    }\\n\\n    getValues(canvas, offset, scale) {\\n        let chunkpixels = CHUNKSIZE*scale;\\n\\n        let numchunks = new Vector2D(0,0);\\n        let startpoint = new Vector2D(0,0);\\n\\n        startpoint.x = (offset.x === 0) ? 0 : Math.floor((-1*offset.x)/chunkpixels);\\n        startpoint.y = (offset.y === 0) ? 0 : Math.floor((-1*offset.y)/chunkpixels);\\n\\n        const { width, height } = canvas.getBoundingClientRect();\\n\\n        numchunks.x = Math.ceil(width/chunkpixels)+1; // bit cheaty - should probs optimise\\n        numchunks.y = Math.ceil(height/chunkpixels)+1;\\n\\n        return {startpoint, numchunks};\\n    }\\n\\n    setMatrix(dimn, start, lines) {\\n\\n        let coords = [];\\n        let map_grid = this;\\n\\n        for (let i=0;i<dimn.x;i++) {\\n            for (let j=0;j<dimn.y;j++) {\\n                let coordsobj = { x: start.x+i, y: start.y+j };\\n                coords.push(coordsobj);    \\n            }\\n        }\\n        return new Promise(function(resolve, reject) {\\n            fetch('/getchunks',{\\n                method: 'POST',\\n                headers: {'Accept': 'application/octet-stream', 'Content-Type': 'application/json'},\\n                body: JSON.stringify({coords:coords, lines:lines})\\n            }).then((data)=>{\\n                return data.arrayBuffer();\\n            }).then((chunkbuffer) => {\\n                // console.log([...new Uint8Array(chunkbuffer)].map(x => x.toString(16).padStart(2, '0')));\\n                map_grid.data = chunkbuffer;\\n                map_grid.dataview = new Uint32Array(map_grid.data);\\n                map_grid.numchunks = dimn;\\n                resolve();\\n            });\\n        });\\n    }\\n\\n    getChunkPosOffset(currentcell, startpoint) {\\n        const i = Math.floor((currentcell.x/CHUNKSIZE))-startpoint.x;\\n        const k = currentcell.x - (i+startpoint.x)*CHUNKSIZE;\\n\\n        const j = Math.floor((currentcell.y/CHUNKSIZE))-startpoint.y;\\n        const l = currentcell.y - (j+startpoint.y)*CHUNKSIZE;\\n\\n\\n        return {i, j, k, l};\\n    }\\n\\n    addCell(index,colorhex) {\\n        this.dataview[index] = colorhex;\\n        // console.log(data[index], colorhex);\\n    }\\n    getDataIndex(i,j,k,l) {\\n        return i*(this.numchunks.y)*(CHUNKSIZE*CHUNKSIZE)+j*(CHUNKSIZE*CHUNKSIZE)+k*CHUNKSIZE+l;\\n    }\\n}\\n\\n\\nclass AppWrapper extends React.Component {\\n    constructor(props) {\\n        super(props);\\n        this.state = {\\n            tool_mode: EYEDROPTOOL,\\n            debug_mode: false,\\n            show_stats: true,\\n            color_selected: 255*255, \\n            update: {\\n                time: 0,\\n                tot_time: 0,\\n                num_updates: 1\\n            },\\n            draw: {\\n                time: 0,\\n                tot_time: 0,\\n                num_updates: 1\\n            },\\n            cursorx: 0,\\n            cursory: 0,\\n            offsetx: 0,\\n            offsety: 0,\\n            chunkx: 0,\\n            chunky: 0,\\n        };\\n\\n        this.getColorSelected = () => {return this.state.color_selected};\\n        this.getDebugMode = () => {return this.state.debug_mode};\\n        this.getToolMode = () => {return this.state.tool_mode};\\n\\n        this.changeToolMode = (change_to) => {\\n            console.log(\\\"toolmode changed to \\\",change_to);\\n            this.setState({tool_mode: change_to});\\n        }\\n\\n        this.changeColor = (blockid) => {\\n            if (typeof blockid === 'string') {\\n                let out_num = parseInt(blockid.substring(1), 16);\\n                console.log(blockid.substring(1));\\n                console.log(out_num);\\n                this.setState({color_selected: out_num});\\n            }\\n            else if (typeof blockid === 'number') {\\n                this.setState({color_selected: blockid});\\n            }\\n        };\\n        this.isSelected = (blockid) => {\\n            if (typeof blockid === 'string') {\\n                let out_num = parseInt(blockid.substring(1), 16);\\n                return (out_num===this.state.color_selected);\\n            }\\n            else if (typeof blockid === 'number') {\\n                return (blockid===this.state.color_selected)\\n            }\\n        };\\n\\n        this.changeUpdateTime = (new_time) => {\\n            this.setState({update:{\\n                time: new_time, \\n                tot_time: this.state.update.tot_time+new_time, \\n                num_updates: this.state.update.num_updates+1\\n            }});\\n        }\\n        this.changeDrawTime = (new_time) => {\\n            this.setState({draw:{\\n                time: new_time, \\n                tot_time: this.state.draw.tot_time+new_time, \\n                num_updates: this.state.draw.num_updates+1\\n            }});\\n        }\\n        this.changeCursorLoc = (vector) => {\\n            this.setState({cursorx: vector.x,cursory: vector.y});\\n        }\\n        this.changeOffsetLoc = (vector) => {\\n            this.setState({offsetx: vector.x,offsety: vector.y});\\n        }\\n        this.changeChunkLoc = (x,y) => {\\n            this.setState({chunkx: x,chunky: y});\\n        }\\n    }\\n\\n    componentDidMount() {\\n        document.body.style.overflow = \\\"hidden\\\"; // stops user from scrolling the page\\n    }\\n\\n    render() {\\n        return (\\n            <div className='App-wrapper'>\\n                <MapCanvas \\n                    toolmode={this.state.tool_mode}\\n                    getToolMode={this.getToolMode}\\n                    changeToolMode={this.changeToolMode}\\n                    getDebugMode={this.getDebugMode}\\n                    changeUpdateTime={this.changeUpdateTime}\\n                    changeDrawTime={this.changeDrawTime}\\n                    getColorSelected={this.getColorSelected}\\n                    changeCursorLoc={this.changeCursorLoc}\\n                    changeOffsetLoc={this.changeOffsetLoc}\\n                    changeChunkLoc={this.changeChunkLoc}\\n                    changeColor={this.changeColor}\\n                />\\n                <Palette isSelected={this.isSelected} changeColor={this.changeColor}/>\\n                <div className='drawer primary'>\\n                    {(this.state.show_stats)?(<div style={{position: `absolute`,right:`0.8vw`}}>\\n                        ({this.state.update.time}ms, avg: {Math.round(this.state.update.tot_time/this.state.update.num_updates)}ms, {this.state.update.num_updates} updates)\\n                        <br/>({this.state.draw.time}ms, avg: {Math.round(this.state.draw.tot_time/this.state.draw.num_updates)}ms, {this.state.draw.num_updates} draws)\\n                        <br/>Cursor: ({this.state.cursorx},{this.state.cursory})\\n                        <br/>Offset: ({this.state.offsetx},{this.state.offsety})\\n                        <br/>Chunk: ({this.state.chunkx},{this.state.chunky})\\n                    </div>):null}\\n\\n                    <div\\n                        style={{backgroundColor: `#b0b0b0`}} \\n                        className={`toolbutton` + (this.getToolMode()===DRAWTOOL ? \\\"selected\\\" : \\\"\\\")+ ` blockbutton` + (this.getToolMode()===DRAWTOOL ? \\\"selected\\\" : \\\"\\\")}\\n                        onClick={() => {this.changeToolMode(DRAWTOOL)}}\\n                    ><p>draw</p></div>\\n                    <div\\n                        style={{backgroundColor: `#b0b0b0`}} \\n                        className={`toolbutton` + (this.getToolMode()===EYEDROPTOOL ? \\\"selected\\\" : \\\"\\\")+ ` blockbutton` + (this.getToolMode()===EYEDROPTOOL ? \\\"selected\\\" : \\\"\\\")}\\n                        onClick={() => {this.changeToolMode(EYEDROPTOOL)}}\\n                    >eyedrop</div>\\n\\n                    <input type={\\\"checkbox\\\"} onChange={()=>{this.setState({debug_mode:!this.state.debug_mode})}}></input> Debug Mode&ensp;\\n                    <input checked={this.state.show_stats} type={\\\"checkbox\\\"} onChange={()=>{this.setState({show_stats:!this.state.show_stats})}}></input> Stats\\n                </div>\\n            </div>\\n        )\\n    }\\n}\\n\\nclass MapCanvas extends React.Component {\\n    constructor(props) {\\n        super(props);\\n\\n        this.drawLines = [];\\n\\n        this.scale = 16;\\n        this.tempscale = this.scale;\\n\\n        this.cellpos = {i:0,j:0,k:0,l:0};\\n\\n        this.map_grid = null;\\n        this.canvasRef = createRef();\\n    \\n        this.mapoffset = new Vector2D(0,0);\\n        this.celloffset = new Vector2D(0,0);\\n        this.currentcell = new Vector2D(0,0);\\n        this.startpoint = new Vector2D(0,0);\\n\\n        this.cursorcurrent = new Vector2D(0,0);\\n        this.lmousedown = false;\\n        this.rmousedown = false;\\n\\n        this.canvas = null;\\n    }\\n\\n    //Called after element's initialisation\\n    componentDidMount() { \\n        this.canvas = this.canvasRef.current;\\n        this.map_grid = new Map();\\n        setTimeout(this.updateCanvas(), 1000);\\n    }\\n\\n    getCursorPosition(event, canvas) {\\n        const rect = canvas.getBoundingClientRect();\\n        const x = event.clientX - rect.left;\\n        const y = event.clientY - rect.top;\\n        const pos = new Vector2D(x,y);\\n        return pos;\\n    }\\n\\n    getCurrentCell() {\\n        let x = Math.floor((this.cursorcurrent.x-this.mapoffset.x*this.scale)/(this.scale));\\n        let y = Math.floor((this.cursorcurrent.y-this.mapoffset.y*this.scale)/(this.scale));\\n        const pos = new Vector2D(x,y);\\n        return pos;\\n    }\\n\\n    moveMap(start, end) {\\n        let x = (end.x-start.x)/this.scale;\\n        let y = (end.y-start.y)/this.scale;\\n        this.mapoffset.transform(x,y);\\n        this.celloffset.setTo(Math.floor(this.mapoffset.x),Math.floor(this.mapoffset.y));\\n        this.props.changeOffsetLoc(this.celloffset);\\n    }\\n\\n    drawMap (canvas, startpoint) {\\n        let start =  Date.now();\\n\\n        this.resizeCanvas(canvas);\\n        const { width, height } = canvas.getBoundingClientRect();\\n        const ctx = canvas.getContext('2d');\\n        ctx.clearRect(0, 0, width, height)\\n        ctx.fillStyle = \\\"#ffffff\\\";\\n        ctx.fillRect(0, 0, width, height);\\n\\n        // finding location in terms of iterators of current cell\\n        // let {cell_i, cell_j, cell_k, cell_l} = this.map_grid.getChunkPosOffset(this.currentcell, startpoint);\\n\\n        let blockid;\\n        let x;\\n        let y;\\n\\n        let mapoffset_x = Math.floor(this.mapoffset.x*this.scale);\\n        let mapoffset_y = Math.floor(this.mapoffset.y*this.scale);\\n        // let mapoffset_x = this.mapoffset.x;\\n        // let mapoffset_y = this.mapoffset.y;\\n\\n        let doFill = (i,j,k,l) => {\\n\\n            x = (((i+startpoint.x)*CHUNKSIZE+k))*(this.scale)+mapoffset_x;\\n            y = (((j+startpoint.y)*CHUNKSIZE+l))*(this.scale)+mapoffset_y;\\n            if (x%1!==0||y%1!==0||this.scale%1!==0) console.log(\\\"ALERT:\\\", x, y, this.scale);\\n            ctx.fillRect(x, y, this.scale, this.scale);\\n            // console.log(x,y,cellapparentsize);\\n        }\\n        if (this.map_grid.data === null) return;\\n        // for map\\n\\n\\n        let chunkbufferoffset = 0;\\n\\n        if (this.props.getDebugMode()) ctx.beginPath();\\n        for (let i=0;i<this.map_grid.numchunks.x;i++) {\\n            for (let j=0;j<this.map_grid.numchunks.y;j++) {\\n                // for each chunk\\n                if (this.props.getDebugMode()) {\\n                    x = (((i+startpoint.x)*CHUNKSIZE)+mapoffset_x)*(this.scale);\\n                    y = (((j+startpoint.y)*CHUNKSIZE)+mapoffset_y)*(this.scale);\\n\\n                    ctx.fillStyle = \\\"#000000\\\";\\n                    ctx.lineWidth = 0.01*Math.floor(this.scale);\\n                    ctx.moveTo(x, 0);\\n                    ctx.lineTo(x, height);\\n                    // ctx.stroke();\\n                    ctx.moveTo(0, y);\\n                    ctx.lineTo(width, y);\\n                }\\n                for (let c=0;c<(CHUNKSIZE*CHUNKSIZE);c++) {\\n                    let k = Math.floor(c/CHUNKSIZE);\\n                    let l = c-(k*CHUNKSIZE);\\n                    \\n                    blockid = this.map_grid.dataview[chunkbufferoffset+c];\\n\\n                    if (blockid!==16777215){\\n                        // ctx.fillStyle = blockid.toString(16);\\n                        ctx.fillStyle = \\\"#\\\" + (blockid & 0x00FFFFFF).toString(16).padStart(6, '0');\\n                        // if (c===0) console.log((blockid & 0x00FFFFFF).toString(16).padStart(6, '0'))\\n                        doFill(i,j,k,l,blockid);\\n                    }\\n                }\\n                chunkbufferoffset += (CHUNKSIZE*CHUNKSIZE);\\n            }\\n        }\\n        if (this.props.getDebugMode()) ctx.stroke();\\n\\n        if (this.props.toolmode===EYEDROPTOOL) {\\n            \\n        }\\n        else {\\n            ctx.fillStyle = \\\"#\\\"+(this.props.getColorSelected() & 0x00FFFFFF).toString(16).padStart(6, '0')+\\\"ff\\\";\\n            doFill(this.cellpos.i,this.cellpos.j,this.cellpos.k,this.cellpos.l);\\n        }\\n        this.props.changeDrawTime(Date.now()-start);\\n    }\\n\\n    updateCanvas() {\\n        let start = Date.now(); // time testing\\n\\n        let {startpoint, numchunks} = this.map_grid.getValues(this.canvas, this.mapoffset.multipliedby(this.scale), this.scale);\\n        let linestosend = this.drawLines;\\n        this.drawLines = [];\\n        this.map_grid.setMatrix(numchunks, startpoint, linestosend)\\n        .then(()=>{\\n            this.drawMap(this.canvas, startpoint);\\n            this.startpoint = startpoint;\\n            this.props.changeUpdateTime(Date.now()-start);\\n        });\\n\\n        setTimeout(()=>{this.updateCanvas()}, 1000);\\n    }\\n\\n    // stolen code lmao\\n    resizeCanvas(canvas) {\\n        const { width, height } = canvas.getBoundingClientRect();\\n        \\n        if (canvas.width !== width || canvas.height !== height) {\\n          const { devicePixelRatio:ratio=1 } = window;\\n          const context = canvas.getContext('2d');\\n          canvas.width = (1*width*ratio);\\n          canvas.height = (1*height*ratio);\\n          context.scale(ratio, ratio);\\n          return true;\\n        }\\n    \\n        return false\\n    }\\n\\n    drawCellAtMouse(x,y) {\\n        const currentpos = new Vector2D(x-this.celloffset.x,y-this.celloffset.y);\\n\\n        let {i, j, k, l} = this.map_grid.getChunkPosOffset(currentpos, this.startpoint);\\n        let dataindex = this.map_grid.getDataIndex(i,j,k,l);\\n        if (dataindex < this.map_grid.data.byteLength/4) this.map_grid.addCell(dataindex, this.props.getColorSelected());\\n    }\\n\\n    moveCursor(event) {\\n        let update = false;\\n        let newcursorcurrent = this.getCursorPosition(event, this.canvas);\\n        if (this.rmousedown) {\\n            this.moveMap(this.cursorcurrent, newcursorcurrent);\\n            update = true;\\n        }\\n        this.cursorcurrent = newcursorcurrent;\\n        let newcurrentcell = this.getCurrentCell();\\n        // Drawing line and updating stats\\n        if (!this.currentcell.isEqualTo(newcurrentcell)) {\\n            if (this.lmousedown) this.drawLine(this.currentcell,newcurrentcell);\\n            this.currentcell = newcurrentcell;\\n            this.cellpos = this.map_grid.getChunkPosOffset(this.currentcell, this.startpoint);\\n            this.props.changeCursorLoc(this.currentcell);\\n            this.props.changeChunkLoc(this.cellpos.i+this.startpoint.x,this.cellpos.j+this.startpoint.y);\\n            update = true;\\n        }\\n        return update;\\n    }\\n\\n    drawLine(p1,p2) {\\n        plotLine(p1, p2, this.celloffset, (x,y)=>this.drawCellAtMouse(x,y));\\n        this.drawLines.push({p1:p1,p2:p2,offset:this.celloffset,blockid:this.props.getColorSelected()});\\n    }\\n\\n    render() {\\n        return (\\n            <canvas \\n                ref={this.canvasRef}\\n                className='map-canvas primary'\\n                style={{cursor:`${(this.props.toolmode===EYEDROPTOOL)?\\\"crosshair\\\":\\\"default\\\"}`}}\\n                onContextMenu={(e) => {\\n                    e.preventDefault();\\n                }}\\n                onMouseDown={(e) => {\\n                    e.preventDefault();\\n                    if (e.button === 0) {\\n                        switch (this.props.toolmode) {\\n                            case EYEDROPTOOL:\\n                                console.log(\\\"eyedroptool used\\\");\\n                                let {i,j,k,l} = this.map_grid.getChunkPosOffset(this.currentcell, this.startpoint);\\n                                let dataindex = this.map_grid.getDataIndex(i,j,k,l);\\n                                this.props.changeColor(this.map_grid.dataview[dataindex]);\\n                                this.props.changeToolMode(DRAWTOOL);\\n                                break;\\n                            default:\\n                                this.lmousedown=true;\\n                                this.drawLine(this.currentcell,this.currentcell);\\n                                this.drawMap(this.canvas, this.startpoint);\\n                                break;\\n                        }\\n                    }\\n                    else if (e.button === 2) {\\n                        this.rmousedown=true;\\n                    }\\n                }}\\n                onMouseUp={(e) => {\\n                    this.lmousedown=false;\\n                    this.rmousedown=false;\\n                    this.drawMap(this.canvas, this.startpoint);\\n                }}\\n                onMouseMove={(e) => {\\n                    if (this.moveCursor(e)) this.drawMap(this.canvas, this.startpoint);\\n                }}\\n                onMouseLeave={(e) => {\\n                    this.moveCursor(e);\\n                    this.lmousedown=false;\\n                    this.rmousedown=false;\\n                    this.drawMap(this.canvas, this.startpoint);\\n                }}\\n                onWheel={(e) => {\\n                    let newscale = this.tempscale - Math.floor(e.deltaY)/1000;\\n                    // console.log(this.scale, this.tempscale);\\n                    if (newscale>5) this.tempscale = newscale;\\n                    else this.tempscale = 5;\\n                    this.scale = Math.floor(this.tempscale);\\n                    \\n                    this.drawMap(this.canvas, this.startpoint);\\n                }}\\n            ></canvas>\\n        )\\n    }\\n}\\n\\n// needs to be fixed up - maybe add useEffect()\\nclass Palette extends React.Component {\\n    constructor(props) {\\n        super(props);\\n\\n        this.handleChange = (e) => {\\n            this.props.changeColor(e.target.value);\\n        }\\n    }\\n\\n    render() {\\n        return (\\n            <div className='palette primary'>\\n                {\\n                    blocks.map(button => (\\n                        <div \\n                            key={button.blockid} \\n                            style={{backgroundColor: `${button.imagesrc}`}} \\n                            className={`blockbutton` + (this.props.isSelected(button.imagesrc) ? \\\"selected\\\" : \\\"\\\")}\\n                            onClick={() => {this.props.changeColor(button.imagesrc)}}\\n                            //onClick={() => {console.log(button.blockid)}}\\n                            ></div>\\n                    ))\\n                }\\n                <input type={\\\"color\\\"} onChange={this.handleChange}></input>\\n                {/* <input type={\\\"submit\\\"} value={\\\"Apply\\\"}></input> */}\\n        </div>\\n        )\\n    }\\n\\n}\\n\\n\\n\\n\\nfunction App() {\\n  return (\\n    <AppWrapper/>\\n  );\\n}\\n\\nexport default App;\\n\",\"const reportWebVitals = onPerfEntry => {\\n  if (onPerfEntry && onPerfEntry instanceof Function) {\\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\\n      getCLS(onPerfEntry);\\n      getFID(onPerfEntry);\\n      getFCP(onPerfEntry);\\n      getLCP(onPerfEntry);\\n      getTTFB(onPerfEntry);\\n    });\\n  }\\n};\\n\\nexport default reportWebVitals;\\n\",\"import React from 'react';\\nimport ReactDOM from 'react-dom/client';\\nimport './index.css';\\nimport App from './App';\\nimport reportWebVitals from './reportWebVitals';\\n\\nconst root = ReactDOM.createRoot(document.getElementById('root'));\\nroot.render(\\n  <React.StrictMode>\\n    <App />\\n  </React.StrictMode>\\n);\\n\\n// If you want to start measuring performance in your app, pass a function\\n// to log results (for example: reportWebVitals(console.log))\\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\\nreportWebVitals();\\n\"]}","code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{17:function(e,t,a){},18:function(e,t,a){},19:function(e,t,a){\"use strict\";a.r(t);var o=a(0),n=a.n(o),s=a(7),i=a.n(s),r=(a(17),a(4)),c=a(3),l=a(5),u=a(1),h=a(2),d=(a(18),1),f=[{blockid:\"0\",blockname:\"1\",imagesrc:\"#ffffff\"},{blockid:\"1\",blockname:\"2\",imagesrc:\"#d1e7dc\"},{blockid:\"2\",blockname:\"3\",imagesrc:\"#c4d4e1\"},{blockid:\"3\",blockname:\"4\",imagesrc:\"#bcb5d3\"},{blockid:\"4\",blockname:\"5\",imagesrc:\"#f5dbe2\"},{blockid:\"5\",blockname:\"6\",imagesrc:\"#eeb6c9\"},{blockid:\"6\",blockname:\"7\",imagesrc:\"#c49abf\"},{blockid:\"7\",blockname:\"8\",imagesrc:\"#bada55\"},{blockid:\"8\",blockname:\"9\",imagesrc:\"#ffd700\"},{blockid:\"9\",blockname:\"10\",imagesrc:\"#f47b79\"},{blockid:\"a\",blockname:\"11\",imagesrc:\"#c6e2d4\"},{blockid:\"b\",blockname:\"12\",imagesrc:\"#b6d3c2\"},{blockid:\"c\",blockname:\"13\",imagesrc:\"#e0b1cb\"},{blockid:\"d\",blockname:\"14\",imagesrc:\"#d0a7b7\"},{blockid:\"e\",blockname:\"15\",imagesrc:\"#f3d1d3\"},{blockid:\"f\",blockname:\"16\",imagesrc:\"#e9b8c8\"}];function m(e,t,a,o,n){var s=a-e,i=o-t,r=1;i<0&&(r=-1,i=-i);for(var c=2*i-s,l=t,u=e;u<a+1;u++)n(u,l),c>0?(l+=r,c+=2*(i-s)):c+=2*i}function p(e,t,a,o,n){var s=a-e,i=o-t,r=1;s<0&&(r=-1,s=-s);for(var c=2*s-i,l=e,u=t;u<o+1;u++)n(l,u),c>0?(l+=r,c+=2*(s-i)):c+=2*s}var g=function(){function e(t,a){Object(u.a)(this,e),this.x=t,this.y=a}return Object(h.a)(e,[{key:\"transform\",value:function(e,t){this.x+=e,this.y+=t}},{key:\"setTo\",value:function(e,t){this.x=e,this.y=t}},{key:\"isEqualTo\",value:function(e){return this.x===e.x&&this.y===e.y}},{key:\"notEqualTo\",value:function(e){return this.x!==e.x||this.y!==e.y}},{key:\"positive\",value:function(){return this.x>=0&&this.y>=0}},{key:\"multipliedby\",value:function(t){return new e(this.x*t,this.y*t)}},{key:\"transformedby\",value:function(t,a){return new e(this.x+t,this.y+a)}}]),e}(),b=function(){function e(){Object(u.a)(this,e),this.data=null,this.dataview=null,this.numchunks=null}return Object(h.a)(e,[{key:\"getValues\",value:function(e,t,a){var o=16*a,n=new g(0,0),s=new g(0,0);s.x=0===t.x?0:Math.floor(-1*t.x/o),s.y=0===t.y?0:Math.floor(-1*t.y/o);var i=e.getBoundingClientRect(),r=i.width,c=i.height;return n.x=Math.ceil(r/o)+1,n.y=Math.ceil(c/o)+1,{startpoint:s,numchunks:n}}},{key:\"setMatrix\",value:function(e,t,a){for(var o=[],n=this,s=0;s<e.x;s++)for(var i=0;i<e.y;i++){var r={x:t.x+s,y:t.y+i};o.push(r)}return new Promise(function(t,s){fetch(\"/getchunks\",{method:\"POST\",headers:{Accept:\"application/octet-stream\",\"Content-Type\":\"application/json\"},body:JSON.stringify({coords:o,lines:a})}).then(function(e){return e.arrayBuffer()}).then(function(a){n.data=a,n.dataview=new Uint32Array(n.data),n.numchunks=e,t()})})}},{key:\"getChunkPosOffset\",value:function(e,t){var a=Math.floor(e.x/16)-t.x,o=e.x-16*(a+t.x),n=Math.floor(e.y/16)-t.y;return{i:a,j:n,k:o,l:e.y-16*(n+t.y)}}},{key:\"addCell\",value:function(e,t){this.dataview[e]=t}},{key:\"getDataIndex\",value:function(e,t,a,o){return e*this.numchunks.y*256+256*t+16*a+o}}]),e}(),v=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(r.a)(this,Object(c.a)(t).call(this,e))).state={tool_mode:d,debug_mode:!1,show_stats:!0,color_selected:65025,update:{time:0,tot_time:0,num_updates:1},draw:{time:0,tot_time:0,num_updates:1},cursorx:0,cursory:0,offsetx:0,offsety:0,chunkx:0,chunky:0},a.getColorSelected=function(){return a.state.color_selected},a.getDebugMode=function(){return a.state.debug_mode},a.getToolMode=function(){return a.state.tool_mode},a.changeToolMode=function(e){console.log(\"toolmode changed to \",e),a.setState({tool_mode:e})},a.changeColor=function(e){if(\"string\"===typeof e){var t=parseInt(e.substring(1),16);console.log(e.substring(1)),console.log(t),a.setState({color_selected:t})}else\"number\"===typeof e&&a.setState({color_selected:e})},a.isSelected=function(e){return\"string\"===typeof e?parseInt(e.substring(1),16)===a.state.color_selected:\"number\"===typeof e?e===a.state.color_selected:void 0},a.changeUpdateTime=function(e){a.setState({update:{time:e,tot_time:a.state.update.tot_time+e,num_updates:a.state.update.num_updates+1}})},a.changeDrawTime=function(e){a.setState({draw:{time:e,tot_time:a.state.draw.tot_time+e,num_updates:a.state.draw.num_updates+1}})},a.changeCursorLoc=function(e){a.setState({cursorx:e.x,cursory:e.y})},a.changeOffsetLoc=function(e){a.setState({offsetx:e.x,offsety:e.y})},a.changeChunkLoc=function(e,t){a.setState({chunkx:e,chunky:t})},a}return Object(l.a)(t,e),Object(h.a)(t,[{key:\"componentDidMount\",value:function(){document.body.style.overflow=\"hidden\"}},{key:\"render\",value:function(){var e=this;return n.a.createElement(\"div\",{className:\"App-wrapper\"},n.a.createElement(y,{toolmode:this.state.tool_mode,getToolMode:this.getToolMode,changeToolMode:this.changeToolMode,getDebugMode:this.getDebugMode,changeUpdateTime:this.changeUpdateTime,changeDrawTime:this.changeDrawTime,getColorSelected:this.getColorSelected,changeCursorLoc:this.changeCursorLoc,changeOffsetLoc:this.changeOffsetLoc,changeChunkLoc:this.changeChunkLoc,changeColor:this.changeColor}),n.a.createElement(k,{isSelected:this.isSelected,changeColor:this.changeColor}),n.a.createElement(\"div\",{className:\"drawer primary\"},this.state.show_stats?n.a.createElement(\"div\",{style:{position:\"absolute\",right:\"0.8vw\"}},\"(\",this.state.update.time,\"ms, avg: \",Math.round(this.state.update.tot_time/this.state.update.num_updates),\"ms, \",this.state.update.num_updates,\" updates)\",n.a.createElement(\"br\",null),\"(\",this.state.draw.time,\"ms, avg: \",Math.round(this.state.draw.tot_time/this.state.draw.num_updates),\"ms, \",this.state.draw.num_updates,\" draws)\",n.a.createElement(\"br\",null),\"Cursor: (\",this.state.cursorx,\",\",this.state.cursory,\")\",n.a.createElement(\"br\",null),\"Offset: (\",this.state.offsetx,\",\",this.state.offsety,\")\",n.a.createElement(\"br\",null),\"Chunk: (\",this.state.chunkx,\",\",this.state.chunky,\")\"):null,n.a.createElement(\"div\",{style:{backgroundColor:\"#b0b0b0\"},className:\"toolbutton\"+(0===this.getToolMode()?\"selected\":\"\")+\" blockbutton\"+(0===this.getToolMode()?\"selected\":\"\"),onClick:function(){e.changeToolMode(0)}},n.a.createElement(\"p\",null,\"draw\")),n.a.createElement(\"div\",{style:{backgroundColor:\"#b0b0b0\"},className:\"toolbutton\"+(this.getToolMode()===d?\"selected\":\"\")+\" blockbutton\"+(this.getToolMode()===d?\"selected\":\"\"),onClick:function(){e.changeToolMode(d)}},\"eyedrop\"),n.a.createElement(\"input\",{type:\"checkbox\",onChange:function(){e.setState({debug_mode:!e.state.debug_mode})}}),\" Debug Mode\\u2002\",n.a.createElement(\"input\",{checked:this.state.show_stats,type:\"checkbox\",onChange:function(){e.setState({show_stats:!e.state.show_stats})}}),\" Stats\"))}}]),t}(n.a.Component),y=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(r.a)(this,Object(c.a)(t).call(this,e))).drawLines=[],a.scale=16,a.tempscale=a.scale,a.cellpos={i:0,j:0,k:0,l:0},a.map_grid=null,a.canvasRef=Object(o.createRef)(),a.mapoffset=new g(0,0),a.celloffset=new g(0,0),a.currentcell=new g(0,0),a.startpoint=new g(0,0),a.cursorcurrent=new g(0,0),a.lmousedown=!1,a.rmousedown=!1,a.canvas=null,a}return Object(l.a)(t,e),Object(h.a)(t,[{key:\"componentDidMount\",value:function(){this.canvas=this.canvasRef.current,this.map_grid=new b,setTimeout(this.updateCanvas(),1e3)}},{key:\"getCursorPosition\",value:function(e,t){var a=t.getBoundingClientRect(),o=e.clientX-a.left,n=e.clientY-a.top;return new g(o,n)}},{key:\"getCurrentCell\",value:function(){var e=Math.floor((this.cursorcurrent.x-this.mapoffset.x*this.scale)/this.scale),t=Math.floor((this.cursorcurrent.y-this.mapoffset.y*this.scale)/this.scale);return new g(e,t)}},{key:\"moveMap\",value:function(e,t){var a=(t.x-e.x)/this.scale,o=(t.y-e.y)/this.scale;this.mapoffset.transform(a,o),this.celloffset.setTo(Math.floor(this.mapoffset.x),Math.floor(this.mapoffset.y)),this.props.changeOffsetLoc(this.celloffset)}},{key:\"drawMap\",value:function(e,t){var a=this,o=Date.now();this.resizeCanvas(e);var n,s,i,r=e.getBoundingClientRect(),c=r.width,l=r.height,u=e.getContext(\"2d\");u.clearRect(0,0,c,l),u.fillStyle=\"#ffffff\",u.fillRect(0,0,c,l);var h=Math.floor(this.mapoffset.x*this.scale),f=Math.floor(this.mapoffset.y*this.scale),m=function(e,o,n,r){s=(16*(e+t.x)+n)*a.scale+h,i=(16*(o+t.y)+r)*a.scale+f,s%1===0&&i%1===0&&a.scale%1===0||console.log(\"ALERT:\",s,i,a.scale),u.fillRect(s,i,a.scale,a.scale)};if(null!==this.map_grid.data){var p=0;this.props.getDebugMode()&&u.beginPath();for(var g=0;g<this.map_grid.numchunks.x;g++)for(var b=0;b<this.map_grid.numchunks.y;b++){this.props.getDebugMode()&&(s=(16*(g+t.x)+h)*this.scale,i=(16*(b+t.y)+f)*this.scale,u.fillStyle=\"#000000\",u.lineWidth=.01*Math.floor(this.scale),u.moveTo(s,0),u.lineTo(s,l),u.moveTo(0,i),u.lineTo(c,i));for(var v=0;v<256;v++){var y=Math.floor(v/16),k=v-16*y;16777215!==(n=this.map_grid.dataview[p+v])&&(u.fillStyle=\"#\"+(16777215&n).toString(16).padStart(6,\"0\"),m(g,b,y,k))}p+=256}this.props.getDebugMode()&&u.stroke(),this.props.toolmode===d||(u.fillStyle=\"#\"+(16777215&this.props.getColorSelected()).toString(16).padStart(6,\"0\")+\"ff\",m(this.cellpos.i,this.cellpos.j,this.cellpos.k,this.cellpos.l)),this.props.changeDrawTime(Date.now()-o)}}},{key:\"updateCanvas\",value:function(){var e=this,t=Date.now(),a=this.map_grid.getValues(this.canvas,this.mapoffset.multipliedby(this.scale),this.scale),o=a.startpoint,n=a.numchunks,s=this.drawLines;this.drawLines=[],this.map_grid.setMatrix(n,o,s).then(function(){e.drawMap(e.canvas,o),e.startpoint=o,e.props.changeUpdateTime(Date.now()-t)}),setTimeout(function(){e.updateCanvas()},1e3)}},{key:\"resizeCanvas\",value:function(e){var t=e.getBoundingClientRect(),a=t.width,o=t.height;if(e.width!==a||e.height!==o){var n=window.devicePixelRatio,s=void 0===n?1:n,i=e.getContext(\"2d\");return e.width=1*a*s,e.height=1*o*s,i.scale(s,s),!0}return!1}},{key:\"drawCellAtMouse\",value:function(e,t){var a=new g(e-this.celloffset.x,t-this.celloffset.y),o=this.map_grid.getChunkPosOffset(a,this.startpoint),n=o.i,s=o.j,i=o.k,r=o.l,c=this.map_grid.getDataIndex(n,s,i,r);c<this.map_grid.data.byteLength/4&&this.map_grid.addCell(c,this.props.getColorSelected())}},{key:\"moveCursor\",value:function(e){var t=!1,a=this.getCursorPosition(e,this.canvas);this.rmousedown&&(this.moveMap(this.cursorcurrent,a),t=!0),this.cursorcurrent=a;var o=this.getCurrentCell();return this.currentcell.isEqualTo(o)||(this.lmousedown&&this.drawLine(this.currentcell,o),this.currentcell=o,this.cellpos=this.map_grid.getChunkPosOffset(this.currentcell,this.startpoint),this.props.changeCursorLoc(this.currentcell),this.props.changeChunkLoc(this.cellpos.i+this.startpoint.x,this.cellpos.j+this.startpoint.y),t=!0),t}},{key:\"drawLine\",value:function(e,t){var a=this;!function(e,t,a,o){var n=e.x+a.x,s=e.y+a.y,i=t.x+a.x,r=t.y+a.y;n===i&&s===r&&o(n,s),Math.abs(r-s)<Math.abs(i-n)?n>i?m(i,r,n,s,o):m(n,s,i,r,o):s>r?p(i,r,n,s,o):p(n,s,i,r,o)}(e,t,this.celloffset,function(e,t){return a.drawCellAtMouse(e,t)}),this.drawLines.push({p1:e,p2:t,offset:this.celloffset,blockid:this.props.getColorSelected()})}},{key:\"render\",value:function(){var e=this;return n.a.createElement(\"canvas\",{ref:this.canvasRef,className:\"map-canvas primary\",style:{cursor:\"\".concat(this.props.toolmode===d?\"crosshair\":\"default\")},onContextMenu:function(e){e.preventDefault()},onMouseDown:function(t){if(t.preventDefault(),0===t.button)switch(e.props.toolmode){case d:console.log(\"eyedroptool used\");var a=e.map_grid.getChunkPosOffset(e.currentcell,e.startpoint),o=a.i,n=a.j,s=a.k,i=a.l,r=e.map_grid.getDataIndex(o,n,s,i);e.props.changeColor(e.map_grid.dataview[r]),e.props.changeToolMode(0);break;default:e.lmousedown=!0,e.drawLine(e.currentcell,e.currentcell),e.drawMap(e.canvas,e.startpoint)}else 2===t.button&&(e.rmousedown=!0)},onMouseUp:function(t){e.lmousedown=!1,e.rmousedown=!1,e.drawMap(e.canvas,e.startpoint)},onMouseMove:function(t){e.moveCursor(t)&&e.drawMap(e.canvas,e.startpoint)},onMouseLeave:function(t){e.moveCursor(t),e.lmousedown=!1,e.rmousedown=!1,e.drawMap(e.canvas,e.startpoint)},onWheel:function(t){var a=e.tempscale-Math.floor(t.deltaY)/1e3;e.tempscale=a>5?a:5,e.scale=Math.floor(e.tempscale),e.drawMap(e.canvas,e.startpoint)}})}}]),t}(n.a.Component),k=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(r.a)(this,Object(c.a)(t).call(this,e))).handleChange=function(e){a.props.changeColor(e.target.value)},a}return Object(l.a)(t,e),Object(h.a)(t,[{key:\"render\",value:function(){var e=this;return n.a.createElement(\"div\",{className:\"palette primary\"},f.map(function(t){return n.a.createElement(\"div\",{key:t.blockid,style:{backgroundColor:\"\".concat(t.imagesrc)},className:\"blockbutton\"+(e.props.isSelected(t.imagesrc)?\"selected\":\"\"),onClick:function(){e.props.changeColor(t.imagesrc)}})}),n.a.createElement(\"input\",{type:\"color\",onChange:this.handleChange}))}}]),t}(n.a.Component);var w=function(){return n.a.createElement(v,null)},C=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,20)).then(function(t){var a=t.getCLS,o=t.getFID,n=t.getFCP,s=t.getLCP,i=t.getTTFB;a(e),o(e),n(e),s(e),i(e)})};i.a.createRoot(document.getElementById(\"root\")).render(n.a.createElement(n.a.StrictMode,null,n.a.createElement(w,null))),C()},8:function(e,t,a){e.exports=a(19)}},[[8,1,2]]]);","extractedComments":[]}
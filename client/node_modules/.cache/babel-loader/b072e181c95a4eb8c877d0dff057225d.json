{"ast":null,"code":"/* globals document, ImageData */\n\nvar parseFont = require('./lib/parse-font');\nexports.parseFont = parseFont;\nexports.createCanvas = function (width, height) {\n  return Object.assign(document.createElement('canvas'), {\n    width: width,\n    height: height\n  });\n};\nexports.createImageData = function (array, width, height) {\n  // Browser implementation of ImageData looks at the number of arguments passed\n  switch (arguments.length) {\n    case 0:\n      return new ImageData();\n    case 1:\n      return new ImageData(array);\n    case 2:\n      return new ImageData(array, width);\n    default:\n      return new ImageData(array, width, height);\n  }\n};\nexports.loadImage = function (src, options) {\n  return new Promise(function (resolve, reject) {\n    var image = Object.assign(document.createElement('img'), options);\n    function cleanup() {\n      image.onload = null;\n      image.onerror = null;\n    }\n    image.onload = function () {\n      cleanup();\n      resolve(image);\n    };\n    image.onerror = function () {\n      cleanup();\n      reject(new Error('Failed to load the image \"' + src + '\"'));\n    };\n    image.src = src;\n  });\n};","map":null,"metadata":{},"sourceType":"script"}
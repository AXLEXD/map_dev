{"ast":null,"code":"import _possibleConstructorReturn from \"/Users/alex/Programming/web_development/map_dev_server/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/alex/Programming/web_development/map_dev_server/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/alex/Programming/web_development/map_dev_server/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _classCallCheck from \"/Users/alex/Programming/web_development/map_dev_server/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/alex/Programming/web_development/map_dev_server/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nvar _jsxFileName = \"/Users/alex/Programming/web_development/map_dev_server/client/src/App.js\";\nimport './App.css';\nimport React, { createRef } from 'react';\nvar blocks = [{\n  blockid: 0,\n  blockname: '1',\n  imagesrc: '#ffffff'\n}, {\n  blockid: 1,\n  blockname: '2',\n  imagesrc: '#d1e7dc'\n}, {\n  blockid: 2,\n  blockname: '3',\n  imagesrc: '#c4d4e1'\n}, {\n  blockid: 3,\n  blockname: '4',\n  imagesrc: '#bcb5d3'\n}, {\n  blockid: 4,\n  blockname: '5',\n  imagesrc: '#f5dbe2'\n}, {\n  blockid: 5,\n  blockname: '6',\n  imagesrc: '#eeb6c9'\n}, {\n  blockid: 6,\n  blockname: '7',\n  imagesrc: '#c49abf'\n}, {\n  blockid: 7,\n  blockname: '8',\n  imagesrc: '#bada55'\n}, {\n  blockid: 8,\n  blockname: '9',\n  imagesrc: '#ffd700'\n}, {\n  blockid: 9,\n  blockname: '10',\n  imagesrc: '#f47b79'\n}];\nfunction plotLineLow(x0, y0, x1, y1, drawFunc) {\n  var dx = x1 - x0;\n  var dy = y1 - y0;\n  var yi = 1;\n  if (dy < 0) {\n    yi = -1;\n    dy = -dy;\n  }\n  var D = 2 * dy - dx;\n  var y = y0;\n  for (var x = x0; x < x1 + 1; x++) {\n    drawFunc(x, y);\n    if (D > 0) {\n      y = y + yi;\n      D = D + 2 * (dy - dx);\n    } else {\n      D = D + 2 * dy;\n    }\n  }\n}\nfunction plotLineHigh(x0, y0, x1, y1, drawFunc) {\n  var dx = x1 - x0;\n  var dy = y1 - y0;\n  var xi = 1;\n  if (dx < 0) {\n    xi = -1;\n    dx = -dx;\n  }\n  var D = 2 * dx - dy;\n  var x = x0;\n  for (var y = y0; y < y1 + 1; y++) {\n    drawFunc(x, y);\n    if (D > 0) {\n      x = x + xi;\n      D = D + 2 * (dx - dy);\n    } else {\n      D = D + 2 * dx;\n    }\n  }\n}\nfunction plotLine(p1, p2, offset, drawFunc) {\n  var x0 = p1.x + offset.x;\n  var y0 = p1.y + offset.y;\n  var x1 = p2.x + offset.x;\n  var y1 = p2.y + offset.y;\n  if (x0 === x1 && y0 === y1) drawFunc(x0, y0);\n  if (Math.abs(y1 - y0) < Math.abs(x1 - x0)) {\n    if (x0 > x1) plotLineLow(x1, y1, x0, y0, drawFunc);else plotLineLow(x0, y0, x1, y1, drawFunc);\n  } else {\n    if (y0 > y1) plotLineHigh(x1, y1, x0, y0, drawFunc);else plotLineHigh(x0, y0, x1, y1, drawFunc);\n  }\n}\nvar Vector2D = /*#__PURE__*/function () {\n  function Vector2D(x, y) {\n    _classCallCheck(this, Vector2D);\n    this.x = x;\n    this.y = y;\n  }\n  _createClass(Vector2D, [{\n    key: \"transform\",\n    value: function transform(x, y) {\n      this.x += x;\n      this.y += y;\n    }\n  }, {\n    key: \"setTo\",\n    value: function setTo(x, y) {\n      this.x = x;\n      this.y = y;\n    }\n  }, {\n    key: \"isEqualTo\",\n    value: function isEqualTo(othervector) {\n      return this.x === othervector.x && this.y === othervector.y;\n    }\n  }, {\n    key: \"positive\",\n    value: function positive() {\n      return this.x >= 0 && this.y >= 0;\n    }\n  }]);\n  return Vector2D;\n}();\nvar Map = /*#__PURE__*/function () {\n  function Map(w, h) {\n    _classCallCheck(this, Map);\n    this.canvasdimensions = new Vector2D(w, h); // establishing at start means no resizing canvas element\n    this.matrix = null;\n\n    // this.cachedChunks = [];\n\n    this.lastchunkrequesttime = null;\n  }\n  _createClass(Map, [{\n    key: \"makeMatrix\",\n    value: function makeMatrix(dimn, start, chunksize, resolveGenerated) {\n      var _this = this;\n      var coords = [];\n      var grid = Array(dimn.x);\n      var _loop = function _loop(i) {\n        grid[i] = Array(dimn.y);\n        var _loop2 = function _loop2(j) {\n          _this.cachedChunks.forEach(function (element) {\n            if (element.x === i + startx && element.y === j + starty) {\n              grid[i][j] = element;\n            }\n          });\n          if (!grid[i][j]) grid[i][j] = new Chunk(chunksize, i + startx, j + starty);\n        };\n        for (var j = 0; j < dimn.x; j++) {\n          _loop2(j);\n        }\n      };\n      for (var i = 0; i < dimn.x; i++) {\n        _loop(i);\n      }\n      for (var _i = 0; _i < dimn.x * dimn.y; _i++) {\n        grid[_i] = Array(dimn.y).fill(new Chunk(chunksize, 0, 0));\n        var coordsobj = {\n          x: start.x + Math.floor(_i / dimn.x),\n          y: start.y + _i % dimn.y\n        };\n        coords.push(coordsobj);\n      }\n      // console.log(coords);\n      fetch('/getchunks', {\n        method: 'POST',\n        headers: {\n          'Accept': 'application/json',\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(coords)\n      }).then(function (res) {\n        return res.json();\n      }).then(function (express_data) {\n        var chunklist = express_data;\n        // console.log(chunklist);\n\n        for (var _i2 = 0; _i2 < chunklist.length; _i2++) {\n          var coordstring = chunklist[_i2].coord;\n          var x = parseInt(coordstring.split(',')[0]);\n          var y = parseInt(coordstring.split(',')[1]);\n          console.log(x, y);\n          if (chunklist[_i2].chunkdata !== '0') {\n            grid[x][y] = new Chunk(chunksize, x + start.x, y + start.y, chunklist[_i2].chunkdata.split(''));\n            console.log(grid[x][y]);\n          } else grid[x][y] = new Chunk(chunksize, x + start.x, y + start.y);\n        }\n        ;\n\n        // console.log(`new chunk made ${i},${j}`);\n        // console.log(`${i},${j},${dimn.x},${dimn.y}`);\n        resolveGenerated(start);\n      });\n      return grid;\n    }\n  }, {\n    key: \"generateChunks\",\n    value: function generateChunks(offset, cellsize, scale, chunksize) {\n      var numchunks = new Vector2D(0, 0);\n      var startpoint = new Vector2D(0, 0);\n      var map_grid = this;\n      return new Promise(function (resolve, reject) {\n        // console.log(`${cellsize},${scale},${chunksize}`)\n\n        var chunkpixels = chunksize * cellsize * scale; // number of pixels in chunk width\n\n        startpoint.x = Math.floor(-1 * offset.x / chunkpixels);\n        startpoint.y = Math.floor(-1 * offset.y / chunkpixels);\n        numchunks.x = Math.ceil(map_grid.canvasdimensions.x / chunkpixels) + 1; // bit cheaty - should probs optimise\n        numchunks.y = Math.ceil(map_grid.canvasdimensions.y / chunkpixels) + 1;\n\n        // console.log(`startpoint: (${startpoint.x},${startpoint.y})`);\n        // console.log(`dimensions: (${numchunks.x},${numchunks.y})`);\n        // if (this.matrix) {\n        //     for (let i=0;i<this.matrix.length;i++) {\n        //         for (let k=0;k<this.matrix[i].length;k++) {\n        //             let current = this.matrix[i][k];\n\n        //             let in_array = false;\n        //             this.cachedChunks.forEach((element) => {\n        //                 if (element.x===current.x && element.y===current.y) in_array = true;\n        //             })\n        //             if (current.modified && !in_array) this.cachedChunks.push(current);\n        //         }\n        //     }\n        // }\n        map_grid.matrix = map_grid.makeMatrix(numchunks, startpoint, chunksize, resolve);\n      });\n    }\n  }, {\n    key: \"getChunkPosOffset\",\n    value: function getChunkPosOffset(currentcell, chunksize, startpoint) {\n      var cell_i = Math.floor(currentcell.x / chunksize) - startpoint.x;\n      var cell_k = currentcell.x - (cell_i + startpoint.x) * chunksize;\n      var cell_j = Math.floor(currentcell.y / chunksize) - startpoint.y;\n      var cell_l = currentcell.y - (cell_j + startpoint.y) * chunksize;\n      return {\n        cell_i: cell_i,\n        cell_j: cell_j,\n        cell_k: cell_k,\n        cell_l: cell_l\n      };\n    }\n  }]);\n  return Map;\n}();\nvar Chunk = /*#__PURE__*/function () {\n  function Chunk(chunksize, x, y) {\n    var chunkcells = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : [];\n    _classCallCheck(this, Chunk);\n    //this.matrix = this.makeMatrix(chunksize, chunksize);\n    this.x = x;\n    this.y = y;\n    if (chunkcells.length) {\n      this.modified_cells = chunkcells;\n    } else {\n      this.modified_cells = Array(chunksize * chunksize).fill(0);\n    }\n  }\n  _createClass(Chunk, [{\n    key: \"addCell\",\n    value: function addCell(x, y, id) {\n      this.modified_cells[x * 16 + y] = id;\n      this.modified = true;\n    }\n  }]);\n  return Chunk;\n}();\nvar AppWrapper = /*#__PURE__*/function (_React$Component) {\n  _inherits(AppWrapper, _React$Component);\n  function AppWrapper(props) {\n    var _this2;\n    _classCallCheck(this, AppWrapper);\n    _this2 = _possibleConstructorReturn(this, _getPrototypeOf(AppWrapper).call(this, props));\n    _this2.state = {\n      block_selected: 1,\n      update_time: 0,\n      tot_update_time: 0,\n      num_updates: 1,\n      express_data: null\n    };\n    _this2.changeBlock = function (blockid) {\n      _this2.setState({\n        block_selected: blockid\n      });\n    };\n    _this2.getBlockSelected = function () {\n      return _this2.state.block_selected;\n    };\n    _this2.isSelected = function (blockid) {\n      return blockid === _this2.state.block_selected;\n    };\n    _this2.changeUpdateTime = function (new_time) {\n      _this2.setState({\n        update_time: new_time,\n        tot_update_time: _this2.state.tot_update_time + new_time,\n        num_updates: _this2.state.num_updates + 1\n      });\n    };\n    return _this2;\n  }\n  _createClass(AppWrapper, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      document.body.style.overflow = \"hidden\"; // stops user from scrolling the page\n      this.getData();\n    }\n  }, {\n    key: \"getData\",\n    value: function getData() {\n      var _this3 = this;\n      fetch(\"/api\").then(function (res) {\n        return res.json();\n      }).then(function (express_data) {\n        return _this3.setState({\n          express_data: express_data.message\n        });\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"App-wrapper\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 326,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(MapCanvas, {\n        changeUpdateTime: this.changeUpdateTime,\n        getBlockSelected: this.getBlockSelected,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 327,\n          columnNumber: 17\n        }\n      }), /*#__PURE__*/React.createElement(Palette, {\n        isSelected: this.isSelected,\n        changeBlock: this.changeBlock,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 328,\n          columnNumber: 17\n        }\n      }), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"drawer primary\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 329,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        style: {\n          position: \"absolute\",\n          right: \"0.8vw\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 330,\n          columnNumber: 17\n        }\n      }, \"(\", this.state.update_time, \"ms, avg: \", Math.round(this.state.tot_update_time / this.state.num_updates), \"ms, \", this.state.num_updates, \" updates)\", /*#__PURE__*/React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 332,\n          columnNumber: 21\n        }\n      }), \"Here is the express message: \".concat(this.state.express_data)), /*#__PURE__*/React.createElement(\"b\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 334,\n          columnNumber: 17\n        }\n      }, \"Instructions:\"), /*#__PURE__*/React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 334,\n          columnNumber: 37\n        }\n      }), \"This is a pixel art canvas with infinite area. Scroll to zoom in and out, right click to pan around, and use left click to draw on the canvas.\", /*#__PURE__*/React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 335,\n          columnNumber: 17\n        }\n      }), \"Use the palette on the right to select your colour.\", /*#__PURE__*/React.createElement(\"div\", {\n        style: {\n          color: \"#909090\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 336,\n          columnNumber: 17\n        }\n      }, \"(!!!!) Be aware that there is no saving yet lol, also this is just a prototype so limited colours, no drawing tools etc.\")));\n    }\n  }]);\n  return AppWrapper;\n}(React.Component);\nvar MapCanvas = /*#__PURE__*/function (_React$Component2) {\n  _inherits(MapCanvas, _React$Component2);\n  function MapCanvas(props) {\n    var _this4;\n    _classCallCheck(this, MapCanvas);\n    _this4 = _possibleConstructorReturn(this, _getPrototypeOf(MapCanvas).call(this, props));\n    _this4.getBlockSelected = props.getBlockSelected;\n    _this4.changeUpdateTime = props.changeUpdateTime;\n    _this4.cellsize = 8;\n    _this4.scale = 2;\n    _this4.chunksize = 16;\n    _this4.map_grid = null;\n    _this4.canvasRef = createRef();\n    _this4.mapoffset = new Vector2D(0, 0);\n    _this4.celloffset = new Vector2D(0, 0);\n    _this4.currentcell = new Vector2D(0, 0);\n    _this4.startpoint = new Vector2D(0, 0);\n    _this4.cursorcurrent = new Vector2D(0, 0);\n    _this4.lmousedown = false;\n    _this4.rmousedown = false;\n    _this4.canvas = null;\n    return _this4;\n  }\n\n  //Called after element's initialisation\n  // componentDidUpdate() { this.updateCanvas() }\n  _createClass(MapCanvas, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.canvas = this.canvasRef.current;\n\n      // this.resizeCanvas(this.canvas);\n      var _this$canvas$getBound = this.canvas.getBoundingClientRect(),\n        width = _this$canvas$getBound.width,\n        height = _this$canvas$getBound.height;\n      this.map_grid = new Map(width, height);\n      this.updateCanvas();\n    }\n  }, {\n    key: \"getCursorPosition\",\n    value: function getCursorPosition(event, canvas) {\n      var rect = canvas.getBoundingClientRect();\n      var x = event.clientX - rect.left;\n      var y = event.clientY - rect.top;\n      var pos = new Vector2D(x, y);\n      // console.log(`cursor at (${x.toFixed(1)},${y.toFixed(1)})`);\n      return pos;\n    }\n  }, {\n    key: \"getCurrentCell\",\n    value: function getCurrentCell() {\n      var x = Math.floor((this.cursorcurrent.x - this.mapoffset.x) / (this.cellsize * this.scale));\n      var y = Math.floor((this.cursorcurrent.y - this.mapoffset.y) / (this.cellsize * this.scale));\n      var pos = new Vector2D(x, y);\n      return pos;\n    }\n  }, {\n    key: \"moveMap\",\n    value: function moveMap(start, end) {\n      var x = end.x - start.x;\n      var y = end.y - start.y;\n      this.mapoffset.transform(x, y);\n      this.celloffset.setTo(Math.round(this.mapoffset.x), Math.round(this.mapoffset.y));\n    } // maybe should be in the map class\n  }, {\n    key: \"drawMap\",\n    value: function drawMap(canvas, startpoint) {\n      var _this5 = this;\n      var ctx = canvas.getContext('2d');\n      ctx.clearRect(0, 0, canvas.width, canvas.height);\n      ctx.fillStyle = \"#000000\";\n      ctx.fillRect(0, 0, canvas.width, canvas.height);\n      var cellapparentsize = this.cellsize * this.scale;\n\n      // finding location in terms of iterators of current cell\n      var _this$map_grid$getChu = this.map_grid.getChunkPosOffset(this.currentcell, this.chunksize, startpoint),\n        cell_i = _this$map_grid$getChu.cell_i,\n        cell_j = _this$map_grid$getChu.cell_j,\n        cell_k = _this$map_grid$getChu.cell_k,\n        cell_l = _this$map_grid$getChu.cell_l;\n      var blockid;\n      var x;\n      var y;\n      var doFill = function doFill(i, j, k, l) {\n        x = ((i + startpoint.x) * _this5.chunksize + k) * cellapparentsize + _this5.mapoffset.x;\n        y = ((j + startpoint.y) * _this5.chunksize + l) * cellapparentsize + _this5.mapoffset.y;\n        ctx.fillRect(x, y, cellapparentsize, cellapparentsize);\n      };\n\n      // for map\n      for (var i = 0; i < this.map_grid.matrix.length; i++) {\n        for (var j = 0; j < this.map_grid.matrix[i].length; j++) {\n          // for each chunk\n          for (var c = 0; c < this.chunksize * this.chunksize; c++) {\n            var k = Math.floor(c / this.chunksize);\n            var l = c - k * this.chunksize;\n            if (typeof this.map_grid.matrix[i][j] === 'undefined') continue;\n            blockid = this.map_grid.matrix[i][j].modified_cells[c];\n            if (blockid !== 0) {\n              ctx.fillStyle = blocks[blockid].imagesrc; // placeholder until get images\n              doFill(i, j, k, l, blockid);\n            }\n          }\n        }\n      }\n      ctx.fillStyle = blocks[this.getBlockSelected()].imagesrc + \"8f\"; // placeholder until get images\n      doFill(cell_i, cell_j, cell_k, cell_l);\n    }\n  }, {\n    key: \"updateCanvas\",\n    value: function updateCanvas() {\n      var _this6 = this;\n      var start = Date.now(); // time testing\n\n      this.resizeCanvas(this.canvas);\n      this.map_grid.generateChunks(this.mapoffset, this.cellsize, this.scale, this.chunksize).then(function (startpoint) {\n        _this6.startpoint = startpoint;\n        _this6.drawMap(_this6.canvas, startpoint);\n        console.log(_this6.map_grid.matrix);\n        var delta = Date.now() - start;\n        _this6.changeUpdateTime(delta);\n      });\n\n      // requestAnimationFrame(() => {this.drawMap(this.canvas, startpoint);});\n    } // stolen code lmao\n  }, {\n    key: \"resizeCanvas\",\n    value: function resizeCanvas(canvas) {\n      var _canvas$getBoundingCl = canvas.getBoundingClientRect(),\n        width = _canvas$getBoundingCl.width,\n        height = _canvas$getBoundingCl.height;\n      if (canvas.width !== width || canvas.height !== height) {\n        var _window = window,\n          _window$devicePixelRa = _window.devicePixelRatio,\n          ratio = _window$devicePixelRa === void 0 ? 1 : _window$devicePixelRa;\n        var context = canvas.getContext('2d');\n        canvas.width = width * ratio;\n        canvas.height = height * ratio;\n        context.scale(ratio, ratio);\n        return true;\n      }\n      return false;\n    }\n  }, {\n    key: \"drawCellAtMouse\",\n    value: function drawCellAtMouse(x, y) {\n      var currentpos = new Vector2D(x - this.celloffset.x, y - this.celloffset.y);\n      var _this$map_grid$getChu2 = this.map_grid.getChunkPosOffset(currentpos, this.chunksize, this.startpoint),\n        cell_i = _this$map_grid$getChu2.cell_i,\n        cell_j = _this$map_grid$getChu2.cell_j,\n        cell_k = _this$map_grid$getChu2.cell_k,\n        cell_l = _this$map_grid$getChu2.cell_l;\n      this.map_grid.matrix[cell_i][cell_j].addCell(cell_k, cell_l, this.getBlockSelected());\n      // console.log(`cell drawn at chunk ${cell_i},${cell_j}`);\n    }\n  }, {\n    key: \"moveCursor\",\n    value: function moveCursor(event) {\n      var _this7 = this;\n      var update = false;\n      var newcursorcurrent = this.getCursorPosition(event, this.canvas);\n      if (this.rmousedown) {\n        this.moveMap(this.cursorcurrent, newcursorcurrent);\n        update = true;\n      }\n      this.cursorcurrent = newcursorcurrent;\n      var newcurrentcell = this.getCurrentCell();\n      if (!this.currentcell.isEqualTo(newcurrentcell)) {\n        if (this.lmousedown) {\n          plotLine(this.currentcell, newcurrentcell, this.celloffset, function (x, y) {\n            return _this7.drawCellAtMouse(x, y);\n          });\n        }\n        this.currentcell = newcurrentcell;\n        update = true;\n      }\n      return update;\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this8 = this;\n      return /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 515,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"canvas\", {\n        ref: this.canvasRef,\n        className: \"map-canvas primary\",\n        onContextMenu: function onContextMenu(e) {\n          e.preventDefault();\n          // this.rmousedown=true;\n        },\n\n        onMouseDown: function onMouseDown(e) {\n          e.preventDefault();\n          if (e.button === 0) {\n            _this8.lmousedown = true;\n            plotLine(_this8.currentcell, _this8.currentcell, _this8.celloffset, function (x, y) {\n              return _this8.drawCellAtMouse(x, y);\n            });\n            _this8.updateCanvas();\n          } else if (e.button === 2) {\n            _this8.rmousedown = true;\n          }\n        },\n        onMouseUp: function onMouseUp(e) {\n          _this8.lmousedown = false;\n          _this8.rmousedown = false;\n        },\n        onMouseMove: function onMouseMove(e) {\n          var update = false;\n          update = _this8.moveCursor(e);\n          if (update) _this8.updateCanvas();\n        },\n        onMouseLeave: function onMouseLeave(e) {\n          // console.log(\"left canvas\");\n          _this8.moveCursor(e);\n          _this8.lmousedown = false;\n          _this8.rmousedown = false;\n          _this8.currentcell.setTo(-1, -1);\n          _this8.updateCanvas();\n        },\n        onWheel: function onWheel(e) {\n          e.preventDefault();\n          var newscale = _this8.scale + Math.round(e.deltaY) / 100;\n          if (newscale > 0.5) _this8.scale = newscale;else _this8.scale = 0.5;\n          // console.log(this.scale);\n          // console.log(e.deltaY);\n          _this8.updateCanvas();\n          // if (this.scale < 1) console.table(this.map_grid.matrix);\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 516,\n          columnNumber: 13\n        }\n      }));\n    }\n  }]);\n  return MapCanvas;\n}(React.Component); // needs to be fixed up - maybe add useEffect()\nvar Palette = /*#__PURE__*/function (_React$Component3) {\n  _inherits(Palette, _React$Component3);\n  function Palette(props) {\n    var _this9;\n    _classCallCheck(this, Palette);\n    _this9 = _possibleConstructorReturn(this, _getPrototypeOf(Palette).call(this, props));\n    _this9.changeBlock = props.changeBlock;\n    return _this9;\n  }\n  _createClass(Palette, [{\n    key: \"render\",\n    value: function render() {\n      var _this10 = this;\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"palette primary\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 579,\n          columnNumber: 13\n        }\n      }, blocks.map(function (button) {\n        return /*#__PURE__*/React.createElement(\"div\", {\n          key: button.blockid,\n          style: {\n            backgroundColor: \"\".concat(button.imagesrc)\n          },\n          className: \"blockbutton\" + (_this10.props.isSelected(button.blockid) ? \"selected\" : \"\"),\n          onClick: function onClick() {\n            _this10.changeBlock(button.blockid);\n          }\n          //onClick={() => {console.log(button.blockid)}}\n          ,\n          __self: _this10,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 582,\n            columnNumber: 25\n          }\n        });\n      }));\n    }\n  }]);\n  return Palette;\n}(React.Component);\nfunction App() {\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"App\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 602,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(AppWrapper, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 603,\n      columnNumber: 9\n    }\n  }));\n}\nexport default App;","map":{"version":3,"names":["React","createRef","blocks","blockid","blockname","imagesrc","plotLineLow","x0","y0","x1","y1","drawFunc","dx","dy","yi","D","y","x","plotLineHigh","xi","plotLine","p1","p2","offset","Math","abs","Vector2D","_classCallCheck","_createClass","key","value","transform","setTo","isEqualTo","othervector","positive","Map","w","h","canvasdimensions","matrix","lastchunkrequesttime","makeMatrix","dimn","start","chunksize","resolveGenerated","_this","coords","grid","Array","_loop","i","_loop2","j","cachedChunks","forEach","element","startx","starty","Chunk","fill","coordsobj","floor","push","fetch","method","headers","body","JSON","stringify","then","res","json","express_data","chunklist","length","coordstring","coord","parseInt","split","console","log","chunkdata","generateChunks","cellsize","scale","numchunks","startpoint","map_grid","Promise","resolve","reject","chunkpixels","ceil","getChunkPosOffset","currentcell","cell_i","cell_k","cell_j","cell_l","chunkcells","arguments","undefined","modified_cells","addCell","id","modified","AppWrapper","_React$Component","_inherits","props","_this2","_possibleConstructorReturn","_getPrototypeOf","call","state","block_selected","update_time","tot_update_time","num_updates","changeBlock","setState","getBlockSelected","isSelected","changeUpdateTime","new_time","componentDidMount","document","style","overflow","getData","_this3","message","render","createElement","className","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","MapCanvas","Palette","position","right","round","concat","color","Component","_React$Component2","_this4","canvasRef","mapoffset","celloffset","cursorcurrent","lmousedown","rmousedown","canvas","current","_this$canvas$getBound","getBoundingClientRect","width","height","updateCanvas","getCursorPosition","event","rect","clientX","left","clientY","top","pos","getCurrentCell","moveMap","end","drawMap","_this5","ctx","getContext","clearRect","fillStyle","fillRect","cellapparentsize","_this$map_grid$getChu","doFill","k","l","c","_this6","Date","now","resizeCanvas","delta","_canvas$getBoundingCl","_window","window","_window$devicePixelRa","devicePixelRatio","ratio","context","drawCellAtMouse","currentpos","_this$map_grid$getChu2","moveCursor","_this7","update","newcursorcurrent","newcurrentcell","_this8","ref","onContextMenu","e","preventDefault","onMouseDown","button","onMouseUp","onMouseMove","onMouseLeave","onWheel","newscale","deltaY","_React$Component3","_this9","_this10","map","backgroundColor","onClick","App"],"sources":["/Users/alex/Programming/web_development/map_dev_server/client/src/App.js"],"sourcesContent":["import './App.css';\nimport React, { createRef } from 'react';\n\n\nconst blocks = [\n    {\n        blockid: 0,\n        blockname: '1',\n        imagesrc: '#ffffff'\n    },\n    {\n        blockid: 1,\n        blockname: '2',\n        imagesrc: '#d1e7dc'\n    },\n    {\n        blockid: 2,\n        blockname: '3',\n        imagesrc: '#c4d4e1'\n    },\n    {\n        blockid: 3,\n        blockname: '4',\n        imagesrc: '#bcb5d3'\n    },\n    {\n        blockid: 4,\n        blockname: '5',\n        imagesrc: '#f5dbe2'\n    },\n    {\n        blockid: 5,\n        blockname: '6',\n        imagesrc: '#eeb6c9'\n    },\n    {\n        blockid: 6,\n        blockname: '7',\n        imagesrc: '#c49abf'\n    },\n    {\n        blockid: 7,\n        blockname: '8',\n        imagesrc: '#bada55'\n    },\n    {\n        blockid: 8,\n        blockname: '9',\n        imagesrc: '#ffd700'\n    },\n    {\n        blockid: 9,\n        blockname: '10',\n        imagesrc: '#f47b79'\n    }\n];\n\nfunction plotLineLow(x0, y0, x1, y1, drawFunc) {\n    let dx = x1 - x0;\n    let dy = y1 - y0;\n    let yi = 1;\n    if (dy < 0) {\n        yi = -1;\n        dy = -dy;\n    }\n    let D = (2 * dy) - dx;\n    let y = y0;\n\n    for (let x = x0;x<x1+1;x++) {\n        drawFunc(x, y);\n        if (D > 0) {\n            y = y + yi;\n            D = D + (2 * (dy - dx));\n        } else {\n            D = D + 2*dy;\n        }\n    }\n}\nfunction plotLineHigh(x0, y0, x1, y1, drawFunc) {\n    let dx = x1 - x0;\n    let dy = y1 - y0;\n    let xi = 1;\n    if (dx < 0) {\n        xi = -1;\n        dx = -dx;\n    }\n    let D = (2 * dx) - dy;\n    let x = x0;\n\n    for (let y = y0;y<y1+1;y++) {\n        drawFunc(x, y);\n        if (D > 0) {\n            x = x + xi;\n            D = D + (2 * (dx - dy));\n        } else {\n            D = D + 2*dx;\n        }\n    }\n}\n\nfunction plotLine(p1, p2, offset, drawFunc) {\n    \n    let x0 = p1.x+offset.x;\n    let y0 = p1.y+offset.y;\n    \n    let x1 = p2.x+offset.x;\n    let y1 = p2.y+offset.y;\n\n    if (x0===x1 && y0===y1) drawFunc(x0,y0);\n\n\n    if (Math.abs(y1 - y0) < Math.abs(x1 - x0)) {\n        if (x0 > x1) plotLineLow(x1, y1, x0, y0, drawFunc);\n        else plotLineLow(x0, y0, x1, y1, drawFunc);\n    }\n    else {\n        if (y0 > y1) plotLineHigh(x1, y1, x0, y0, drawFunc);\n        else plotLineHigh(x0, y0, x1, y1, drawFunc);\n    }\n}\n\n\nclass Vector2D {\n    constructor(x,y) {\n        this.x = x;\n        this.y = y;\n    }\n\n    transform(x,y) {\n        this.x += x;\n        this.y += y;\n    }\n\n    setTo(x,y) {\n        this.x = x;\n        this.y = y;\n    }\n\n    isEqualTo(othervector) {\n        return (this.x===othervector.x && this.y===othervector.y);\n    }\n\n    positive() {\n        return (this.x >= 0 && this.y >=0);\n    }\n}\n\n\nclass Map {\n    constructor(w, h) {\n\n        this.canvasdimensions = new Vector2D(w,h); // establishing at start means no resizing canvas element\n        this.matrix = null;\n\n        // this.cachedChunks = [];\n\n        this.lastchunkrequesttime = null;\n        \n\n    }\n    makeMatrix(dimn, start, chunksize, resolveGenerated) {\n\n        let coords = [];\n\n        let grid = Array(dimn.x);\n        for (let i=0;i<dimn.x;i++) {\n            grid[i] = Array(dimn.y);\n            for (let j=0;j<dimn.x;j++) {\n                \n                this.cachedChunks.forEach(element => {\n                    if (element.x===i+startx && element.y===j+starty) {\n                        grid[i][j] = element;\n                    }\n                });\n                if (!grid[i][j]) grid[i][j] = new Chunk(chunksize, i+startx, j+starty);\n            }\n        }\n        for (let i=0;i<(dimn.x*dimn.y);i++) {\n            grid[i] = Array(dimn.y).fill(new Chunk(chunksize,0,0));\n\n            let coordsobj = { x: start.x+Math.floor(i/dimn.x), y: start.y+i%dimn.y };\n            coords.push(coordsobj);\n        }\n        // console.log(coords);\n        fetch('/getchunks',{\n            method: 'POST',\n            headers: {'Accept': 'application/json', 'Content-Type': 'application/json'},\n            body: JSON.stringify(coords)\n        })\n        .then((res) => res.json())\n        .then((express_data) => {\n            let chunklist = express_data;\n            // console.log(chunklist);\n\n            for (let i=0;i<chunklist.length;i++) {\n                let coordstring = chunklist[i].coord;\n                let x = parseInt(coordstring.split(',')[0]);\n                let y = parseInt(coordstring.split(',')[1]);\n                console.log(x,y);\n                \n                if (chunklist[i].chunkdata !== '0') {\n                    grid[x][y] = new Chunk(chunksize, x+start.x, y+start.y, chunklist[i].chunkdata.split(''));\n                    console.log(grid[x][y]);\n                }\n    \n                else grid[x][y] = new Chunk(chunksize, x+start.x, y+start.y);\n            };\n\n            \n            // console.log(`new chunk made ${i},${j}`);\n            // console.log(`${i},${j},${dimn.x},${dimn.y}`);\n            resolveGenerated(start);\n        });\n        return grid;\n    }\n\n    generateChunks(offset, cellsize, scale, chunksize) {\n        let numchunks = new Vector2D(0,0);\n        let startpoint = new Vector2D(0,0);\n\n        let map_grid = this;\n\n        return new Promise(function(resolve, reject) {\n            // console.log(`${cellsize},${scale},${chunksize}`)\n\n            let chunkpixels = chunksize*cellsize*scale; // number of pixels in chunk width\n            \n            startpoint.x = Math.floor((-1*offset.x)/chunkpixels);\n            startpoint.y = Math.floor((-1*offset.y)/chunkpixels);\n\n            numchunks.x = Math.ceil(map_grid.canvasdimensions.x/chunkpixels)+1; // bit cheaty - should probs optimise\n            numchunks.y = Math.ceil(map_grid.canvasdimensions.y/chunkpixels)+1;\n\n            // console.log(`startpoint: (${startpoint.x},${startpoint.y})`);\n            // console.log(`dimensions: (${numchunks.x},${numchunks.y})`);\n            // if (this.matrix) {\n            //     for (let i=0;i<this.matrix.length;i++) {\n            //         for (let k=0;k<this.matrix[i].length;k++) {\n            //             let current = this.matrix[i][k];\n\n            //             let in_array = false;\n            //             this.cachedChunks.forEach((element) => {\n            //                 if (element.x===current.x && element.y===current.y) in_array = true;\n            //             })\n            //             if (current.modified && !in_array) this.cachedChunks.push(current);\n            //         }\n            //     }\n            // }\n            map_grid.matrix = map_grid.makeMatrix(numchunks, startpoint, chunksize, resolve);\n        });\n\n    }\n\n    getChunkPosOffset(currentcell, chunksize, startpoint) {\n        const cell_i = Math.floor((currentcell.x/chunksize))-startpoint.x;\n        const cell_k = currentcell.x - (cell_i+startpoint.x)*chunksize;\n\n        const cell_j = Math.floor((currentcell.y/chunksize))-startpoint.y;\n        const cell_l = currentcell.y - (cell_j+startpoint.y)*chunksize;\n\n\n        return {cell_i, cell_j, cell_k, cell_l};\n    }\n}\n\nclass Chunk {\n    constructor (chunksize, x, y, chunkcells=[]) {\n        //this.matrix = this.makeMatrix(chunksize, chunksize);\n        this.x = x;\n        this.y = y;\n        \n        if (chunkcells.length) {\n            this.modified_cells = chunkcells;\n        } else {\n            this.modified_cells = Array(chunksize*chunksize).fill(0);\n        }\n        \n    }\n\n    addCell(x,y, id) {\n        this.modified_cells[x*16+y] = id;\n        this.modified = true;\n    }\n    \n}\n\n\nclass AppWrapper extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            block_selected: 1, \n            update_time: 0,\n            tot_update_time: 0,\n            num_updates: 1,\n            express_data: null\n        };\n\n        this.changeBlock = (blockid) => {this.setState({block_selected: blockid})};\n        this.getBlockSelected = () => {return this.state.block_selected};\n\n        this.isSelected = (blockid) => {return (blockid===this.state.block_selected)};\n\n        this.changeUpdateTime = (new_time) => {\n            this.setState({\n                update_time: new_time, \n                tot_update_time: this.state.tot_update_time+new_time, \n                num_updates: this.state.num_updates+1\n            });\n        }\n    }\n\n    componentDidMount() {\n        document.body.style.overflow = \"hidden\"; // stops user from scrolling the page\n        this.getData();\n    }\n\n    getData() {\n        fetch(\"/api\")\n        .then((res) => res.json())\n        .then((express_data) => this.setState({express_data: express_data.message}));\n    }\n\n    render() {\n        return (\n            <div className='App-wrapper'>\n                <MapCanvas changeUpdateTime={this.changeUpdateTime} getBlockSelected={this.getBlockSelected}/>\n                <Palette isSelected={this.isSelected} changeBlock={this.changeBlock}/>\n                <div className='drawer primary'>\n                <div style={{position: `absolute`,right:`0.8vw`}}>\n                    ({this.state.update_time}ms, avg: {Math.round(this.state.tot_update_time/this.state.num_updates)}ms, {this.state.num_updates} updates)\n                    <br/>{`Here is the express message: ${this.state.express_data}`}\n                </div>\n                <b>Instructions:</b><br/>This is a pixel art canvas with infinite area. Scroll to zoom in and out, right click to pan around, and use left click to draw on the canvas.\n                <br/>Use the palette on the right to select your colour.\n                <div style={{color: `#909090`}}>(!!!!) Be aware that there is no saving yet lol, also this is just a prototype so limited colours, no drawing tools etc.</div>\n                </div>\n            </div>\n        )\n    }\n}\n\nclass MapCanvas extends React.Component {\n    constructor(props) {\n        super(props);\n\n        this.getBlockSelected = props.getBlockSelected;\n\n        this.changeUpdateTime = props.changeUpdateTime;\n\n        this.cellsize = 8;\n        this.scale = 2;\n        this.chunksize = 16;\n\n        this.map_grid = null;\n        this.canvasRef = createRef();\n    \n        this.mapoffset = new Vector2D(0,0);\n        this.celloffset = new Vector2D(0,0);\n        this.currentcell = new Vector2D(0,0);\n        this.startpoint = new Vector2D(0,0);\n\n        this.cursorcurrent = new Vector2D(0,0);\n        this.lmousedown = false;\n        this.rmousedown = false;\n\n        this.canvas = null;\n    }\n\n    //Called after element's initialisation\n    // componentDidUpdate() { this.updateCanvas() }\n    componentDidMount() { \n        this.canvas = this.canvasRef.current;\n\n        // this.resizeCanvas(this.canvas);\n        const { width, height } = this.canvas.getBoundingClientRect();\n        this.map_grid = new Map(width, height);\n\n        this.updateCanvas();\n    }\n\n    getCursorPosition(event, canvas) {\n        const rect = canvas.getBoundingClientRect();\n        const x = event.clientX - rect.left;\n        const y = event.clientY - rect.top;\n        const pos = new Vector2D(x,y);\n        // console.log(`cursor at (${x.toFixed(1)},${y.toFixed(1)})`);\n        return pos;\n    }\n\n    getCurrentCell() {\n        let x = Math.floor((this.cursorcurrent.x-this.mapoffset.x)/(this.cellsize*this.scale));\n        let y = Math.floor((this.cursorcurrent.y-this.mapoffset.y)/(this.cellsize*this.scale));\n        const pos = new Vector2D(x,y);\n        return pos;\n    }\n\n    moveMap(start, end) {\n        let x = (end.x-start.x);\n        let y = (end.y-start.y);\n        this.mapoffset.transform(x,y);\n        this.celloffset.setTo(Math.round(this.mapoffset.x),Math.round(this.mapoffset.y));\n    }\n\n    // maybe should be in the map class\n    drawMap (canvas, startpoint) {\n\n        const ctx = canvas.getContext('2d');\n        ctx.clearRect(0, 0, canvas.width, canvas.height)\n        ctx.fillStyle = \"#000000\";\n        ctx.fillRect(0, 0, canvas.width, canvas.height);\n\n        let cellapparentsize = this.cellsize*this.scale;\n\n        // finding location in terms of iterators of current cell\n        let {cell_i, cell_j, cell_k, cell_l} = this.map_grid.getChunkPosOffset(this.currentcell, this.chunksize, startpoint);\n\n        let blockid;\n        let x;\n        let y;\n\n        let doFill = (i,j,k,l) => {\n\n            x = ((i+startpoint.x)*this.chunksize+k)*(cellapparentsize)+this.mapoffset.x;\n            y = ((j+startpoint.y)*this.chunksize+l)*(cellapparentsize)+this.mapoffset.y;\n\n            ctx.fillRect(x, y, cellapparentsize, cellapparentsize);\n        }\n\n        // for map\n        for (let i=0;i<this.map_grid.matrix.length;i++) {\n            for (let j=0;j<this.map_grid.matrix[i].length;j++) {\n                // for each chunk\n                for (let c=0;c<(this.chunksize*this.chunksize);c++) {\n                    let k = Math.floor(c/this.chunksize);\n                    let l = c-(k*this.chunksize);\n\n                    if (typeof this.map_grid.matrix[i][j] === 'undefined') continue;\n                    blockid = this.map_grid.matrix[i][j].modified_cells[c];\n\n                    if (blockid!==0){\n                        ctx.fillStyle = blocks[blockid].imagesrc; // placeholder until get images\n                        doFill(i,j,k,l,blockid);\n                    }\n                }\n            }\n        }\n        ctx.fillStyle = blocks[this.getBlockSelected()].imagesrc+\"8f\"; // placeholder until get images\n        doFill(cell_i,cell_j,cell_k,cell_l);\n    }\n\n    updateCanvas() {\n        let start = Date.now(); // time testing\n\n        this.resizeCanvas(this.canvas);\n        this.map_grid.generateChunks(this.mapoffset, this.cellsize, this.scale, this.chunksize)\n        .then((startpoint)=>{\n            this.startpoint = startpoint;\n            this.drawMap(this.canvas, startpoint);\n\n            console.log(this.map_grid.matrix);\n            let delta = Date.now()-start;\n            this.changeUpdateTime(delta);\n        });\n        \n        // requestAnimationFrame(() => {this.drawMap(this.canvas, startpoint);});\n    }\n\n    // stolen code lmao\n    resizeCanvas(canvas) {\n        const { width, height } = canvas.getBoundingClientRect();\n        \n        if (canvas.width !== width || canvas.height !== height) {\n          const { devicePixelRatio:ratio=1 } = window;\n          const context = canvas.getContext('2d');\n          canvas.width = width*ratio;\n          canvas.height = height*ratio;\n          context.scale(ratio, ratio);\n          return true;\n        }\n    \n        return false\n    }\n\n    drawCellAtMouse(x,y) {\n        const currentpos = new Vector2D(x-this.celloffset.x,y-this.celloffset.y);\n        let {cell_i, cell_j, cell_k, cell_l} = this.map_grid.getChunkPosOffset(currentpos, this.chunksize, this.startpoint);\n        this.map_grid.matrix[cell_i][cell_j].addCell(cell_k, cell_l, this.getBlockSelected());\n        // console.log(`cell drawn at chunk ${cell_i},${cell_j}`);\n    }\n\n    moveCursor(event) {\n        let update = false;\n        let newcursorcurrent = this.getCursorPosition(event, this.canvas);\n        if (this.rmousedown) {\n            this.moveMap(this.cursorcurrent, newcursorcurrent);\n            update = true;\n        }\n        this.cursorcurrent = newcursorcurrent;\n        let newcurrentcell = this.getCurrentCell();\n        if (!this.currentcell.isEqualTo(newcurrentcell)) {\n            if (this.lmousedown) {\n\n                plotLine(this.currentcell, newcurrentcell, this.celloffset, (x,y)=>this.drawCellAtMouse(x,y));\n            }\n            this.currentcell = newcurrentcell;\n            update = true;\n        }\n        \n        return update;\n    }\n\n    render() {\n        return (\n            <div>\n            <canvas \n                ref={this.canvasRef} \n                className='map-canvas primary'\n                onContextMenu={(e) => {\n                    e.preventDefault();\n                    // this.rmousedown=true;\n                }}\n                onMouseDown={(e) => {\n                    e.preventDefault();\n                    if (e.button === 0) {\n                        this.lmousedown=true;\n                        plotLine(this.currentcell,this.currentcell,this.celloffset, (x,y)=>this.drawCellAtMouse(x,y));\n                        this.updateCanvas();\n                    }\n                    else if (e.button === 2) {\n                        this.rmousedown=true;\n                    }\n                }}\n                onMouseUp={(e) => {\n                    this.lmousedown=false;\n                    this.rmousedown=false;\n                }}\n                onMouseMove={(e) => {\n                    let update = false;\n\n                    update = this.moveCursor(e);\n\n                    if (update) this.updateCanvas();\n                }}\n                onMouseLeave={(e) => {\n                    // console.log(\"left canvas\");\n                    this.moveCursor(e);\n                    this.lmousedown=false;\n                    this.rmousedown=false;\n                    this.currentcell.setTo(-1,-1);\n                    this.updateCanvas()\n                }}\n                onWheel={(e) => {\n                    e.preventDefault();\n                    let newscale = this.scale + Math.round(e.deltaY)/100;\n                    if (newscale>0.5) this.scale = newscale;\n                    else this.scale = 0.5;\n                    // console.log(this.scale);\n                    // console.log(e.deltaY);\n                    this.updateCanvas();\n                    // if (this.scale < 1) console.table(this.map_grid.matrix);\n                }}\n            ></canvas>\n            </div>\n        )\n    }\n}\n\n// needs to be fixed up - maybe add useEffect()\nclass Palette extends React.Component {\n    constructor(props) {\n        super(props);\n\n        this.changeBlock = props.changeBlock;\n    }\n\n    render() {\n        return (\n            <div className='palette primary'>\n                {\n                    blocks.map(button => (\n                        <div \n                            key={button.blockid} \n                            style={{backgroundColor: `${button.imagesrc}`}} \n                            className={`blockbutton` + (this.props.isSelected(button.blockid) ? \"selected\" : \"\")}\n                            onClick={() => {this.changeBlock(button.blockid)}}\n                            //onClick={() => {console.log(button.blockid)}}\n                            ></div>\n                    ))\n                }\n        </div>\n        )\n    }\n\n}\n\n\n\n\nfunction App() {\n  return (\n    <div className='App'>\n        <AppWrapper/>\n    </div>\n  );\n}\n\nexport default App;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}